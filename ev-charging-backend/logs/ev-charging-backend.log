2026-02-06 00:01:54 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 17968 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 00:01:54 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 00:01:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 00:01:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 00:01:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 00:01:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 157 ms. Found 9 JPA repository interfaces.
2026-02-06 00:01:57 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 00:01:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 00:01:57 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 00:01:57 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 00:01:57 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3084 ms
2026-02-06 00:01:57 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 00:01:57 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 00:01:58 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 00:01:58 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 00:01:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 00:01:58 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e9089d7
2026-02-06 00:01:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 00:01:58 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 00:01:58 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 00:02:00 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 00:02:00 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:02:00 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 00:02:05 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSocketEventListener' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\config\WebSocketEventListener.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'chatMessageServiceImpl' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\serviceImpl\ChatMessageServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
2026-02-06 00:02:05 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:02:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 00:02:05 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 00:02:05 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2026-02-06 00:02:05 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-02-06 00:02:05 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSocketEventListener' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\config\WebSocketEventListener.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'chatMessageServiceImpl' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\serviceImpl\ChatMessageServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.evstation.ev_charging_backend.EvChargingBackendApplication.main(EvChargingBackendApplication.java:18)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatMessageServiceImpl' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\serviceImpl\ChatMessageServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1698)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 38 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:120)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:104)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:92)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:92)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:434)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$4(RepositoryFactoryBeanSupport.java:350)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:356)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 48 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:97)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:67)
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:49)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:174)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:254)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:116)
	... 60 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'lastSeen' of 'com.evstation.ev_charging_backend.entity.UserPresence' [UPDATE UserPresence p SET p.status = 'OFFLINE', p.lastSeen = CURRENT_TIMESTAMP WHERE p.user.userId = :userId]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:143)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:167)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:173)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:886)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:796)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:143)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:364)
	at jdk.proxy4/jdk.proxy4.$Proxy143.createQuery(Unknown Source)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:91)
	... 66 common frames omitted
Caused by: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'lastSeen' of 'com.evstation.ev_charging_backend.entity.UserPresence' [UPDATE UserPresence p SET p.status = 'OFFLINE', p.lastSeen = CURRENT_TIMESTAMP WHERE p.user.userId = :userId]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:88)
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:145)
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:132)
	at org.hibernate.query.spi.QueryEngine.interpretHql(QueryEngine.java:54)
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:832)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:878)
	... 73 common frames omitted
Caused by: org.hibernate.query.sqm.PathElementException: Could not resolve attribute 'lastSeen' of 'com.evstation.ev_charging_backend.entity.UserPresence'
	at org.hibernate.query.sqm.SqmPathSource.getSubPathSource(SqmPathSource.java:95)
	at org.hibernate.query.sqm.tree.domain.AbstractSqmPath.get(AbstractSqmPath.java:199)
	at org.hibernate.query.sqm.tree.domain.AbstractSqmFrom.resolvePathPart(AbstractSqmFrom.java:198)
	at org.hibernate.query.hql.internal.DomainPathPart.resolvePathPart(DomainPathPart.java:42)
	at org.hibernate.query.hql.internal.BasicDotIdentifierConsumer.consumeIdentifier(BasicDotIdentifierConsumer.java:92)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimplePath(SemanticQueryBuilder.java:5465)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimplePath(SemanticQueryBuilder.java:277)
	at org.hibernate.grammars.hql.HqlParser$SimplePathContext.accept(HqlParser.java:4403)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.consumeDomainPath(SemanticQueryBuilder.java:5711)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitAssignment(SemanticQueryBuilder.java:700)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitUpdateStatement(SemanticQueryBuilder.java:680)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:459)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:324)
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)
	... 78 common frames omitted
2026-02-06 00:06:11 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 17304 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 00:06:11 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 00:06:11 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 00:06:11 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 00:06:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 00:06:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 221 ms. Found 9 JPA repository interfaces.
2026-02-06 00:06:14 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 00:06:14 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 00:06:14 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 00:06:15 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 00:06:15 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3431 ms
2026-02-06 00:06:15 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 00:06:15 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 00:06:15 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 00:06:16 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 00:06:16 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 00:06:16 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2ceaa575
2026-02-06 00:06:16 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 00:06:17 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 00:06:17 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 00:06:19 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 00:06:19 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:06:20 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 00:06:25 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSocketEventListener' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\config\WebSocketEventListener.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'chatMessageServiceImpl' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\serviceImpl\ChatMessageServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
2026-02-06 00:06:25 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:06:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 00:06:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 00:06:25 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2026-02-06 00:06:25 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-02-06 00:06:25 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webSocketEventListener' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\config\WebSocketEventListener.class]: Unsatisfied dependency expressed through constructor parameter 0: Error creating bean with name 'chatMessageServiceImpl' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\serviceImpl\ChatMessageServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.evstation.ev_charging_backend.EvChargingBackendApplication.main(EvChargingBackendApplication.java:18)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'chatMessageServiceImpl' defined in file [E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes\com\evstation\ev_charging_backend\serviceImpl\ChatMessageServiceImpl.class]: Unsatisfied dependency expressed through constructor parameter 2: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1760)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 24 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userPresenceRepository' defined in com.evstation.ev_charging_backend.repository.UserPresenceRepository defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1698)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 38 common frames omitted
Caused by: org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long); Reason: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.data.repository.query.QueryCreationException.create(QueryCreationException.java:101)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:120)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.mapMethodsToQuery(QueryExecutorMethodInterceptor.java:104)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lambda$new$0(QueryExecutorMethodInterceptor.java:92)
	at java.base/java.util.Optional.map(Optional.java:260)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.<init>(QueryExecutorMethodInterceptor.java:92)
	at org.springframework.data.repository.core.support.RepositoryFactorySupport.getRepository(RepositoryFactorySupport.java:434)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.lambda$afterPropertiesSet$4(RepositoryFactoryBeanSupport.java:350)
	at org.springframework.data.util.Lazy.getNullable(Lazy.java:135)
	at org.springframework.data.util.Lazy.get(Lazy.java:113)
	at org.springframework.data.repository.core.support.RepositoryFactoryBeanSupport.afterPropertiesSet(RepositoryFactoryBeanSupport.java:356)
	at org.springframework.data.jpa.repository.support.JpaRepositoryFactoryBean.afterPropertiesSet(JpaRepositoryFactoryBean.java:132)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 48 common frames omitted
Caused by: java.lang.IllegalArgumentException: Validation failed for query for method public abstract int com.evstation.ev_charging_backend.repository.UserPresenceRepository.setUserOffline(java.lang.Long)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:97)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.<init>(SimpleJpaQuery.java:67)
	at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:49)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:174)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:254)
	at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:99)
	at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:116)
	... 60 common frames omitted
Caused by: java.lang.IllegalArgumentException: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'lastSeen' of 'com.evstation.ev_charging_backend.entity.UserPresence' [UPDATE UserPresence p SET p.status = 'OFFLINE', p.lastSeen = CURRENT_TIMESTAMP WHERE p.user.userId = :userId]
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:143)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:167)
	at org.hibernate.internal.ExceptionConverterImpl.convert(ExceptionConverterImpl.java:173)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:886)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:796)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:143)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:364)
	at jdk.proxy4/jdk.proxy4.$Proxy143.createQuery(Unknown Source)
	at org.springframework.data.jpa.repository.query.SimpleJpaQuery.validateQuery(SimpleJpaQuery.java:91)
	... 66 common frames omitted
Caused by: org.hibernate.query.sqm.UnknownPathException: Could not resolve attribute 'lastSeen' of 'com.evstation.ev_charging_backend.entity.UserPresence' [UPDATE UserPresence p SET p.status = 'OFFLINE', p.lastSeen = CURRENT_TIMESTAMP WHERE p.user.userId = :userId]
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:88)
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.createHqlInterpretation(QueryInterpretationCacheStandardImpl.java:145)
	at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveHqlInterpretation(QueryInterpretationCacheStandardImpl.java:132)
	at org.hibernate.query.spi.QueryEngine.interpretHql(QueryEngine.java:54)
	at org.hibernate.internal.AbstractSharedSessionContract.interpretHql(AbstractSharedSessionContract.java:832)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:878)
	... 73 common frames omitted
Caused by: org.hibernate.query.sqm.PathElementException: Could not resolve attribute 'lastSeen' of 'com.evstation.ev_charging_backend.entity.UserPresence'
	at org.hibernate.query.sqm.SqmPathSource.getSubPathSource(SqmPathSource.java:95)
	at org.hibernate.query.sqm.tree.domain.AbstractSqmPath.get(AbstractSqmPath.java:199)
	at org.hibernate.query.sqm.tree.domain.AbstractSqmFrom.resolvePathPart(AbstractSqmFrom.java:198)
	at org.hibernate.query.hql.internal.DomainPathPart.resolvePathPart(DomainPathPart.java:42)
	at org.hibernate.query.hql.internal.BasicDotIdentifierConsumer.consumeIdentifier(BasicDotIdentifierConsumer.java:92)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimplePath(SemanticQueryBuilder.java:5465)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitSimplePath(SemanticQueryBuilder.java:277)
	at org.hibernate.grammars.hql.HqlParser$SimplePathContext.accept(HqlParser.java:4403)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.consumeDomainPath(SemanticQueryBuilder.java:5711)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitAssignment(SemanticQueryBuilder.java:700)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitUpdateStatement(SemanticQueryBuilder.java:680)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.visitStatement(SemanticQueryBuilder.java:459)
	at org.hibernate.query.hql.internal.SemanticQueryBuilder.buildSemanticModel(SemanticQueryBuilder.java:324)
	at org.hibernate.query.hql.internal.StandardHqlTranslator.translate(StandardHqlTranslator.java:71)
	... 78 common frames omitted
2026-02-06 00:11:12 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 20484 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 00:11:12 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 00:11:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 00:11:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 00:11:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 00:11:13 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 110 ms. Found 9 JPA repository interfaces.
2026-02-06 00:11:14 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 00:11:14 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 00:11:14 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 00:11:14 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 00:11:14 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2197 ms
2026-02-06 00:11:15 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 00:11:15 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 00:11:15 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 00:11:15 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 00:11:15 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 00:11:16 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@638a406a
2026-02-06 00:11:16 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 00:11:16 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 00:11:16 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 00:11:17 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 00:11:18 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:11:19 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 00:11:24 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 00:11:24 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 00:11:24 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 00:11:24 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 00:11:25 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 00:11:25 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 00:11:25 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 00:11:25 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 00:11:25 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 00:11:25 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@726e068f]
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@726e068f]
2026-02-06 00:11:25 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@726e068f]]
2026-02-06 00:11:25 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:11:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:11:25 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 00:11:25 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 00:11:26 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 13.975 seconds (process running for 14.599)
2026-02-06 00:11:39 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 00:11:39 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 00:11:39 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-02-06 00:11:40 [http-nio-8080-exec-3] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:11:40 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:12:05 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 00:12:10 [http-nio-8080-exec-8] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:12:10 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:12:25 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 00:12:40 [http-nio-8080-exec-1] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:12:40 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:13:10 [http-nio-8080-exec-6] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:13:10 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:13:34 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.EmailServiceImpl - Receipt email sent to ram@gmail.com
2026-02-06 00:13:40 [http-nio-8080-exec-9] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:13:40 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:13:41 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.EmailServiceImpl - Booking confirmation email sent to ram@gmail.com
2026-02-06 00:13:43 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 00:14:10 [http-nio-8080-exec-8] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:14:10 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:14:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:14:32 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770316172438
2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/715/1sb3sw4i/websocket
2026-02-06 00:14:32 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 00:14:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 00:14:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 6
2026-02-06 00:14:32 [http-nio-8080-exec-1] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1sb3sw4i]
2026-02-06 00:14:32 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 1sb3sw4i
2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 1sb3sw4i
2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: 1sb3sw4i
2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 00:14:32 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:14:32 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: 1sb3sw4i
2026-02-06 00:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=1sb3sw4i
2026-02-06 00:14:32 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 1sb3sw4i
2026-02-06 00:14:32 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxNTk5OSwiZXhwIjoxNzcwMzE5NTk5fQ.ZdXtE61f2lKmUCwpzd4ApMakkMvsZg6Sw3n9VKI7yYY], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770316172730, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@205b423, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f17384, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1sb3sw4i}], simpHeartbeat=[J@5f38f9cb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f17384, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1sb3sw4i}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user1sb3sw4i subscriptionId=sub-1 session=1sb3sw4i user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:14:32 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user1sb3sw4i subscriptionId=sub-0 session=1sb3sw4i user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:14:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1sb3sw4i] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:14:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1sb3sw4i
2026-02-06 00:14:35 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: 1sb3sw4i
2026-02-06 00:14:35 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 00:14:35 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 00:14:35 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"userId":6,"timestamp":1770316175521,"status":"OFFLINE"}
2026-02-06 00:14:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1sb3sw4i
2026-02-06 00:14:35 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770316172730, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f17384, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1sb3sw4i}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f17384, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1sb3sw4i}]
2026-02-06 00:14:40 [http-nio-8080-exec-10] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:14:40 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:14:42 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [1sb3sw4i]
2026-02-06 00:14:57 [http-nio-8080-exec-5] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:14:57 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:15:13 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.EmailServiceImpl - Cancellation confirmation email sent to ram@gmail.com
2026-02-06 00:15:25 [http-nio-8080-exec-10] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:15:25 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:15:42 [http-nio-8080-exec-2] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:15:42 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:15:45 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 00:16:12 [http-nio-8080-exec-3] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:16:12 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:16:42 [http-nio-8080-exec-3] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:16:42 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:16:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:16:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770316315392
2026-02-06 00:16:55 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 00:16:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 00:16:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:16:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/775/eqzyowvb/websocket
2026-02-06 00:16:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 6
2026-02-06 00:16:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=eqzyowvb]
2026-02-06 00:16:55 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: eqzyowvb
2026-02-06 00:16:55 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: eqzyowvb
2026-02-06 00:16:55 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: eqzyowvb
2026-02-06 00:16:55 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 00:16:55 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 00:16:55 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:16:55 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: eqzyowvb
2026-02-06 00:16:55 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=eqzyowvb
2026-02-06 00:16:55 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: eqzyowvb
2026-02-06 00:16:55 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxNjI0MSwiZXhwIjoxNzcwMzE5ODQxfQ.iP4cKuh5RLgA59b4cS5GnQRE-CaXrBq0WyTL93IF64s], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770316315595, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@1eddda53, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@101a37f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqzyowvb}], simpHeartbeat=[J@5f38f9cb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@101a37f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqzyowvb}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:16:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usereqzyowvb subscriptionId=sub-0 session=eqzyowvb user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:16:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usereqzyowvb subscriptionId=sub-1 session=eqzyowvb user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:17:00 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 00:17:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 00:17:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 6
2026-02-06 00:17:12 [http-nio-8080-exec-1] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:17:12 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:17:32 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 00:17:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 00:17:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 6
2026-02-06 00:17:42 [http-nio-8080-exec-6] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:17:42 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:17:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=eqzyowvb] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:17:45 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session eqzyowvb
2026-02-06 00:17:45 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: eqzyowvb
2026-02-06 00:17:45 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 00:17:45 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 00:17:45 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"userId":6,"timestamp":1770316365212,"status":"OFFLINE"}
2026-02-06 00:17:45 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=eqzyowvb
2026-02-06 00:17:45 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770316315595, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@101a37f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqzyowvb}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@101a37f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqzyowvb}]
2026-02-06 00:17:49 [http-nio-8080-exec-4] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:17:49 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:17:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:17:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770316371693
2026-02-06 00:17:51 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 00:17:51 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 00:17:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:17:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/244/1yplrqa3/websocket
2026-02-06 00:17:51 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 23
2026-02-06 00:17:51 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1yplrqa3]
2026-02-06 00:17:51 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 1yplrqa3
2026-02-06 00:17:51 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 1yplrqa3
2026-02-06 00:17:51 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: 1yplrqa3
2026-02-06 00:17:51 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 00:17:51 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 00:17:51 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:17:51 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: 1yplrqa3
2026-02-06 00:17:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=1yplrqa3
2026-02-06 00:17:51 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 1yplrqa3
2026-02-06 00:17:51 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTYzNjksImV4cCI6MTc3MDMxOTk2OX0.ebSD_ZmfThv1fY3v-lxkZ98rKI0hAsGgUoLzHs446is], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770316371767, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@6f076e39, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61c09da9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=1yplrqa3}], simpHeartbeat=[J@5f38f9cb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61c09da9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=1yplrqa3}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:17:51 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user1yplrqa3 subscriptionId=sub-0 session=1yplrqa3 user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:17:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user1yplrqa3 subscriptionId=sub-1 session=1yplrqa3 user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:17:52 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [eqzyowvb]
2026-02-06 00:17:54 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 00:17:54 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 00:17:54 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 23
2026-02-06 00:18:19 [http-nio-8080-exec-3] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:18:19 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:18:49 [http-nio-8080-exec-5] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:18:49 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:19:19 [http-nio-8080-exec-6] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:19:19 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:19:49 [http-nio-8080-exec-3] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:19:49 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:20:19 [http-nio-8080-exec-5] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:20:19 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:21:23 [http-nio-8080-exec-10] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:21:24 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:21:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1yplrqa3] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:21:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1yplrqa3
2026-02-06 00:21:25 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: 1yplrqa3
2026-02-06 00:21:25 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 00:21:25 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 00:21:25 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"userId":23,"timestamp":1770316585913,"status":"OFFLINE"}
2026-02-06 00:21:25 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1yplrqa3
2026-02-06 00:21:25 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770316371767, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61c09da9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=1yplrqa3}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61c09da9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=1yplrqa3}]
2026-02-06 00:21:32 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [1yplrqa3]
2026-02-06 00:21:46 [http-nio-8080-exec-5] ERROR c.e.e.s.JwtAuthenticationFilter - JWT token extraction failed: JWT expired at 2026-02-04T13:21:04Z. Current time: 2026-02-05T18:36:46Z, a difference of 105342093 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-02-06 00:22:02 [http-nio-8080-exec-7] ERROR c.e.e.s.JwtAuthenticationFilter - JWT token extraction failed: JWT expired at 2026-02-04T13:21:04Z. Current time: 2026-02-05T18:37:02Z, a difference of 105358297 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-02-06 00:22:02 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.InvalidCredentialsException: Invalid email or password!]
2026-02-06 00:22:10 [http-nio-8080-exec-9] ERROR c.e.e.s.JwtAuthenticationFilter - JWT token extraction failed: JWT expired at 2026-02-04T13:21:04Z. Current time: 2026-02-05T18:37:10Z, a difference of 105366994 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-02-06 00:22:11 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.InvalidCredentialsException: Invalid email or password!]
2026-02-06 00:22:21 [http-nio-8080-exec-2] ERROR c.e.e.s.JwtAuthenticationFilter - JWT token extraction failed: JWT expired at 2026-02-04T13:21:04Z. Current time: 2026-02-05T18:37:21Z, a difference of 105377505 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-02-06 00:22:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:22:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770316655245
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/160/5rj0zhws/websocket
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5rj0zhws]
2026-02-06 00:22:35 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5rj0zhws
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 5rj0zhws
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: hari@gmail.com - Session: 5rj0zhws
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: hari@gmail.com
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: hari@gmail.com
2026-02-06 00:22:35 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:22:35 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: hari@gmail.com (ID: 27), Session: 5rj0zhws
2026-02-06 00:22:35 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=hari@gmail.com session=5rj0zhws
2026-02-06 00:22:35 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 5rj0zhws
2026-02-06 00:22:35 [clientOutboundChannel-15] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjcsInN1YiI6ImhhcmlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzE2NjQxLCJleHAiOjE3NzAzMjAyNDF9.8YqYGc2lr0VSFWRmnmsnVf2DTCOC149P4DUV2JGhhSI], accept-version=[1.1,1.0], heart-beat=[10000,10000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770316655351, userId=27, username=hari@gmail.com}, simpHeartbeat=[J@726eece6, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ca91cdb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5rj0zhws}], simpHeartbeat=[J@5f38f9cb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ca91cdb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5rj0zhws}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:22:35 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user5rj0zhws subscriptionId=sub-1 session=5rj0zhws user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:22:35 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user5rj0zhws subscriptionId=sub-0 session=5rj0zhws user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:24:26 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Sent expiry warning for reservation ID: 45
2026-02-06 00:24:33 [http-nio-8080-exec-2] ERROR c.e.e.s.JwtAuthenticationFilter - JWT token extraction failed: JWT expired at 2026-02-04T18:04:36Z. Current time: 2026-02-05T18:39:33Z, a difference of 88497466 milliseconds.  Allowed clock skew: 0 milliseconds.
2026-02-06 00:24:56 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Sent expiry warning for reservation ID: 45
2026-02-06 00:24:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:24:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770316798021
2026-02-06 00:24:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:24:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/827/5kdlm5sv/websocket
2026-02-06 00:24:58 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5kdlm5sv]
2026-02-06 00:24:58 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5kdlm5sv
2026-02-06 00:24:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): http://127.0.0.1:550... - Session: 5kdlm5sv
2026-02-06 00:24:58 [http-nio-8080-exec-3] ERROR c.e.e.c.WebSocketAuthInterceptor -  Failed to extract username from token - Session: 5kdlm5sv - Error: JWT strings must contain exactly 2 period characters. Found: 4
2026-02-06 00:24:58 [http-nio-8080-exec-3] DEBUG o.s.m.s.ExecutorSubscribableChannel - WebSocketAuthInterceptor returned null from preSend, i.e. precluding the send.
2026-02-06 00:25:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:25:09 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770316809223
2026-02-06 00:25:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@3651980
2026-02-06 00:25:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/579/klgsw1n4/websocket
2026-02-06 00:25:09 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=klgsw1n4]
2026-02-06 00:25:09 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: klgsw1n4
2026-02-06 00:25:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: klgsw1n4
2026-02-06 00:25:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: klgsw1n4
2026-02-06 00:25:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 00:25:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 00:25:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:25:09 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: klgsw1n4
2026-02-06 00:25:09 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=klgsw1n4
2026-02-06 00:25:09 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: klgsw1n4
2026-02-06 00:25:09 [clientOutboundChannel-21] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTY3NzMsImV4cCI6MTc3MDMyMDM3M30.K1zjW5k6DWOE17rh9B4liqokgzHUYTlCybs3kG51qHc], accept-version=[1.1,1.0], heart-beat=[10000,10000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770316809262, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@22547da, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ce2a9ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=klgsw1n4}], simpHeartbeat=[J@5f38f9cb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ce2a9ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=klgsw1n4}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:25:09 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userklgsw1n4 subscriptionId=sub-1 session=klgsw1n4 user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:25:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userklgsw1n4 subscriptionId=sub-0 session=klgsw1n4 user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:25:22 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=5rj0zhws, lookupDestination='/chat.sendMessage'
2026-02-06 00:25:22 [clientInboundChannel-22] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 00:25:22 [clientInboundChannel-22] INFO  c.e.e.controller.ChatController -  WebSocket message from hari@gmail.com (27) to 6
2026-02-06 00:25:22 [clientInboundChannel-22] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 27 to user 6
2026-02-06 00:25:22 [clientInboundChannel-22] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new DIRECT conversation between users 27 and 6
2026-02-06 00:25:23 [clientInboundChannel-22] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=3
2026-02-06 00:25:23 [clientInboundChannel-22] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=13
2026-02-06 00:25:23 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/3 session=null payload={"id":13,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 00:25:23 [clientInboundChannel-22] INFO  c.e.e.controller.ChatController -  Message 13 sent successfully
2026-02-06 00:25:23 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=5rj0zhws payload={"id":13,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 00:26:03 [clientInboundChannel-18] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=klgsw1n4, lookupDestination='/chat.sendMessage'
2026-02-06 00:26:03 [clientInboundChannel-18] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 00:26:03 [clientInboundChannel-18] INFO  c.e.e.controller.ChatController -  WebSocket message from dev@gmail.com (23) to 27
2026-02-06 00:26:03 [clientInboundChannel-18] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 23 to user 27
2026-02-06 00:26:03 [clientInboundChannel-18] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new DIRECT conversation between users 23 and 27
2026-02-06 00:26:03 [clientInboundChannel-18] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=4
2026-02-06 00:26:03 [clientInboundChannel-18] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=14
2026-02-06 00:26:03 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/4 session=null payload={"id":14,"conversationId":4,"senderId":23,"senderName":"Dev Sah","receiverId":27...(truncated)
2026-02-06 00:26:03 [clientInboundChannel-18] INFO  c.e.e.controller.ChatController -  Message 14 sent successfully
2026-02-06 00:26:03 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=klgsw1n4 payload={"id":14,"conversationId":4,"senderId":23,"senderName":"Dev Sah","receiverId":27...(truncated)
2026-02-06 00:26:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=klgsw1n4
2026-02-06 00:26:26 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Found 1 expired reservations
2026-02-06 00:26:26 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Expired reservation ID: 45
2026-02-06 00:26:26 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=5rj0zhws
2026-02-06 00:26:34 [clientInboundChannel-21] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=5rj0zhws, lookupDestination='/chat.sendMessage'
2026-02-06 00:26:34 [clientInboundChannel-21] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 00:26:34 [clientInboundChannel-21] INFO  c.e.e.controller.ChatController -  WebSocket message from hari@gmail.com (27) to 6
2026-02-06 00:26:34 [clientInboundChannel-21] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 27 to user 6
2026-02-06 00:26:34 [clientInboundChannel-21] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=15
2026-02-06 00:26:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/3 session=null payload={"id":15,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 00:26:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 00:26:34 [clientInboundChannel-21] INFO  c.e.e.controller.ChatController -  Message 15 sent successfully
2026-02-06 00:26:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=5rj0zhws payload={"id":15,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 00:27:04 [clientInboundChannel-18] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=5rj0zhws, lookupDestination='/chat.sendMessage'
2026-02-06 00:27:04 [clientInboundChannel-18] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 00:27:04 [clientInboundChannel-18] INFO  c.e.e.controller.ChatController -  WebSocket message from hari@gmail.com (27) to 6
2026-02-06 00:27:04 [clientInboundChannel-18] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 27 to user 6
2026-02-06 00:27:04 [clientInboundChannel-18] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=16
2026-02-06 00:27:04 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/3 session=null payload={"id":16,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 00:27:04 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 00:27:04 [clientInboundChannel-18] INFO  c.e.e.controller.ChatController -  Message 16 sent successfully
2026-02-06 00:27:04 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=5rj0zhws payload={"id":16,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 00:28:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5rj0zhws] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:28:04 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5rj0zhws
2026-02-06 00:28:04 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: hari@gmail.com (ID: 27), Session: 5rj0zhws
2026-02-06 00:28:04 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 27 went OFFLINE (last session closed)
2026-02-06 00:28:04 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 27 status to OFFLINE
2026-02-06 00:28:04 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/27 session=null payload={"userId":27,"timestamp":1770316984664,"status":"OFFLINE"}
2026-02-06 00:28:04 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5rj0zhws
2026-02-06 00:28:04 [clientOutboundChannel-23] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770316655351, userId=27, username=hari@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ca91cdb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5rj0zhws}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ca91cdb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5rj0zhws}]
2026-02-06 00:28:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5kdlm5sv] closed with CloseStatus[code=1001, reason=null]
2026-02-06 00:28:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=klgsw1n4] closed with CloseStatus[code=1001, reason=null]
2026-02-06 00:28:06 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5kdlm5sv
2026-02-06 00:28:06 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session klgsw1n4
2026-02-06 00:28:06 [http-nio-8080-exec-3] WARN  c.e.e.config.WebSocketEventListener -  WebSocket disconnected without userId - Session: 5kdlm5sv
2026-02-06 00:28:06 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: klgsw1n4
2026-02-06 00:28:06 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 00:28:06 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5kdlm5sv
2026-02-06 00:28:06 [clientOutboundChannel-25] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=5kdlm5sv}], simpSessionId=5kdlm5sv}]
2026-02-06 00:28:06 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 00:28:06 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"userId":23,"timestamp":1770316986777,"status":"OFFLINE"}
2026-02-06 00:28:06 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=klgsw1n4
2026-02-06 00:28:06 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770316809262, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ce2a9ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=klgsw1n4}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ce2a9ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=klgsw1n4}]
2026-02-06 00:28:12 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 3 sessions: [klgsw1n4, 5kdlm5sv, 5rj0zhws]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 00:29:22 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 00:29:22 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 00:29:22 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@726e068f]]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@726e068f]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@726e068f]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 00:29:22 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:29:22 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:29:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 00:29:22 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 00:34:52 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 26156 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 00:34:52 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 00:34:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 00:34:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 00:34:53 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 00:34:53 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 132 ms. Found 9 JPA repository interfaces.
2026-02-06 00:34:55 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 00:34:55 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 00:34:55 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 00:34:55 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 00:34:55 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3182 ms
2026-02-06 00:34:55 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 00:34:55 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 00:34:55 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 00:34:55 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 00:34:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 00:34:56 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23388fd9
2026-02-06 00:34:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 00:34:56 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 00:34:56 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 00:34:57 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 00:34:58 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:34:58 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 00:35:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 00:35:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 00:35:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 00:35:04 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 00:35:05 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 00:35:06 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 00:35:06 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 00:35:06 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 00:35:07 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 00:35:07 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 00:35:07 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 00:35:07 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]]
2026-02-06 00:35:07 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:35:07 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:35:07 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 00:35:07 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 00:35:07 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 16.611 seconds (process running for 17.541)
2026-02-06 00:36:07 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 00:36:20 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 00:36:20 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 00:36:20 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-06 00:36:21 [http-nio-8080-exec-6] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:36:21 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:36:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:36:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770317484096
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:36:24 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/968/4tkie350/websocket
2026-02-06 00:36:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4tkie350]
2026-02-06 00:36:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 00:36:24 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: 4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 00:36:24 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:36:24 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: 4tkie350
2026-02-06 00:36:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-8] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 00:36:24 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTc0ODEsImV4cCI6MTc3MDMyMTA4MX0.1gBoVGD3OHnW1ItKJblA40j2d7chPASHS2jU8j4An6g], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770317484368, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@d0d616d, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@563b6686, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=4tkie350}], simpHeartbeat=[J@343f2260, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@563b6686, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=4tkie350}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:36:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user4tkie350 subscriptionId=sub-0 session=4tkie350 user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:36:24 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user4tkie350 subscriptionId=sub-1 session=4tkie350 user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:36:24 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=4tkie350
2026-02-06 00:36:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=4tkie350
2026-02-06 00:36:24 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4tkie350] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:36:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: 4tkie350
2026-02-06 00:36:24 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 00:36:24 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 00:36:24 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"userId":23,"timestamp":1770317484615,"status":"OFFLINE"}
2026-02-06 00:36:24 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4tkie350
2026-02-06 00:36:24 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770317484368, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@563b6686, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=4tkie350}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@563b6686, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=4tkie350}]
2026-02-06 00:36:31 [http-nio-8080-exec-6] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:36:31 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:36:34 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4tkie350]
2026-02-06 00:37:01 [http-nio-8080-exec-1] WARN  o.s.web.servlet.PageNotFound - No mapping for GET /api/chat/conversations/undefined/unread
2026-02-06 00:37:01 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint GET /api/chat/conversations/undefined/unread.]
2026-02-06 00:37:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:37:44 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770317564073
2026-02-06 00:37:44 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 00:37:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:37:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/399/tuj0c5am/websocket
2026-02-06 00:37:44 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 00:37:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=tuj0c5am]
2026-02-06 00:37:44 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 00:37:44 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: tuj0c5am
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: tuj0c5am
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: tuj0c5am
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:37:44 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: tuj0c5am
2026-02-06 00:37:44 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: tuj0c5am
2026-02-06 00:37:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=tuj0c5am
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=tuj0c5am] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session tuj0c5am
2026-02-06 00:37:44 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: tuj0c5am
2026-02-06 00:37:44 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 00:37:44 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTc0OTEsImV4cCI6MTc3MDMyMTA5MX0.AE7HYjre-PnWzdd--j3x92boY1XqK8cbHJjZDLxjTm4], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770317564203, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@281cab8, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@c462498, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=tuj0c5am}], simpHeartbeat=[J@343f2260, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@c462498, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=tuj0c5am}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:37:44 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 00:37:44 [clientOutboundChannel-4] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session tuj0c5am
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:198)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:171)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:37:44 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"userId":23,"timestamp":1770317564277,"status":"OFFLINE"}
2026-02-06 00:37:44 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=tuj0c5am
2026-02-06 00:37:44 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770317564203, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@c462498, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=tuj0c5am}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@c462498, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=tuj0c5am}]
2026-02-06 00:37:54 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [tuj0c5am]
2026-02-06 00:38:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:38:45 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770317625626
2026-02-06 00:38:45 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 00:38:45 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 00:38:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:38:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/585/j5onzwrp/websocket
2026-02-06 00:38:45 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 00:38:45 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=j5onzwrp]
2026-02-06 00:38:45 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: j5onzwrp
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: j5onzwrp
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: j5onzwrp
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:38:45 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: j5onzwrp
2026-02-06 00:38:45 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=j5onzwrp
2026-02-06 00:38:45 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: j5onzwrp
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=j5onzwrp] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session j5onzwrp
2026-02-06 00:38:45 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: j5onzwrp
2026-02-06 00:38:45 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 00:38:45 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTc0OTEsImV4cCI6MTc3MDMyMTA5MX0.AE7HYjre-PnWzdd--j3x92boY1XqK8cbHJjZDLxjTm4], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770317625716, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@4d5cbcc4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@439b4b1f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=j5onzwrp}], simpHeartbeat=[J@343f2260, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@439b4b1f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=j5onzwrp}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:38:45 [clientOutboundChannel-6] DEBUG o.s.w.s.m.StompSubProtocolHandler - Failed to send WebSocket message to client in session j5onzwrp
java.lang.IllegalStateException: Cannot send a message when session is closed
	at org.springframework.util.Assert.state(Assert.java:79)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.sendMessage(AbstractSockJsSession.java:144)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.tryFlushMessageBuffer(ConcurrentWebSocketSessionDecorator.java:198)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.sendMessage(ConcurrentWebSocketSessionDecorator.java:171)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.sendToClient(StompSubProtocolHandler.java:529)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:516)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:38:45 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 00:38:45 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"userId":23,"timestamp":1770317625749,"status":"OFFLINE"}
2026-02-06 00:38:45 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=j5onzwrp
2026-02-06 00:38:45 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770317625716, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@439b4b1f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=j5onzwrp}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@439b4b1f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=j5onzwrp}]
2026-02-06 00:38:54 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [j5onzwrp]
2026-02-06 00:39:54 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 00:40:13 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 00:40:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:40:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770317734714
2026-02-06 00:40:34 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 00:40:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 00:40:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:40:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/094/jyzh2cju/websocket
2026-02-06 00:40:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 00:40:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jyzh2cju]
2026-02-06 00:40:34 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: jyzh2cju
2026-02-06 00:40:34 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: jyzh2cju
2026-02-06 00:40:34 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: jyzh2cju
2026-02-06 00:40:34 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 00:40:34 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 00:40:34 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:40:34 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: jyzh2cju
2026-02-06 00:40:34 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: jyzh2cju
2026-02-06 00:40:34 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=jyzh2cju
2026-02-06 00:40:34 [clientOutboundChannel-8] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTc3MjksImV4cCI6MTc3MDMyMTMyOX0.FpTBopGsRmyCnaVy4tZqh0BAxHJ0xiXPiXQ9ByL_slw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770317734803, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@6703243c, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@69c4c6ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jyzh2cju}], simpHeartbeat=[J@343f2260, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@69c4c6ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jyzh2cju}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:40:34 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userjyzh2cju subscriptionId=sub-0 session=jyzh2cju user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:40:34 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userjyzh2cju subscriptionId=sub-1 session=jyzh2cju user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:40:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jyzh2cju] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:40:56 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jyzh2cju
2026-02-06 00:40:56 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: jyzh2cju
2026-02-06 00:40:56 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 00:40:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 00:40:56 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"userId":31,"timestamp":1770317756576,"status":"OFFLINE"}
2026-02-06 00:40:56 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jyzh2cju
2026-02-06 00:40:56 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770317734803, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@69c4c6ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jyzh2cju}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@69c4c6ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jyzh2cju}]
2026-02-06 00:41:04 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [jyzh2cju]
2026-02-06 00:41:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:41:11 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770317771733
2026-02-06 00:41:11 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 00:41:11 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 100)
2026-02-06 00:41:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 00:41:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 00:41:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 00:41:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 00:41:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 00:41:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/739/5yclb4a3/websocket
2026-02-06 00:41:11 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5yclb4a3]
2026-02-06 00:41:11 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5yclb4a3
2026-02-06 00:41:11 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 5yclb4a3
2026-02-06 00:41:11 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: 5yclb4a3
2026-02-06 00:41:11 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 00:41:11 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 00:41:11 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:41:11 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: 5yclb4a3
2026-02-06 00:41:11 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 5yclb4a3
2026-02-06 00:41:11 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=5yclb4a3
2026-02-06 00:41:11 [clientOutboundChannel-10] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxNzc2MiwiZXhwIjoxNzcwMzIxMzYyfQ.yKXmp_ihzNe6YgiFBvUliVjRJ-1XmD15zajTCtpxXdg], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770317771821, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@4e6590ce, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@40a26772, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5yclb4a3}], simpHeartbeat=[J@343f2260, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@40a26772, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5yclb4a3}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:41:11 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user5yclb4a3 subscriptionId=sub-0 session=5yclb4a3 user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:41:11 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user5yclb4a3 subscriptionId=sub-1 session=5yclb4a3 user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:41:29 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 100)
2026-02-06 00:41:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 00:41:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 00:41:35 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 00:41:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 00:41:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 00:42:27 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=5yclb4a3
2026-02-06 00:42:27 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=5yclb4a3
2026-02-06 00:42:27 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=5yclb4a3
2026-02-06 00:42:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5yclb4a3] closed with CloseStatus[code=1000, reason=null]
2026-02-06 00:42:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5yclb4a3
2026-02-06 00:42:27 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: 5yclb4a3
2026-02-06 00:42:27 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 00:42:27 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 00:42:27 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"userId":1,"timestamp":1770317847253,"status":"OFFLINE"}
2026-02-06 00:42:27 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5yclb4a3
2026-02-06 00:42:27 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770317771821, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@40a26772, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5yclb4a3}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@40a26772, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5yclb4a3}]
2026-02-06 00:42:34 [MessageBroker-13] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5yclb4a3]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 00:42:47 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 00:42:47 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 00:42:47 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 00:42:47 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:42:47 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:42:47 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 00:42:47 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 00:58:48 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 8304 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 00:58:48 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 00:58:48 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 00:58:48 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 00:58:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 00:58:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 335 ms. Found 9 JPA repository interfaces.
2026-02-06 00:58:53 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 00:58:53 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 00:58:53 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 00:58:53 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 00:58:53 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4609 ms
2026-02-06 00:58:53 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 00:58:54 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 00:58:54 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 00:58:54 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 00:58:55 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 00:58:55 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@312e549b
2026-02-06 00:58:55 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 00:58:55 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 00:58:55 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 00:58:57 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 00:58:58 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:58:58 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 00:59:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 00:59:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 00:59:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 00:59:04 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 00:59:04 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 00:59:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 00:59:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 00:59:04 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 00:59:05 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 00:59:05 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 00:59:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26268bd7]
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26268bd7]
2026-02-06 00:59:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26268bd7]]
2026-02-06 00:59:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:59:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:59:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 00:59:05 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 00:59:05 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 18.299 seconds (process running for 19.001)
2026-02-06 00:59:07 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 00:59:07 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 00:59:07 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 00:59:07 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 00:59:07 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 00:59:07 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26268bd7]]
2026-02-06 00:59:07 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26268bd7]
2026-02-06 00:59:07 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@26268bd7]
2026-02-06 00:59:07 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 00:59:07 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:59:07 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:59:07 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:59:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 00:59:07 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 00:59:33 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 4580 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 00:59:33 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 00:59:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 00:59:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 00:59:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 00:59:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 9 JPA repository interfaces.
2026-02-06 00:59:35 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 00:59:35 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 00:59:35 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 00:59:35 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 00:59:35 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1648 ms
2026-02-06 00:59:35 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 00:59:35 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 00:59:35 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 00:59:35 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 00:59:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 00:59:35 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@9362010
2026-02-06 00:59:35 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 00:59:35 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 00:59:35 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 00:59:36 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 00:59:37 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 00:59:37 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 00:59:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 00:59:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 00:59:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 00:59:41 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 00:59:41 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 00:59:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 00:59:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 00:59:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 00:59:41 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 00:59:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff714c7]
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff714c7]
2026-02-06 00:59:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff714c7]]
2026-02-06 00:59:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:59:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 00:59:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 00:59:41 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 00:59:41 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 9.162 seconds (process running for 9.746)
2026-02-06 00:59:53 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 00:59:53 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 00:59:53 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-06 00:59:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 00:59:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770318896133
2026-02-06 00:59:56 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 00:59:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/245/g5fowmvb/websocket
2026-02-06 00:59:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 00:59:56 [http-nio-8080-exec-7] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=g5fowmvb]
2026-02-06 00:59:56 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: g5fowmvb
2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: g5fowmvb
2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: g5fowmvb
2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 00:59:56 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 00:59:56 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: g5fowmvb
2026-02-06 00:59:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=g5fowmvb
2026-02-06 00:59:56 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: g5fowmvb
2026-02-06 00:59:56 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTg4OTMsImV4cCI6MTc3MDMyMjQ5M30.5oSRwzna1FuKkab8dUbSVh2WkdhRyKpmS3Z5NEweJp0], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770318896337, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@637631d8, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@742c3daf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g5fowmvb}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@742c3daf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g5fowmvb}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 00:59:56 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userg5fowmvb subscriptionId=sub-0 session=g5fowmvb user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 00:59:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userg5fowmvb subscriptionId=sub-1 session=g5fowmvb user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:00:31 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=g5fowmvb
2026-02-06 01:00:32 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=g5fowmvb
2026-02-06 01:00:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=g5fowmvb
2026-02-06 01:00:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=g5fowmvb] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:00:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session g5fowmvb
2026-02-06 01:00:32 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: g5fowmvb
2026-02-06 01:00:32 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 01:00:32 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 01:00:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:00:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770318932051
2026-02-06 01:00:32 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 01:00:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:00:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/284/xqxyxolv/websocket
2026-02-06 01:00:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 01:00:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xqxyxolv]
2026-02-06 01:00:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 01:00:32 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: xqxyxolv
2026-02-06 01:00:32 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: xqxyxolv
2026-02-06 01:00:32 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: xqxyxolv
2026-02-06 01:00:32 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 01:00:32 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 01:00:32 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:00:32 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: xqxyxolv
2026-02-06 01:00:32 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=xqxyxolv
2026-02-06 01:00:32 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: xqxyxolv
2026-02-06 01:00:32 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 01:00:32 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTg4OTMsImV4cCI6MTc3MDMyMjQ5M30.5oSRwzna1FuKkab8dUbSVh2WkdhRyKpmS3Z5NEweJp0], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770318932231, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@906902f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7c16f7f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xqxyxolv}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7c16f7f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xqxyxolv}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:00:32 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 01:00:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxqxyxolv subscriptionId=sub-0 session=xqxyxolv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:00:32 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxqxyxolv subscriptionId=sub-1 session=xqxyxolv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:00:32 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 01:00:32 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770318932328,"userId":31}
2026-02-06 01:00:32 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=g5fowmvb
2026-02-06 01:00:32 [clientOutboundChannel-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770318896337, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@742c3daf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g5fowmvb}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@742c3daf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=g5fowmvb}]
2026-02-06 01:00:35 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxqxyxolv subscriptionId=sub-2 session=xqxyxolv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:00:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxqxyxolv subscriptionId=sub-3 session=xqxyxolv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:00:41 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [g5fowmvb]
2026-02-06 01:00:41 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 39], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 5], sockJsScheduler[pool size = 14, active threads = 1, queued tasks = 1, completed tasks = 10]
2026-02-06 01:03:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xqxyxolv] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:03:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xqxyxolv
2026-02-06 01:03:27 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: xqxyxolv
2026-02-06 01:03:27 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 01:03:27 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 01:03:28 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770319108034,"userId":31}
2026-02-06 01:03:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xqxyxolv
2026-02-06 01:03:28 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770318932231, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7c16f7f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xqxyxolv}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7c16f7f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xqxyxolv}]
2026-02-06 01:03:36 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xqxyxolv]
2026-02-06 01:04:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:04:21 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 01:04:21 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319161206
2026-02-06 01:04:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 01:04:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 01:04:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:04:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/327/vwjrxa2t/websocket
2026-02-06 01:04:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vwjrxa2t]
2026-02-06 01:04:21 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: vwjrxa2t
2026-02-06 01:04:21 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: vwjrxa2t
2026-02-06 01:04:21 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: vwjrxa2t
2026-02-06 01:04:21 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 01:04:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 01:04:21 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 01:04:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 01:04:21 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 01:04:21 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:04:21 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: vwjrxa2t
2026-02-06 01:04:21 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=vwjrxa2t
2026-02-06 01:04:21 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: vwjrxa2t
2026-02-06 01:04:21 [clientOutboundChannel-11] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTg4OTMsImV4cCI6MTc3MDMyMjQ5M30.5oSRwzna1FuKkab8dUbSVh2WkdhRyKpmS3Z5NEweJp0], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319161328, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@396d055b, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@37aafc06, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vwjrxa2t}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@37aafc06, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vwjrxa2t}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:04:21 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-uservwjrxa2t subscriptionId=sub-0 session=vwjrxa2t user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:04:21 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-uservwjrxa2t subscriptionId=sub-1 session=vwjrxa2t user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:04:28 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 01:04:28 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 01:04:28 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 01:04:36 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=vwjrxa2t
2026-02-06 01:04:36 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=vwjrxa2t
2026-02-06 01:04:36 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=vwjrxa2t
2026-02-06 01:04:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vwjrxa2t] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:04:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vwjrxa2t
2026-02-06 01:04:36 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: vwjrxa2t
2026-02-06 01:04:36 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 01:04:36 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 01:04:36 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770319176614,"userId":31}
2026-02-06 01:04:36 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vwjrxa2t
2026-02-06 01:04:36 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319161328, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@37aafc06, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vwjrxa2t}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@37aafc06, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vwjrxa2t}]
2026-02-06 01:04:36 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 01:04:46 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [vwjrxa2t]
2026-02-06 01:05:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:05:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319219988
2026-02-06 01:05:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:05:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/286/acuwurgw/websocket
2026-02-06 01:05:20 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 01:05:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 01:05:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 01:05:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=acuwurgw]
2026-02-06 01:05:20 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: acuwurgw
2026-02-06 01:05:20 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: acuwurgw
2026-02-06 01:05:20 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: acuwurgw
2026-02-06 01:05:20 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 01:05:20 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 01:05:20 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:05:20 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: acuwurgw
2026-02-06 01:05:20 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=acuwurgw
2026-02-06 01:05:20 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: acuwurgw
2026-02-06 01:05:20 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 01:05:20 [clientOutboundChannel-14] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTg4OTMsImV4cCI6MTc3MDMyMjQ5M30.5oSRwzna1FuKkab8dUbSVh2WkdhRyKpmS3Z5NEweJp0], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319220048, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@28da954f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@261d7e24, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=acuwurgw}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@261d7e24, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=acuwurgw}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:05:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 01:05:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 31
2026-02-06 01:05:20 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useracuwurgw subscriptionId=sub-0 session=acuwurgw user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:05:20 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useracuwurgw subscriptionId=sub-1 session=acuwurgw user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:05:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=acuwurgw] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:05:32 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session acuwurgw
2026-02-06 01:05:32 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: acuwurgw
2026-02-06 01:05:32 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 01:05:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 01:05:32 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770319232437,"userId":31}
2026-02-06 01:05:32 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=acuwurgw
2026-02-06 01:05:32 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319220048, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@261d7e24, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=acuwurgw}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@261d7e24, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=acuwurgw}]
2026-02-06 01:05:41 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [acuwurgw]
2026-02-06 01:05:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:05:42 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319242591
2026-02-06 01:05:42 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:05:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:05:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:05:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:05:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/453/be4afp12/websocket
2026-02-06 01:05:42 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=be4afp12]
2026-02-06 01:05:42 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: be4afp12
2026-02-06 01:05:42 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: be4afp12
2026-02-06 01:05:42 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: be4afp12
2026-02-06 01:05:42 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:05:42 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 01:05:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:05:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:05:42 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 01:05:42 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:05:42 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: be4afp12
2026-02-06 01:05:42 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=be4afp12
2026-02-06 01:05:42 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: be4afp12
2026-02-06 01:05:42 [clientOutboundChannel-16] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTIzNywiZXhwIjoxNzcwMzIyODM3fQ.fB1Zfj9IMvez3aIFttzBR3ihfE6e6ynwAg6b7xbyzGA], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319242653, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@489a847e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@465d631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=be4afp12}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@465d631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=be4afp12}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:05:42 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userbe4afp12 subscriptionId=sub-0 session=be4afp12 user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:05:42 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userbe4afp12 subscriptionId=sub-1 session=be4afp12 user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:05:45 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=be4afp12
2026-02-06 01:05:45 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=be4afp12
2026-02-06 01:05:45 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=be4afp12
2026-02-06 01:05:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=be4afp12] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:05:45 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session be4afp12
2026-02-06 01:05:45 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: be4afp12
2026-02-06 01:05:45 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 01:05:45 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 01:05:45 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770319245575,"userId":1}
2026-02-06 01:05:45 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=be4afp12
2026-02-06 01:05:45 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319242653, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@465d631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=be4afp12}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@465d631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=be4afp12}]
2026-02-06 01:05:51 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [be4afp12]
2026-02-06 01:07:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:07:14 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319334607
2026-02-06 01:07:14 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:07:14 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:07:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:07:14 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:07:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/155/cixkhb2m/websocket
2026-02-06 01:07:14 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cixkhb2m]
2026-02-06 01:07:14 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: cixkhb2m
2026-02-06 01:07:14 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: cixkhb2m
2026-02-06 01:07:14 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: cixkhb2m
2026-02-06 01:07:14 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:07:14 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 01:07:14 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 01:07:14 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:07:14 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: cixkhb2m
2026-02-06 01:07:14 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: cixkhb2m
2026-02-06 01:07:14 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=cixkhb2m
2026-02-06 01:07:14 [clientOutboundChannel-18] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTMzMiwiZXhwIjoxNzcwMzIyOTMyfQ.FSTLXWs2DN-CJn_v0vzx8oK0KqF1JrtWsmKrD3viQ78], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319334703, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@6fc486ba, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61036532, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=cixkhb2m}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61036532, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=cixkhb2m}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:07:14 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usercixkhb2m subscriptionId=sub-0 session=cixkhb2m user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:07:14 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usercixkhb2m subscriptionId=sub-1 session=cixkhb2m user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:07:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cixkhb2m] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:07:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cixkhb2m
2026-02-06 01:07:33 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: cixkhb2m
2026-02-06 01:07:33 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 01:07:33 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 01:07:33 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770319353133,"userId":1}
2026-02-06 01:07:33 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cixkhb2m
2026-02-06 01:07:33 [clientOutboundChannel-19] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319334703, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61036532, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=cixkhb2m}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61036532, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=cixkhb2m}]
2026-02-06 01:07:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:07:38 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319358989
2026-02-06 01:07:39 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:07:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:07:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:07:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/001/ax4x5bmn/websocket
2026-02-06 01:07:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:07:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ax4x5bmn]
2026-02-06 01:07:39 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ax4x5bmn
2026-02-06 01:07:39 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ax4x5bmn
2026-02-06 01:07:39 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: ax4x5bmn
2026-02-06 01:07:39 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:07:39 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:07:39 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:07:39 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: ax4x5bmn
2026-02-06 01:07:39 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=ax4x5bmn
2026-02-06 01:07:39 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ax4x5bmn
2026-02-06 01:07:39 [clientOutboundChannel-20] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTM1NywiZXhwIjoxNzcwMzIyOTU3fQ.5I83fDdEukhCFVPx3oD0WV_DPy2FO3-UHoM_amlS684], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319359070, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@2a3c57d3, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@24fbace4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ax4x5bmn}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@24fbace4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ax4x5bmn}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:07:39 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userax4x5bmn subscriptionId=sub-0 session=ax4x5bmn user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:07:39 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userax4x5bmn subscriptionId=sub-1 session=ax4x5bmn user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:07:39 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:07:39 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:07:39 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:07:41 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [cixkhb2m]
2026-02-06 01:07:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=ax4x5bmn
2026-02-06 01:07:56 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=ax4x5bmn
2026-02-06 01:07:56 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:07:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:07:56 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 6
2026-02-06 01:07:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 6
2026-02-06 01:07:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 3
2026-02-06 01:07:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 3 messages as read in conversation 3
2026-02-06 01:07:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=ax4x5bmn
2026-02-06 01:07:56 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=ax4x5bmn
2026-02-06 01:07:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=ax4x5bmn
2026-02-06 01:07:56 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=ax4x5bmn
2026-02-06 01:07:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=ax4x5bmn
2026-02-06 01:07:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ax4x5bmn] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:07:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ax4x5bmn
2026-02-06 01:07:56 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: ax4x5bmn
2026-02-06 01:07:56 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:07:56 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":3}
2026-02-06 01:07:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:07:56 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770319376739,"userId":6}
2026-02-06 01:07:56 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ax4x5bmn
2026-02-06 01:07:56 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319359070, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@24fbace4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ax4x5bmn}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@24fbace4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ax4x5bmn}]
2026-02-06 01:08:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:08:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319381997
2026-02-06 01:08:02 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:08:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:08:02 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:08:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/046/qxgkoe3w/websocket
2026-02-06 01:08:02 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qxgkoe3w]
2026-02-06 01:08:02 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:08:02 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: qxgkoe3w
2026-02-06 01:08:02 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: qxgkoe3w
2026-02-06 01:08:02 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: qxgkoe3w
2026-02-06 01:08:02 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:08:02 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:08:02 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:08:02 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: qxgkoe3w
2026-02-06 01:08:02 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: qxgkoe3w
2026-02-06 01:08:02 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=qxgkoe3w
2026-02-06 01:08:02 [clientOutboundChannel-19] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTM1NywiZXhwIjoxNzcwMzIyOTU3fQ.5I83fDdEukhCFVPx3oD0WV_DPy2FO3-UHoM_amlS684], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319382127, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@2cdf282e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2218c3c5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qxgkoe3w}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2218c3c5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qxgkoe3w}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:08:02 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userqxgkoe3w subscriptionId=sub-0 session=qxgkoe3w user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:08:02 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userqxgkoe3w subscriptionId=sub-1 session=qxgkoe3w user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:08:02 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:08:02 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:08:02 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:08:06 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ax4x5bmn]
2026-02-06 01:08:25 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=qxgkoe3w
2026-02-06 01:08:25 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=qxgkoe3w
2026-02-06 01:08:25 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=qxgkoe3w
2026-02-06 01:08:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qxgkoe3w] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:08:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qxgkoe3w
2026-02-06 01:08:25 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: qxgkoe3w
2026-02-06 01:08:25 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:08:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:08:25 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770319405137,"userId":6}
2026-02-06 01:08:25 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qxgkoe3w
2026-02-06 01:08:25 [clientOutboundChannel-21] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319382127, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2218c3c5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qxgkoe3w}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2218c3c5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qxgkoe3w}]
2026-02-06 01:08:25 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 01:08:31 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [qxgkoe3w]
2026-02-06 01:09:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:09:16 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319456466
2026-02-06 01:09:16 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:09:16 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:09:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:09:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/572/3jzeg21f/websocket
2026-02-06 01:09:16 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:09:16 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3jzeg21f]
2026-02-06 01:09:16 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 3jzeg21f
2026-02-06 01:09:16 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 3jzeg21f
2026-02-06 01:09:16 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: 3jzeg21f
2026-02-06 01:09:16 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:09:16 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:09:16 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:09:16 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: 3jzeg21f
2026-02-06 01:09:16 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 3jzeg21f
2026-02-06 01:09:16 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=3jzeg21f
2026-02-06 01:09:16 [clientOutboundChannel-22] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTM1NywiZXhwIjoxNzcwMzIyOTU3fQ.5I83fDdEukhCFVPx3oD0WV_DPy2FO3-UHoM_amlS684], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319456536, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@6851b6a0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@669655da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3jzeg21f}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@669655da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3jzeg21f}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:09:16 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:09:16 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:09:16 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user3jzeg21f subscriptionId=sub-0 session=3jzeg21f user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:09:16 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user3jzeg21f subscriptionId=sub-1 session=3jzeg21f user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:09:16 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:09:19 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=3jzeg21f
2026-02-06 01:09:19 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=3jzeg21f
2026-02-06 01:09:19 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 6
2026-02-06 01:09:19 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:09:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:09:19 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 6
2026-02-06 01:09:19 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 3
2026-02-06 01:09:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:09:19 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":0}
2026-02-06 01:09:19 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=3jzeg21f
2026-02-06 01:09:19 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=3jzeg21f
2026-02-06 01:09:19 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=3jzeg21f
2026-02-06 01:09:19 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=3jzeg21f
2026-02-06 01:09:19 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=3jzeg21f
2026-02-06 01:09:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3jzeg21f] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:09:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3jzeg21f
2026-02-06 01:09:19 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: 3jzeg21f
2026-02-06 01:09:19 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:09:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:09:19 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770319459581,"userId":6}
2026-02-06 01:09:19 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3jzeg21f
2026-02-06 01:09:19 [clientOutboundChannel-20] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319456536, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@669655da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3jzeg21f}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@669655da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3jzeg21f}]
2026-02-06 01:09:26 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [3jzeg21f]
2026-02-06 01:09:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:09:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319498625
2026-02-06 01:09:58 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:09:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:09:58 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:09:58 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/744/wxppu55k/websocket
2026-02-06 01:09:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:09:58 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wxppu55k]
2026-02-06 01:09:58 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: wxppu55k
2026-02-06 01:09:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: wxppu55k
2026-02-06 01:09:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: hari@gmail.com - Session: wxppu55k
2026-02-06 01:09:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: hari@gmail.com
2026-02-06 01:09:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: hari@gmail.com
2026-02-06 01:09:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:09:58 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: hari@gmail.com (ID: 27), Session: wxppu55k
2026-02-06 01:09:58 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=hari@gmail.com session=wxppu55k
2026-02-06 01:09:58 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: wxppu55k
2026-02-06 01:09:58 [clientOutboundChannel-24] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjcsInN1YiI6ImhhcmlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzE5NDk3LCJleHAiOjE3NzAzMjMwOTd9.Yohu_ghkL0Gn3LOIXhOfZovVRcxBD2FRTkV3psPMWkI], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319498676, userId=27, username=hari@gmail.com}, simpHeartbeat=[J@78f4dc34, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@76333d5a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxppu55k}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@76333d5a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxppu55k}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:09:58 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userwxppu55k subscriptionId=sub-0 session=wxppu55k user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:09:58 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:09:58 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userwxppu55k subscriptionId=sub-1 session=wxppu55k user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:09:58 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:09:58 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:10:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wxppu55k] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:10:07 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wxppu55k
2026-02-06 01:10:07 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: hari@gmail.com (ID: 27), Session: wxppu55k
2026-02-06 01:10:07 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 27 went OFFLINE (last session closed)
2026-02-06 01:10:07 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 27 status to OFFLINE
2026-02-06 01:10:08 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/27 session=null payload={"status":"OFFLINE","timestamp":1770319508020,"userId":27}
2026-02-06 01:10:08 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wxppu55k
2026-02-06 01:10:08 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319498676, userId=27, username=hari@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@76333d5a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxppu55k}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@76333d5a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxppu55k}]
2026-02-06 01:10:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:10:14 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319514957
2026-02-06 01:10:14 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 01:10:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:10:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/458/emtrvj2f/websocket
2026-02-06 01:10:14 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 01:10:14 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 01:10:14 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=emtrvj2f]
2026-02-06 01:10:15 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: emtrvj2f
2026-02-06 01:10:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: emtrvj2f
2026-02-06 01:10:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: emtrvj2f
2026-02-06 01:10:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 01:10:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 01:10:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:10:15 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: emtrvj2f
2026-02-06 01:10:15 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: emtrvj2f
2026-02-06 01:10:15 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=emtrvj2f
2026-02-06 01:10:15 [clientOutboundChannel-23] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMTk1MTEsImV4cCI6MTc3MDMyMzExMX0.AxFjBbnRF0YtJl6uaGtEWewwd0_-9FRXTk4vhxZBrxI], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319515040, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@f338b6e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f464f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=emtrvj2f}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f464f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=emtrvj2f}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:10:15 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useremtrvj2f subscriptionId=sub-0 session=emtrvj2f user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:10:15 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useremtrvj2f subscriptionId=sub-1 session=emtrvj2f user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:10:15 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 01:10:15 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 01:10:15 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 01:10:16 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wxppu55k]
2026-02-06 01:10:17 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=emtrvj2f
2026-02-06 01:10:17 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=emtrvj2f
2026-02-06 01:10:17 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=emtrvj2f
2026-02-06 01:10:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=emtrvj2f] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:10:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session emtrvj2f
2026-02-06 01:10:17 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: emtrvj2f
2026-02-06 01:10:17 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 01:10:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 01:10:17 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"status":"OFFLINE","timestamp":1770319517228,"userId":23}
2026-02-06 01:10:17 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=emtrvj2f
2026-02-06 01:10:17 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319515040, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f464f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=emtrvj2f}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f464f8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=emtrvj2f}]
2026-02-06 01:10:25 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 01:10:26 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [emtrvj2f]
2026-02-06 01:10:38 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 01:10:50 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 01:12:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:12:00 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:12:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319620722
2026-02-06 01:12:00 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:12:00 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:12:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:12:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/626/eoncrjqt/websocket
2026-02-06 01:12:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=eoncrjqt]
2026-02-06 01:12:00 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:12:00 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: eoncrjqt
2026-02-06 01:12:00 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: eoncrjqt
2026-02-06 01:12:00 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:12:00 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: eoncrjqt
2026-02-06 01:12:00 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:12:00 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 01:12:00 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 01:12:00 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:12:00 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: eoncrjqt
2026-02-06 01:12:00 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: eoncrjqt
2026-02-06 01:12:00 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=eoncrjqt
2026-02-06 01:12:00 [clientOutboundChannel-25] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTYxOCwiZXhwIjoxNzcwMzIzMjE4fQ.2fOl0TCjvLOjsaH9FnjYoFYjxQtgPI9omoTWGYiH3Nc], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319620783, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@301fad18, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3ed8556b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=eoncrjqt}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3ed8556b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=eoncrjqt}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:12:00 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usereoncrjqt subscriptionId=sub-0 session=eoncrjqt user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:12:00 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usereoncrjqt subscriptionId=sub-1 session=eoncrjqt user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:12:11 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:12:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:12:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:13:00 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:13:00 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:13:00 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:13:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=eoncrjqt] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:13:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session eoncrjqt
2026-02-06 01:13:26 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: eoncrjqt
2026-02-06 01:13:26 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 01:13:26 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 01:13:26 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770319706340,"userId":1}
2026-02-06 01:13:26 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=eoncrjqt
2026-02-06 01:13:26 [clientOutboundChannel-28] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319620783, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3ed8556b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=eoncrjqt}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3ed8556b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=eoncrjqt}]
2026-02-06 01:13:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:13:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319715508
2026-02-06 01:13:35 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:13:35 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:13:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:13:35 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:13:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/870/wab4icb4/websocket
2026-02-06 01:13:35 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wab4icb4]
2026-02-06 01:13:35 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: wab4icb4
2026-02-06 01:13:35 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: wab4icb4
2026-02-06 01:13:35 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: wab4icb4
2026-02-06 01:13:35 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:13:35 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:13:35 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:13:35 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:13:35 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:13:35 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:13:35 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: wab4icb4
2026-02-06 01:13:35 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=wab4icb4
2026-02-06 01:13:35 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: wab4icb4
2026-02-06 01:13:35 [clientOutboundChannel-29] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTcxNCwiZXhwIjoxNzcwMzIzMzE0fQ.iP4Aks34R_jeFGoBzfVKp0FG6rRJT5EoootZyHYxp2E], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319715592, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@54607d8b, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5aa78977, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wab4icb4}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5aa78977, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wab4icb4}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:13:35 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userwab4icb4 subscriptionId=sub-0 session=wab4icb4 user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:13:35 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userwab4icb4 subscriptionId=sub-1 session=wab4icb4 user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:13:36 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [eoncrjqt]
2026-02-06 01:14:39 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=wab4icb4
2026-02-06 01:14:39 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=wab4icb4
2026-02-06 01:14:39 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:14:39 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 6
2026-02-06 01:14:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:14:39 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 6
2026-02-06 01:14:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:14:39 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 3
2026-02-06 01:14:39 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":0}
2026-02-06 01:14:39 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=wab4icb4
2026-02-06 01:14:39 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=wab4icb4
2026-02-06 01:14:39 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=wab4icb4
2026-02-06 01:14:39 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=wab4icb4
2026-02-06 01:14:39 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=wab4icb4
2026-02-06 01:14:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wab4icb4] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:14:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wab4icb4
2026-02-06 01:14:39 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: wab4icb4
2026-02-06 01:14:39 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:14:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:14:39 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770319779269,"userId":6}
2026-02-06 01:14:39 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wab4icb4
2026-02-06 01:14:39 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319715592, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5aa78977, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wab4icb4}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5aa78977, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wab4icb4}]
2026-02-06 01:14:46 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wab4icb4]
2026-02-06 01:15:25 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:15:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:15:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:15:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:15:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319825898
2026-02-06 01:15:26 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:15:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:15:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:15:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:15:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/880/4y3wgb3s/websocket
2026-02-06 01:15:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4y3wgb3s]
2026-02-06 01:15:27 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 4y3wgb3s
2026-02-06 01:15:27 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 4y3wgb3s
2026-02-06 01:15:27 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: 4y3wgb3s
2026-02-06 01:15:27 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:15:27 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:15:27 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:15:27 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: 4y3wgb3s
2026-02-06 01:15:27 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=4y3wgb3s
2026-02-06 01:15:27 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 4y3wgb3s
2026-02-06 01:15:27 [clientOutboundChannel-33] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTcxNCwiZXhwIjoxNzcwMzIzMzE0fQ.iP4Aks34R_jeFGoBzfVKp0FG6rRJT5EoootZyHYxp2E], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319827119, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@2f52d192, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@21952a08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4y3wgb3s}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@21952a08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4y3wgb3s}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:15:27 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user4y3wgb3s subscriptionId=sub-0 session=4y3wgb3s user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:15:27 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user4y3wgb3s subscriptionId=sub-1 session=4y3wgb3s user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:15:34 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:15:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:15:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:15:40 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:15:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 6
2026-02-06 01:15:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:15:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 6
2026-02-06 01:15:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:15:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 3
2026-02-06 01:15:40 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=4y3wgb3s
2026-02-06 01:15:40 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":0}
2026-02-06 01:15:40 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=4y3wgb3s
2026-02-06 01:15:40 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=4y3wgb3s
2026-02-06 01:15:40 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=4y3wgb3s
2026-02-06 01:15:40 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=4y3wgb3s
2026-02-06 01:15:40 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=4y3wgb3s
2026-02-06 01:15:40 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=4y3wgb3s
2026-02-06 01:15:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4y3wgb3s] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:15:40 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4y3wgb3s
2026-02-06 01:15:40 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: 4y3wgb3s
2026-02-06 01:15:40 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:15:40 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:15:40 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770319840997,"userId":6}
2026-02-06 01:15:40 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4y3wgb3s
2026-02-06 01:15:40 [clientOutboundChannel-35] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319827119, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@21952a08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4y3wgb3s}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@21952a08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4y3wgb3s}]
2026-02-06 01:15:46 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4y3wgb3s]
2026-02-06 01:16:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:16:20 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770319880628
2026-02-06 01:16:20 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:16:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:16:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:16:21 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:16:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:16:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:16:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 01:16:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/523/wvpujaqw/websocket
2026-02-06 01:16:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wvpujaqw]
2026-02-06 01:16:21 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: wvpujaqw
2026-02-06 01:16:21 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: wvpujaqw
2026-02-06 01:16:21 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: wvpujaqw
2026-02-06 01:16:21 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:16:21 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:16:21 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:16:21 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: wvpujaqw
2026-02-06 01:16:21 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=wvpujaqw
2026-02-06 01:16:21 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: wvpujaqw
2026-02-06 01:16:21 [clientOutboundChannel-36] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMxOTcxNCwiZXhwIjoxNzcwMzIzMzE0fQ.iP4Aks34R_jeFGoBzfVKp0FG6rRJT5EoootZyHYxp2E], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770319881862, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@6a85a18c, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@644252ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wvpujaqw}], simpHeartbeat=[J@2da609ac, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@644252ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wvpujaqw}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:16:21 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userwvpujaqw subscriptionId=sub-0 session=wvpujaqw user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:16:21 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userwvpujaqw subscriptionId=sub-1 session=wvpujaqw user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:19:53 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=wvpujaqw
2026-02-06 01:19:53 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=wvpujaqw
2026-02-06 01:19:53 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=wvpujaqw
2026-02-06 01:19:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wvpujaqw] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:19:53 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wvpujaqw
2026-02-06 01:19:53 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: wvpujaqw
2026-02-06 01:19:53 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:19:53 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:19:53 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:19:53 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:19:53 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:19:53 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770320093068,"userId":6}
2026-02-06 01:19:53 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wvpujaqw
2026-02-06 01:19:53 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770319881862, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@644252ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wvpujaqw}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@644252ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wvpujaqw}]
2026-02-06 01:20:01 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wvpujaqw]
2026-02-06 01:20:10 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:20:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:20:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:20:12 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:20:12 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 6
2026-02-06 01:20:12 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:20:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 6
2026-02-06 01:20:12 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:20:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 3
2026-02-06 01:20:12 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":0}
2026-02-06 01:20:36 [http-nio-8080-exec-5] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /api/chat/send
2026-02-06 01:20:36 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint POST /api/chat/send.]
2026-02-06 01:20:41 [http-nio-8080-exec-7] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /api/chat/send
2026-02-06 01:20:41 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint POST /api/chat/send.]
2026-02-06 01:22:12 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:22:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:22:13 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:22:53 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:22:53 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:22:53 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:23:36 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 01:23:37 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 01:23:37 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 01:23:37 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 01:23:37 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 01:23:37 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff714c7]]
2026-02-06 01:23:37 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff714c7]
2026-02-06 01:23:37 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@ff714c7]
2026-02-06 01:23:37 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 01:23:37 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 01:23:37 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 01:23:37 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 01:23:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 01:23:37 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 01:23:49 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 13068 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 01:23:49 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 01:23:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 01:23:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 01:23:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 01:23:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 95 ms. Found 9 JPA repository interfaces.
2026-02-06 01:23:51 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 01:23:51 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 01:23:51 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 01:23:51 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 01:23:51 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2090 ms
2026-02-06 01:23:51 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 01:23:51 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 01:23:51 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 01:23:51 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 01:23:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 01:23:52 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@23388fd9
2026-02-06 01:23:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 01:23:52 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 01:23:52 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 01:23:53 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 01:23:53 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 01:23:54 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 01:23:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 01:23:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 01:23:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 01:23:58 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 01:23:58 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 01:23:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 01:23:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 01:23:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 01:23:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 01:23:59 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 01:23:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 01:23:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 01:23:59 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 01:23:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 01:23:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 01:23:59 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]]
2026-02-06 01:23:59 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 01:23:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 01:23:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 01:23:59 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 01:23:59 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 01:23:59 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 10.504 seconds (process running for 11.242)
2026-02-06 01:24:11 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 01:24:11 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 01:24:11 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-06 01:24:13 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:24:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:24:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:24:13 [http-nio-8080-exec-8] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 01:24:34 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:24:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:24:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:24:59 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 01:25:00 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:25:00 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:25:00 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:25:46 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:25:46 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:25:46 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:26:06 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:26:06 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:26:07 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:26:13 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:26:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:26:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:28:13 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:28:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:28:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:31:58 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:31:58 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:31:58 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:31:58 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:31:58 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770320818522
2026-02-06 01:31:59 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:31:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:31:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:31:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:31:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/766/yqydlwcx/websocket
2026-02-06 01:31:59 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=yqydlwcx]
2026-02-06 01:31:59 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: yqydlwcx
2026-02-06 01:31:59 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: yqydlwcx
2026-02-06 01:31:59 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: yqydlwcx
2026-02-06 01:31:59 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:31:59 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:31:59 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:31:59 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: yqydlwcx
2026-02-06 01:31:59 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=yqydlwcx
2026-02-06 01:31:59 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: yqydlwcx
2026-02-06 01:31:59 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMDM5NCwiZXhwIjoxNzcwMzIzOTk0fQ.e51a_cnQ_FVsPaMp4IPjRG1U6kIVACDVZ-JI-SYcqrs], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770320819813, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@19c03c49, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3d5c5ecb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=yqydlwcx}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3d5c5ecb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=yqydlwcx}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:31:59 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useryqydlwcx subscriptionId=sub-0 session=yqydlwcx user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:31:59 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useryqydlwcx subscriptionId=sub-1 session=yqydlwcx user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:32:07 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=yqydlwcx
2026-02-06 01:32:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=yqydlwcx
2026-02-06 01:32:07 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:32:07 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 6
2026-02-06 01:32:07 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:32:07 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 6
2026-02-06 01:32:07 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 3
2026-02-06 01:32:07 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:32:07 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":0}
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:12 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:18 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:18 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:18 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:18 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:18 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:20 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=yqydlwcx, lookupDestination='/chat.stopTyping'
2026-02-06 01:32:20 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:32:20 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":false,"timestamp":1770320840735}
2026-02-06 01:32:20 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:24 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:24 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:24 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:24 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:25 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:25 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:26 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:26 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:28 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=yqydlwcx, lookupDestination='/chat.typing'
2026-02-06 01:32:28 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:32:28 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:32:28 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:29 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=yqydlwcx, lookupDestination='/chat.sendMessage'
2026-02-06 01:32:29 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=yqydlwcx, lookupDestination='/chat.stopTyping'
2026-02-06 01:32:29 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:32:29 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 01:32:29 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":false,"timestamp":1770320849977}
2026-02-06 01:32:29 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:30 [clientInboundChannel-4] INFO  c.e.e.controller.ChatController -  WebSocket message from ram@gmail.com (6) to 27
2026-02-06 01:32:30 [clientInboundChannel-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 6 to user 27
2026-02-06 01:32:30 [clientInboundChannel-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=17
2026-02-06 01:32:30 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/3 session=null payload={"id":17,"conversationId":3,"senderId":6,"senderName":"Ram Chaudhary","receiverI...(truncated)
2026-02-06 01:32:30 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:30 [clientInboundChannel-4] INFO  c.e.e.controller.ChatController -  Message 17 sent successfully
2026-02-06 01:32:30 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=yqydlwcx payload={"id":17,"conversationId":3,"senderId":6,"senderName":"Ram Chaudhary","receiverI...(truncated)
2026-02-06 01:32:30 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:32:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:32:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:32:30 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=yqydlwcx, lookupDestination='/chat.stopTyping'
2026-02-06 01:32:30 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:32:30 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":false,"timestamp":1770320850825}
2026-02-06 01:32:30 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:32:30 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:32:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:32:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:32:30 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":0}
2026-02-06 01:32:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=yqydlwcx] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:32:34 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session yqydlwcx
2026-02-06 01:32:34 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: yqydlwcx
2026-02-06 01:32:34 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:32:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:32:34 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770320854871,"userId":6}
2026-02-06 01:32:34 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=yqydlwcx
2026-02-06 01:32:34 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770320819813, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3d5c5ecb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=yqydlwcx}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3d5c5ecb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=yqydlwcx}]
2026-02-06 01:32:44 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [yqydlwcx]
2026-02-06 01:32:52 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:32:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:32:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:33:36 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:33:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:33:36 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:33:36 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770320916420
2026-02-06 01:33:36 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:33:37 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:33:37 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:33:37 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:33:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:33:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/689/4vy5zuo3/websocket
2026-02-06 01:33:37 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4vy5zuo3]
2026-02-06 01:33:37 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 4vy5zuo3
2026-02-06 01:33:37 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 4vy5zuo3
2026-02-06 01:33:37 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: hari@gmail.com - Session: 4vy5zuo3
2026-02-06 01:33:37 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: hari@gmail.com
2026-02-06 01:33:37 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: hari@gmail.com
2026-02-06 01:33:37 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:33:37 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: hari@gmail.com (ID: 27), Session: 4vy5zuo3
2026-02-06 01:33:37 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 4vy5zuo3
2026-02-06 01:33:37 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=hari@gmail.com session=4vy5zuo3
2026-02-06 01:33:37 [clientOutboundChannel-5] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjcsInN1YiI6ImhhcmlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzIwODY5LCJleHAiOjE3NzAzMjQ0Njl9.7uXDmirsPbHuYSgSyJGn9OCz4F3ATO3S0_6FP9Uzdf4], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770320917662, userId=27, username=hari@gmail.com}, simpHeartbeat=[J@22f4f9b1, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c33139f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4vy5zuo3}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c33139f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4vy5zuo3}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:33:37 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user4vy5zuo3 subscriptionId=sub-0 session=4vy5zuo3 user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:33:37 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user4vy5zuo3 subscriptionId=sub-1 session=4vy5zuo3 user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:33:40 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=4vy5zuo3
2026-02-06 01:33:40 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=4vy5zuo3
2026-02-06 01:33:40 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 27
2026-02-06 01:33:40 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 27
2026-02-06 01:33:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 27
2026-02-06 01:33:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 27
2026-02-06 01:33:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 3
2026-02-06 01:33:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 3
2026-02-06 01:33:40 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":27,"count":1}
2026-02-06 01:33:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=4vy5zuo3
2026-02-06 01:33:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/4 id=sub-4 session=4vy5zuo3
2026-02-06 01:33:56 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/4 id=sub-5 session=4vy5zuo3
2026-02-06 01:33:56 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 4 by user 27
2026-02-06 01:33:56 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 4 by user 27
2026-02-06 01:33:56 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 27
2026-02-06 01:33:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 27
2026-02-06 01:33:56 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 4
2026-02-06 01:33:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 4
2026-02-06 01:33:56 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":27,"count":1}
2026-02-06 01:34:14 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=4vy5zuo3
2026-02-06 01:34:14 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/4 id=sub-6 session=4vy5zuo3
2026-02-06 01:34:14 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/4 id=sub-7 session=4vy5zuo3
2026-02-06 01:34:14 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 4 by user 27
2026-02-06 01:34:14 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 27
2026-02-06 01:34:14 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 4 by user 27
2026-02-06 01:34:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 27
2026-02-06 01:34:14 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 4
2026-02-06 01:34:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 4
2026-02-06 01:34:14 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":27,"count":0}
2026-02-06 01:34:15 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=4vy5zuo3
2026-02-06 01:34:15 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 27
2026-02-06 01:34:15 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 27
2026-02-06 01:34:15 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 27
2026-02-06 01:34:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 27
2026-02-06 01:34:15 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-8 session=4vy5zuo3
2026-02-06 01:34:15 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-9 session=4vy5zuo3
2026-02-06 01:34:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 3
2026-02-06 01:34:15 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:34:15 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":27,"count":0}
2026-02-06 01:34:19 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-8 session=4vy5zuo3
2026-02-06 01:34:19 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/4 id=sub-11 session=4vy5zuo3
2026-02-06 01:34:19 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/4 id=sub-10 session=4vy5zuo3
2026-02-06 01:34:19 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 27
2026-02-06 01:34:19 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 4 by user 27
2026-02-06 01:34:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 27
2026-02-06 01:34:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 4 by user 27
2026-02-06 01:34:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 4
2026-02-06 01:34:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 4
2026-02-06 01:34:19 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":27,"count":0}
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:39 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:40 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=4vy5zuo3, lookupDestination='/chat.stopTyping'
2026-02-06 01:34:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=4vy5zuo3, lookupDestination='/chat.sendMessage'
2026-02-06 01:34:40 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:34:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 01:34:40 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":false,"timestamp":1770320980563}
2026-02-06 01:34:40 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:40 [clientInboundChannel-5] INFO  c.e.e.controller.ChatController -  WebSocket message from hari@gmail.com (27) to 23
2026-02-06 01:34:40 [clientInboundChannel-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 27 to user 23
2026-02-06 01:34:40 [clientInboundChannel-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=18
2026-02-06 01:34:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/4 session=null payload={"id":18,"conversationId":4,"senderId":27,"senderName":"Hari Rai","receiverId":2...(truncated)
2026-02-06 01:34:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:40 [clientInboundChannel-5] INFO  c.e.e.controller.ChatController -  Message 18 sent successfully
2026-02-06 01:34:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=4vy5zuo3 payload={"id":18,"conversationId":4,"senderId":27,"senderName":"Hari Rai","receiverId":2...(truncated)
2026-02-06 01:34:40 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:34:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:34:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:34:41 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 27
2026-02-06 01:34:41 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 27
2026-02-06 01:34:41 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 4
2026-02-06 01:34:41 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":27,"count":0}
2026-02-06 01:34:41 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=4vy5zuo3, lookupDestination='/chat.stopTyping'
2026-02-06 01:34:41 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:34:41 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":27,"isTyping":false,"timestamp":1770320981597}
2026-02-06 01:34:41 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:42 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-10 session=4vy5zuo3
2026-02-06 01:34:42 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 27
2026-02-06 01:34:42 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 27
2026-02-06 01:34:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 27
2026-02-06 01:34:42 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-12 session=4vy5zuo3
2026-02-06 01:34:42 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-13 session=4vy5zuo3
2026-02-06 01:34:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 27
2026-02-06 01:34:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:34:42 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":27,"count":0}
2026-02-06 01:34:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 3
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:44 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:45 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=4vy5zuo3, lookupDestination='/chat.typing'
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":true,"username":"hari@gmail.com","tim...(truncated)
2026-02-06 01:34:45 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=4vy5zuo3, lookupDestination='/chat.stopTyping'
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":false,"timestamp":1770320987667}
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:47 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=4vy5zuo3, lookupDestination='/chat.sendMessage'
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=4vy5zuo3, lookupDestination='/chat.stopTyping'
2026-02-06 01:34:47 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":27,"isTyping":false,"timestamp":1770320987773}
2026-02-06 01:34:47 [clientInboundChannel-5] INFO  c.e.e.controller.ChatController -  WebSocket message from hari@gmail.com (27) to 6
2026-02-06 01:34:47 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:47 [clientInboundChannel-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 27 to user 6
2026-02-06 01:34:47 [clientInboundChannel-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=19
2026-02-06 01:34:47 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/3 session=null payload={"id":19,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 01:34:47 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:34:47 [clientInboundChannel-5] INFO  c.e.e.controller.ChatController -  Message 19 sent successfully
2026-02-06 01:34:47 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=4vy5zuo3 payload={"id":19,"conversationId":3,"senderId":27,"senderName":"Hari Rai","receiverId":6...(truncated)
2026-02-06 01:34:47 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:34:47 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:34:47 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:34:48 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 27
2026-02-06 01:34:48 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 27
2026-02-06 01:34:48 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:34:48 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":27,"count":0}
2026-02-06 01:34:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4vy5zuo3] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:34:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4vy5zuo3
2026-02-06 01:34:51 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: hari@gmail.com (ID: 27), Session: 4vy5zuo3
2026-02-06 01:34:51 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 27 went OFFLINE (last session closed)
2026-02-06 01:34:51 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 27 status to OFFLINE
2026-02-06 01:34:51 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/27 session=null payload={"status":"OFFLINE","timestamp":1770320991217,"userId":27}
2026-02-06 01:34:51 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4vy5zuo3
2026-02-06 01:34:51 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770320917662, userId=27, username=hari@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c33139f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4vy5zuo3}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c33139f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4vy5zuo3}]
2026-02-06 01:34:59 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4vy5zuo3]
2026-02-06 01:35:05 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 01:35:05 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 01:35:05 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 01:35:25 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 01:35:25 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 01:35:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:35:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770321025669
2026-02-06 01:35:25 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 01:35:26 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 01:35:26 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 01:35:26 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 01:35:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:35:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/939/ejsnxgkb/websocket
2026-02-06 01:35:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ejsnxgkb]
2026-02-06 01:35:26 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ejsnxgkb
2026-02-06 01:35:26 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ejsnxgkb
2026-02-06 01:35:26 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: ejsnxgkb
2026-02-06 01:35:26 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 01:35:26 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 01:35:26 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:35:26 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: ejsnxgkb
2026-02-06 01:35:26 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=ejsnxgkb
2026-02-06 01:35:26 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ejsnxgkb
2026-02-06 01:35:26 [clientOutboundChannel-9] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjEwMDIsImV4cCI6MTc3MDMyNDYwMn0.xAvgMS7K6C8nZh2KjTDKGPCI1FSKKGZcDvTD0dUg5C0], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770321026884, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@6bd977d1, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@651e84da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ejsnxgkb}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@651e84da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ejsnxgkb}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:35:26 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userejsnxgkb subscriptionId=sub-0 session=ejsnxgkb user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:35:26 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userejsnxgkb subscriptionId=sub-1 session=ejsnxgkb user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:35:29 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 4 by user 23
2026-02-06 01:35:29 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 23
2026-02-06 01:35:29 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 23
2026-02-06 01:35:29 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 4 by user 23
2026-02-06 01:35:29 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 4
2026-02-06 01:35:29 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 4
2026-02-06 01:35:29 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/4 id=sub-2 session=ejsnxgkb
2026-02-06 01:35:29 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/4 id=sub-3 session=ejsnxgkb
2026-02-06 01:35:29 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":23,"count":1}
2026-02-06 01:35:39 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:39 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:39 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:39 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:39 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:39 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:39 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:39 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:42 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:42 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ejsnxgkb, lookupDestination='/chat.typing'
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":true,"username":"dev@gmail.com","time...(truncated)
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=ejsnxgkb, lookupDestination='/chat.sendMessage'
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ejsnxgkb, lookupDestination='/chat.stopTyping'
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":false,"timestamp":1770321043938}
2026-02-06 01:35:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:43 [clientInboundChannel-7] INFO  c.e.e.controller.ChatController -  WebSocket message from dev@gmail.com (23) to 27
2026-02-06 01:35:43 [clientInboundChannel-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 23 to user 27
2026-02-06 01:35:43 [clientInboundChannel-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=20
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/4 session=null payload={"id":20,"conversationId":4,"senderId":23,"senderName":"Dev Sah","receiverId":27...(truncated)
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:43 [clientInboundChannel-7] INFO  c.e.e.controller.ChatController -  Message 20 sent successfully
2026-02-06 01:35:43 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=ejsnxgkb payload={"id":20,"conversationId":4,"senderId":23,"senderName":"Dev Sah","receiverId":27...(truncated)
2026-02-06 01:35:44 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 01:35:44 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 01:35:44 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 23
2026-02-06 01:35:44 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 23
2026-02-06 01:35:44 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 23
2026-02-06 01:35:44 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 4
2026-02-06 01:35:44 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":23,"count":0}
2026-02-06 01:35:45 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ejsnxgkb, lookupDestination='/chat.stopTyping'
2026-02-06 01:35:45 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:35:45 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/4 session=null payload={"conversationId":4,"userId":23,"isTyping":false,"timestamp":1770321045640}
2026-02-06 01:35:45 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:35:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ejsnxgkb] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:35:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ejsnxgkb
2026-02-06 01:35:49 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: ejsnxgkb
2026-02-06 01:35:49 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 01:35:49 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 01:35:49 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"status":"OFFLINE","timestamp":1770321049328,"userId":23}
2026-02-06 01:35:49 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ejsnxgkb
2026-02-06 01:35:49 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770321026884, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@651e84da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ejsnxgkb}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@651e84da, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ejsnxgkb}]
2026-02-06 01:35:59 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ejsnxgkb]
2026-02-06 01:36:11 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:36:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:36:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:36:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:36:11 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770321071669
2026-02-06 01:36:12 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:36:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:36:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:36:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:36:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/227/nakpmrtp/websocket
2026-02-06 01:36:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nakpmrtp]
2026-02-06 01:36:12 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: nakpmrtp
2026-02-06 01:36:12 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: nakpmrtp
2026-02-06 01:36:12 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: nakpmrtp
2026-02-06 01:36:12 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:36:12 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:36:12 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:36:12 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: nakpmrtp
2026-02-06 01:36:12 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: nakpmrtp
2026-02-06 01:36:12 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=nakpmrtp
2026-02-06 01:36:12 [clientOutboundChannel-7] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMTA2NiwiZXhwIjoxNzcwMzI0NjY2fQ.PCe8TP_zzthHF6zj2vWHJ5eOnAer21tP2JIsT2Gg4Lo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770321072891, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@fe58787, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@122680b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nakpmrtp}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@122680b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nakpmrtp}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:36:12 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usernakpmrtp subscriptionId=sub-0 session=nakpmrtp user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:36:12 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usernakpmrtp subscriptionId=sub-1 session=nakpmrtp user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:36:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nakpmrtp] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:36:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nakpmrtp
2026-02-06 01:36:19 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: nakpmrtp
2026-02-06 01:36:19 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:36:19 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:36:19 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770321079333,"userId":6}
2026-02-06 01:36:19 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nakpmrtp
2026-02-06 01:36:19 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770321072891, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@122680b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nakpmrtp}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@122680b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nakpmrtp}]
2026-02-06 01:36:29 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [nakpmrtp]
2026-02-06 01:36:32 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:36:32 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:36:32 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:36:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:36:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770321092021
2026-02-06 01:36:32 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:36:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:36:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:36:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:36:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/861/ih1clzjr/websocket
2026-02-06 01:36:32 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ih1clzjr]
2026-02-06 01:36:33 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ih1clzjr
2026-02-06 01:36:33 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ih1clzjr
2026-02-06 01:36:33 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: ih1clzjr
2026-02-06 01:36:33 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:36:33 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:36:33 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:36:33 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: ih1clzjr
2026-02-06 01:36:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=ih1clzjr
2026-02-06 01:36:33 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ih1clzjr
2026-02-06 01:36:33 [clientOutboundChannel-9] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMTA2NiwiZXhwIjoxNzcwMzI0NjY2fQ.PCe8TP_zzthHF6zj2vWHJ5eOnAer21tP2JIsT2Gg4Lo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770321093296, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@24238ee1, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4e4024b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ih1clzjr}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4e4024b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ih1clzjr}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:36:33 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userih1clzjr subscriptionId=sub-0 session=ih1clzjr user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:36:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userih1clzjr subscriptionId=sub-1 session=ih1clzjr user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:36:35 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 6
2026-02-06 01:36:35 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:36:35 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 6
2026-02-06 01:36:35 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:36:35 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=ih1clzjr
2026-02-06 01:36:35 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 3
2026-02-06 01:36:35 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=ih1clzjr
2026-02-06 01:36:35 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 3
2026-02-06 01:36:35 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":1}
2026-02-06 01:36:48 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:48 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:48 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:48 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:49 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:49 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:50 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:50 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:50 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:50 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:50 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:50 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:50 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:50 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:51 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:51 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:52 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:53 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:54 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:55 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:56 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:56 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ih1clzjr, lookupDestination='/chat.typing'
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:36:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:57 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=ih1clzjr, lookupDestination='/chat.sendMessage'
2026-02-06 01:36:57 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ih1clzjr, lookupDestination='/chat.stopTyping'
2026-02-06 01:36:57 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 01:36:57 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:36:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":false,"timestamp":1770321117155}
2026-02-06 01:36:57 [clientInboundChannel-8] INFO  c.e.e.controller.ChatController -  WebSocket message from ram@gmail.com (6) to 27
2026-02-06 01:36:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:57 [clientInboundChannel-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 6 to user 27
2026-02-06 01:36:57 [clientInboundChannel-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=21
2026-02-06 01:36:57 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/3 session=null payload={"id":21,"conversationId":3,"senderId":6,"senderName":"Ram Chaudhary","receiverI...(truncated)
2026-02-06 01:36:57 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:36:57 [clientInboundChannel-8] INFO  c.e.e.controller.ChatController -  Message 21 sent successfully
2026-02-06 01:36:57 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=ih1clzjr payload={"id":21,"conversationId":3,"senderId":6,"senderName":"Ram Chaudhary","receiverI...(truncated)
2026-02-06 01:36:57 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:36:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:36:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 6
2026-02-06 01:36:57 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 6
2026-02-06 01:36:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 6
2026-02-06 01:36:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:36:57 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":6,"count":0}
2026-02-06 01:36:58 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ih1clzjr, lookupDestination='/chat.stopTyping'
2026-02-06 01:36:58 [clientInboundChannel-8] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:36:58 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/3 session=null payload={"conversationId":3,"userId":6,"isTyping":false,"timestamp":1770321118817}
2026-02-06 01:36:58 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:37:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ih1clzjr] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:37:00 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ih1clzjr
2026-02-06 01:37:00 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: ih1clzjr
2026-02-06 01:37:00 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:37:00 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:37:01 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770321121012,"userId":6}
2026-02-06 01:37:01 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ih1clzjr
2026-02-06 01:37:01 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770321093296, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4e4024b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ih1clzjr}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4e4024b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ih1clzjr}]
2026-02-06 01:37:09 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ih1clzjr]
2026-02-06 01:37:50 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:37:50 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:37:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:37:50 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:37:50 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770321170472
2026-02-06 01:37:51 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 01:37:51 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 01:37:51 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 01:37:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:37:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/706/rloaqnqw/websocket
2026-02-06 01:37:51 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=rloaqnqw]
2026-02-06 01:37:51 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: rloaqnqw
2026-02-06 01:37:51 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: rloaqnqw
2026-02-06 01:37:51 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: hari@gmail.com - Session: rloaqnqw
2026-02-06 01:37:51 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: hari@gmail.com
2026-02-06 01:37:51 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: hari@gmail.com
2026-02-06 01:37:51 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:37:51 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: hari@gmail.com (ID: 27), Session: rloaqnqw
2026-02-06 01:37:51 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=hari@gmail.com session=rloaqnqw
2026-02-06 01:37:51 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: rloaqnqw
2026-02-06 01:37:51 [clientOutboundChannel-9] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjcsInN1YiI6ImhhcmlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzIxMTMzLCJleHAiOjE3NzAzMjQ3MzN9.3bpQAIqEuwGzVivW_vMPL6qeExYczW8AYAHc2pbzSe4], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770321171690, userId=27, username=hari@gmail.com}, simpHeartbeat=[J@7ce0bc55, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@440c71ae, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=rloaqnqw}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@440c71ae, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=rloaqnqw}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:37:51 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userrloaqnqw subscriptionId=sub-0 session=rloaqnqw user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:37:51 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userrloaqnqw subscriptionId=sub-1 session=rloaqnqw user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:37:54 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 27
2026-02-06 01:37:54 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 27
2026-02-06 01:37:54 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 27
2026-02-06 01:37:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 27
2026-02-06 01:37:54 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 6 messages in conversation 3
2026-02-06 01:37:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 3
2026-02-06 01:37:54 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-2 session=rloaqnqw
2026-02-06 01:37:54 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-3 session=rloaqnqw
2026-02-06 01:37:54 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":27,"count":1}
2026-02-06 01:38:10 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/4 id=sub-4 session=rloaqnqw
2026-02-06 01:38:10 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=rloaqnqw
2026-02-06 01:38:10 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/4 id=sub-5 session=rloaqnqw
2026-02-06 01:38:10 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 27
2026-02-06 01:38:10 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 4 by user 27
2026-02-06 01:38:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 27
2026-02-06 01:38:10 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 4 by user 27
2026-02-06 01:38:10 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 4
2026-02-06 01:38:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 4
2026-02-06 01:38:10 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":27,"count":1}
2026-02-06 01:38:26 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=rloaqnqw
2026-02-06 01:38:26 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-6 session=rloaqnqw
2026-02-06 01:38:26 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 27
2026-02-06 01:38:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 27
2026-02-06 01:38:26 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 27
2026-02-06 01:38:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 27
2026-02-06 01:38:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 6 messages in conversation 3
2026-02-06 01:38:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 01:38:26 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":27,"count":0}
2026-02-06 01:38:26 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-7 session=rloaqnqw
2026-02-06 01:38:41 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=rloaqnqw
2026-02-06 01:38:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/4 id=sub-8 session=rloaqnqw
2026-02-06 01:38:41 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/4 id=sub-9 session=rloaqnqw
2026-02-06 01:38:41 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 4 by user 27
2026-02-06 01:38:41 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 27
2026-02-06 01:38:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 4 by user 27
2026-02-06 01:38:41 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 27
2026-02-06 01:38:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 4
2026-02-06 01:38:41 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 4
2026-02-06 01:38:41 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":27,"count":0}
2026-02-06 01:38:44 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=rloaqnqw
2026-02-06 01:38:44 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=rloaqnqw
2026-02-06 01:38:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=rloaqnqw
2026-02-06 01:38:44 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=rloaqnqw
2026-02-06 01:38:44 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-7 session=rloaqnqw
2026-02-06 01:38:44 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-8 session=rloaqnqw
2026-02-06 01:38:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-9 session=rloaqnqw
2026-02-06 01:38:44 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-10 session=rloaqnqw
2026-02-06 01:38:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=rloaqnqw] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:38:44 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session rloaqnqw
2026-02-06 01:38:44 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: hari@gmail.com (ID: 27), Session: rloaqnqw
2026-02-06 01:38:44 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 27 went OFFLINE (last session closed)
2026-02-06 01:38:44 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 27 status to OFFLINE
2026-02-06 01:38:44 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/27 session=null payload={"status":"OFFLINE","timestamp":1770321224651,"userId":27}
2026-02-06 01:38:44 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=rloaqnqw
2026-02-06 01:38:44 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770321171690, userId=27, username=hari@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@440c71ae, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=rloaqnqw}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@440c71ae, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=rloaqnqw}]
2026-02-06 01:38:54 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [rloaqnqw]
2026-02-06 01:39:21 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:39:21 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:39:21 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:39:46 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:39:46 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:39:46 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:39:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:39:46 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770321286384
2026-02-06 01:39:46 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:39:46 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:39:46 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:39:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:39:46 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/849/5ioq1xit/websocket
2026-02-06 01:39:47 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5ioq1xit]
2026-02-06 01:39:47 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5ioq1xit
2026-02-06 01:39:47 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 5ioq1xit
2026-02-06 01:39:47 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: 5ioq1xit
2026-02-06 01:39:47 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 01:39:47 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 01:39:47 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:39:47 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: 5ioq1xit
2026-02-06 01:39:47 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 5ioq1xit
2026-02-06 01:39:47 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=5ioq1xit
2026-02-06 01:39:47 [clientOutboundChannel-13] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMTI2NiwiZXhwIjoxNzcwMzI0ODY2fQ.0aoE7QeorZpPZSxCaiOLzCnM3vTKvwokEj0MZ6Ze1Bc], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770321287633, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@6c0872ca, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@62cf813b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5ioq1xit}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@62cf813b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5ioq1xit}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:39:47 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user5ioq1xit subscriptionId=sub-0 session=5ioq1xit user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:39:47 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user5ioq1xit subscriptionId=sub-1 session=5ioq1xit user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:40:01 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 1
2026-02-06 01:40:01 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 1
2026-02-06 01:40:02 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 01:40:22 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:40:22 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:40:22 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 HOST_ADMIN conversations
2026-02-06 01:40:38 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:40:38 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:40:38 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 1
2026-02-06 01:40:45 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'ram'
2026-02-06 01:40:45 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'ram'
2026-02-06 01:40:49 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'ram@gmail.com'
2026-02-06 01:40:49 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'ram@gmail.com'
2026-02-06 01:40:51 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Admin 1 initiating chat with user 6
2026-02-06 01:40:51 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 initiating chat with user 6
2026-02-06 01:40:51 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_ADMIN conversation between users 6 and 1
2026-02-06 01:40:51 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=5
2026-02-06 01:40:51 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:40:51 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:40:51 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/5 id=sub-2 session=5ioq1xit
2026-02-06 01:40:51 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/5 id=sub-3 session=5ioq1xit
2026-02-06 01:40:51 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 1
2026-02-06 01:40:51 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 5 by user 1
2026-02-06 01:40:51 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 1
2026-02-06 01:40:51 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 1
2026-02-06 01:40:51 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 5 by user 1
2026-02-06 01:40:51 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 5
2026-02-06 01:40:51 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 5
2026-02-06 01:40:51 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":1,"count":0}
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:54 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:54 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:54 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:54 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:54 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:56 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:56 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:56 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:56 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:56 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:57 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:57 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:58 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:58 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:58 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:58 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:40:58 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:00 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=5ioq1xit, lookupDestination='/chat.stopTyping'
2026-02-06 01:41:00 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:41:00 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":false,"timestamp":1770321360384}
2026-02-06 01:41:00 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:00 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:00 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:00 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:00 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:01 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:01 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:02 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:02 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:02 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:02 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:03 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:03 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:03 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:03 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:04 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:04 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:05 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:05 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:06 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:06 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:06 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:06 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:06 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:06 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:06 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:06 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:07 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:07 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:07 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:07 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:07 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=5ioq1xit, lookupDestination='/chat.typing'
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:09 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=5ioq1xit, lookupDestination='/chat.sendMessage'
2026-02-06 01:41:09 [clientInboundChannel-9] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=5ioq1xit, lookupDestination='/chat.stopTyping'
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:41:09 [clientInboundChannel-9] INFO  c.e.e.controller.ChatController -  WebSocket message from admin123@gmail.com (1) to 6
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":false,"timestamp":1770321369849}
2026-02-06 01:41:09 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:09 [clientInboundChannel-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 1 to user 6
2026-02-06 01:41:09 [clientInboundChannel-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=22
2026-02-06 01:41:09 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/5 session=null payload={"id":22,"conversationId":5,"senderId":1,"senderName":"Admin User","receiverId":...(truncated)
2026-02-06 01:41:09 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:09 [clientInboundChannel-9] INFO  c.e.e.controller.ChatController -  Message 22 sent successfully
2026-02-06 01:41:09 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=5ioq1xit payload={"id":22,"conversationId":5,"senderId":1,"senderName":"Admin User","receiverId":...(truncated)
2026-02-06 01:41:09 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:41:09 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:41:09 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 1
2026-02-06 01:41:10 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 1
2026-02-06 01:41:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 1
2026-02-06 01:41:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 5
2026-02-06 01:41:10 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":1,"count":0}
2026-02-06 01:41:11 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=5ioq1xit, lookupDestination='/chat.stopTyping'
2026-02-06 01:41:11 [clientInboundChannel-12] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:41:11 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":1,"isTyping":false,"timestamp":1770321371205}
2026-02-06 01:41:11 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:41:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5ioq1xit] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:41:13 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5ioq1xit
2026-02-06 01:41:13 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: 5ioq1xit
2026-02-06 01:41:13 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 01:41:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 01:41:13 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770321373101,"userId":1}
2026-02-06 01:41:13 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5ioq1xit
2026-02-06 01:41:13 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770321287633, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@62cf813b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5ioq1xit}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@62cf813b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=5ioq1xit}]
2026-02-06 01:41:19 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5ioq1xit]
2026-02-06 01:41:20 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:41:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:41:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:01 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:51:01 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:51:01 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:12 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:51:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:51:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:51:12 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770321972880
2026-02-06 01:51:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:51:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/826/os332jpt/websocket
2026-02-06 01:51:12 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:51:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:51:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=os332jpt]
2026-02-06 01:51:12 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: os332jpt
2026-02-06 01:51:12 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: os332jpt
2026-02-06 01:51:12 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: os332jpt
2026-02-06 01:51:13 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:51:13 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:51:13 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:51:13 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: os332jpt
2026-02-06 01:51:13 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=os332jpt
2026-02-06 01:51:13 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: os332jpt
2026-02-06 01:51:13 [clientOutboundChannel-18] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMTk3MSwiZXhwIjoxNzcwMzI1NTcxfQ._mPyq_HLkSo0aLKfRmmFHnVQ4DadBFMAdl_8UX5ZX4M], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770321973004, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@7423af4b, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ae45fbf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=os332jpt}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ae45fbf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=os332jpt}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:51:13 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useros332jpt subscriptionId=sub-1 session=os332jpt user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:51:13 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useros332jpt subscriptionId=sub-0 session=os332jpt user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:51:15 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/5 id=sub-2 session=os332jpt
2026-02-06 01:51:15 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/5 id=sub-3 session=os332jpt
2026-02-06 01:51:15 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 6
2026-02-06 01:51:15 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 5 by user 6
2026-02-06 01:51:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 6
2026-02-06 01:51:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 5 by user 6
2026-02-06 01:51:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 5
2026-02-06 01:51:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 5
2026-02-06 01:51:15 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":6,"count":1}
2026-02-06 01:51:24 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:51:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:51:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:31 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 6
2026-02-06 01:51:31 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 6
2026-02-06 01:51:31 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 01:51:33 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 6
2026-02-06 01:51:33 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 6
2026-02-06 01:51:33 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 01:51:34 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:51:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:51:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:39 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 6
2026-02-06 01:51:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 6
2026-02-06 01:51:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 01:51:51 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:51:51 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:51:51 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:52 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 6
2026-02-06 01:51:52 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 6
2026-02-06 01:51:52 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 01:51:56 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:51:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:51:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:51:57 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=os332jpt
2026-02-06 01:51:57 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/5 id=sub-4 session=os332jpt
2026-02-06 01:51:57 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/5 id=sub-5 session=os332jpt
2026-02-06 01:51:57 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 6
2026-02-06 01:51:57 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 5 by user 6
2026-02-06 01:51:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 6
2026-02-06 01:51:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 5 by user 6
2026-02-06 01:51:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 5
2026-02-06 01:51:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 5
2026-02-06 01:51:57 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":6,"count":0}
2026-02-06 01:52:01 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:01 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:01 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:01 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:01 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:02 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:03 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=os332jpt, lookupDestination='/chat.typing'
2026-02-06 01:52:03 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:52:03 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:52:03 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:04 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=os332jpt, lookupDestination='/chat.stopTyping'
2026-02-06 01:52:04 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=os332jpt, lookupDestination='/chat.sendMessage'
2026-02-06 01:52:04 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 01:52:04 [clientInboundChannel-17] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:52:04 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":false,"timestamp":1770322024144}
2026-02-06 01:52:04 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:04 [clientInboundChannel-16] INFO  c.e.e.controller.ChatController -  WebSocket message from ram@gmail.com (6) to 1
2026-02-06 01:52:04 [clientInboundChannel-16] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 6 to user 1
2026-02-06 01:52:04 [clientInboundChannel-16] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=23
2026-02-06 01:52:04 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/5 session=null payload={"id":23,"conversationId":5,"senderId":6,"senderName":"Ram Chaudhary","receiverI...(truncated)
2026-02-06 01:52:04 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:04 [clientInboundChannel-16] INFO  c.e.e.controller.ChatController -  Message 23 sent successfully
2026-02-06 01:52:04 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=os332jpt payload={"id":23,"conversationId":5,"senderId":6,"senderName":"Ram Chaudhary","receiverI...(truncated)
2026-02-06 01:52:04 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:52:04 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:52:04 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:52:04 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 6
2026-02-06 01:52:04 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 6
2026-02-06 01:52:04 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 5
2026-02-06 01:52:04 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":6,"count":0}
2026-02-06 01:52:05 [clientInboundChannel-14] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=os332jpt, lookupDestination='/chat.stopTyping'
2026-02-06 01:52:05 [clientInboundChannel-14] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:52:05 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":false,"timestamp":1770322025087}
2026-02-06 01:52:05 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:52:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=os332jpt] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:52:08 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session os332jpt
2026-02-06 01:52:08 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: os332jpt
2026-02-06 01:52:08 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:52:08 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:52:08 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770322028418,"userId":6}
2026-02-06 01:52:08 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=os332jpt
2026-02-06 01:52:08 [clientOutboundChannel-19] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770321973004, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ae45fbf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=os332jpt}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7ae45fbf, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=os332jpt}]
2026-02-06 01:52:14 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [os332jpt]
2026-02-06 01:52:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:52:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322037503
2026-02-06 01:52:17 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:52:17 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:52:17 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 1
2026-02-06 01:52:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:52:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/949/ieudkarf/websocket
2026-02-06 01:52:17 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ieudkarf]
2026-02-06 01:52:17 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ieudkarf
2026-02-06 01:52:17 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ieudkarf
2026-02-06 01:52:17 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: ieudkarf
2026-02-06 01:52:17 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 01:52:17 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 01:52:17 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:52:17 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: ieudkarf
2026-02-06 01:52:17 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:52:17 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ieudkarf
2026-02-06 01:52:17 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=ieudkarf
2026-02-06 01:52:17 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:52:17 [clientOutboundChannel-21] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjAzNSwiZXhwIjoxNzcwMzI1NjM1fQ.vUB6Q-u3Lf7bs6OjAUsEFbGSSdBMoCGN573i1FeR5qE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322037564, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@106f9df9, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ea87184, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ieudkarf}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ea87184, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ieudkarf}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:52:17 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 1
2026-02-06 01:52:17 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userieudkarf subscriptionId=sub-0 session=ieudkarf user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:52:17 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userieudkarf subscriptionId=sub-1 session=ieudkarf user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:53:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/5 id=sub-3 session=ieudkarf
2026-02-06 01:53:02 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/5 id=sub-2 session=ieudkarf
2026-02-06 01:53:02 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 1
2026-02-06 01:53:02 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 5 by user 1
2026-02-06 01:53:02 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 1
2026-02-06 01:53:02 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 5 by user 1
2026-02-06 01:53:02 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 5
2026-02-06 01:53:02 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 5
2026-02-06 01:53:02 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":1,"count":1}
2026-02-06 01:53:21 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=ieudkarf
2026-02-06 01:53:21 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=ieudkarf
2026-02-06 01:53:21 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=ieudkarf
2026-02-06 01:53:21 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=ieudkarf
2026-02-06 01:53:21 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=ieudkarf
2026-02-06 01:53:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ieudkarf] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:53:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ieudkarf
2026-02-06 01:53:21 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: ieudkarf
2026-02-06 01:53:21 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 01:53:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 01:53:21 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770322101821,"userId":1}
2026-02-06 01:53:21 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ieudkarf
2026-02-06 01:53:21 [clientOutboundChannel-24] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322037564, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ea87184, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ieudkarf}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ea87184, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ieudkarf}]
2026-02-06 01:53:29 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ieudkarf]
2026-02-06 01:54:23 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:54:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:54:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:54:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322163176
2026-02-06 01:54:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 1
2026-02-06 01:54:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:54:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/575/engje5fq/websocket
2026-02-06 01:54:23 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=engje5fq]
2026-02-06 01:54:23 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: engje5fq
2026-02-06 01:54:23 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: engje5fq
2026-02-06 01:54:23 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: engje5fq
2026-02-06 01:54:23 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:54:23 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:54:23 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 1
2026-02-06 01:54:23 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 01:54:23 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 01:54:23 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:54:23 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: engje5fq
2026-02-06 01:54:23 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: engje5fq
2026-02-06 01:54:23 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=engje5fq
2026-02-06 01:54:23 [clientOutboundChannel-25] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjAzNSwiZXhwIjoxNzcwMzI1NjM1fQ.vUB6Q-u3Lf7bs6OjAUsEFbGSSdBMoCGN573i1FeR5qE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322163241, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@6b553fe0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6592ccfa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=engje5fq}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6592ccfa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=engje5fq}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:54:23 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userengje5fq subscriptionId=sub-1 session=engje5fq user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:54:23 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userengje5fq subscriptionId=sub-0 session=engje5fq user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:54:41 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:54:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:54:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 HOST_ADMIN conversations
2026-02-06 01:54:48 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'nayan'
2026-02-06 01:54:48 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'nayan'
2026-02-06 01:54:57 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Admin 1 initiating chat with user 31
2026-02-06 01:54:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 initiating chat with user 31
2026-02-06 01:54:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_ADMIN conversation between users 31 and 1
2026-02-06 01:54:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=6
2026-02-06 01:54:57 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:54:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-2 session=engje5fq
2026-02-06 01:54:57 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-3 session=engje5fq
2026-02-06 01:54:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:54:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 HOST_ADMIN conversations
2026-02-06 01:54:57 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 1
2026-02-06 01:54:57 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 1
2026-02-06 01:54:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 1
2026-02-06 01:54:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 1
2026-02-06 01:54:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 6
2026-02-06 01:54:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 01:54:57 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":1,"count":0}
2026-02-06 01:54:59 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 10 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(10)-CONNECTED(10)-DISCONNECT(2)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 918], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 279], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 1, completed tasks = 277]
2026-02-06 01:55:01 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:55:01 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 01:55:01 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 HOST_ADMIN conversations
2026-02-06 01:55:02 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 01:55:02 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 01:55:02 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 01:55:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=engje5fq
2026-02-06 01:55:10 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=engje5fq
2026-02-06 01:55:10 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=engje5fq
2026-02-06 01:55:10 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=engje5fq
2026-02-06 01:55:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=engje5fq
2026-02-06 01:55:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=engje5fq] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:55:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session engje5fq
2026-02-06 01:55:10 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: engje5fq
2026-02-06 01:55:10 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 01:55:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 01:55:10 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770322210347,"userId":1}
2026-02-06 01:55:10 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=engje5fq
2026-02-06 01:55:10 [clientOutboundChannel-28] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322163241, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6592ccfa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=engje5fq}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6592ccfa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=engje5fq}]
2026-02-06 01:55:19 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [engje5fq]
2026-02-06 01:55:56 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 01:56:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:56:12 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322272752
2026-02-06 01:56:12 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:56:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:56:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:56:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:56:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/565/kqczuglj/websocket
2026-02-06 01:56:12 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kqczuglj]
2026-02-06 01:56:12 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: kqczuglj
2026-02-06 01:56:12 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: kqczuglj
2026-02-06 01:56:12 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: kqczuglj
2026-02-06 01:56:12 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:56:12 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:56:12 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:56:12 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: kqczuglj
2026-02-06 01:56:12 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: kqczuglj
2026-02-06 01:56:12 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=kqczuglj
2026-02-06 01:56:12 [clientOutboundChannel-29] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjI1NCwiZXhwIjoxNzcwMzI1ODU0fQ.kJYzgqt5Z9XyHIIq8Gf1DU3f3M6o1dtTOwuiRpoQ5Dg], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322272823, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@66c76801, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@68008aa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kqczuglj}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@68008aa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kqczuglj}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:56:12 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:56:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:56:12 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userkqczuglj subscriptionId=sub-0 session=kqczuglj user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:56:12 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userkqczuglj subscriptionId=sub-1 session=kqczuglj user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:56:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:56:30 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=kqczuglj
2026-02-06 01:56:30 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=kqczuglj
2026-02-06 01:56:30 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=kqczuglj
2026-02-06 01:56:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kqczuglj] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:56:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kqczuglj
2026-02-06 01:56:30 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: kqczuglj
2026-02-06 01:56:30 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:56:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:56:30 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770322290399,"userId":6}
2026-02-06 01:56:30 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kqczuglj
2026-02-06 01:56:30 [clientOutboundChannel-31] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322272823, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@68008aa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kqczuglj}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@68008aa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kqczuglj}]
2026-02-06 01:56:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:56:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322295456
2026-02-06 01:56:35 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:56:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:56:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:56:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/743/015c3s2u/websocket
2026-02-06 01:56:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:56:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=015c3s2u]
2026-02-06 01:56:35 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 015c3s2u
2026-02-06 01:56:35 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 015c3s2u
2026-02-06 01:56:35 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: 015c3s2u
2026-02-06 01:56:35 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:56:35 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:56:35 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:56:35 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: 015c3s2u
2026-02-06 01:56:35 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=015c3s2u
2026-02-06 01:56:35 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 015c3s2u
2026-02-06 01:56:35 [clientOutboundChannel-32] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjI1NCwiZXhwIjoxNzcwMzI1ODU0fQ.kJYzgqt5Z9XyHIIq8Gf1DU3f3M6o1dtTOwuiRpoQ5Dg], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322295511, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@4c7d99e6, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@42ba6e19, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=015c3s2u}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@42ba6e19, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=015c3s2u}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:56:35 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user015c3s2u subscriptionId=sub-1 session=015c3s2u user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:56:35 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user015c3s2u subscriptionId=sub-0 session=015c3s2u user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:56:35 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:56:35 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:56:35 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:56:39 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [kqczuglj]
2026-02-06 01:56:39 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 6
2026-02-06 01:56:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 6
2026-02-06 01:56:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 01:56:41 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:56:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:56:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:56:45 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/5 id=sub-2 session=015c3s2u
2026-02-06 01:56:45 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/5 id=sub-3 session=015c3s2u
2026-02-06 01:56:45 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 5 by user 6
2026-02-06 01:56:45 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 6
2026-02-06 01:56:45 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 5 by user 6
2026-02-06 01:56:45 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 6
2026-02-06 01:56:45 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 5
2026-02-06 01:56:45 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 5
2026-02-06 01:56:45 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":6,"count":0}
2026-02-06 01:56:52 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:52 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:52 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:52 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:52 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:52 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:52 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:52 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:53 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:53 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:54 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:54 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:54 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:54 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:54 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=015c3s2u, lookupDestination='/chat.typing'
2026-02-06 01:56:54 [clientInboundChannel-25] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 01:56:54 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 01:56:54 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:56:56 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=015c3s2u, lookupDestination='/chat.stopTyping'
2026-02-06 01:56:56 [clientInboundChannel-26] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 01:56:56 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/5 session=null payload={"conversationId":5,"userId":6,"isTyping":false,"timestamp":1770322316040}
2026-02-06 01:56:56 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 01:58:04 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=015c3s2u
2026-02-06 01:58:04 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=015c3s2u
2026-02-06 01:58:04 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=015c3s2u
2026-02-06 01:58:04 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=015c3s2u
2026-02-06 01:58:04 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=015c3s2u
2026-02-06 01:58:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=015c3s2u] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:58:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 015c3s2u
2026-02-06 01:58:04 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: 015c3s2u
2026-02-06 01:58:04 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:58:04 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:58:04 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770322384879,"userId":6}
2026-02-06 01:58:04 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=015c3s2u
2026-02-06 01:58:04 [clientOutboundChannel-34] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322295511, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@42ba6e19, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=015c3s2u}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@42ba6e19, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=015c3s2u}]
2026-02-06 01:58:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:58:05 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322385885
2026-02-06 01:58:05 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:58:05 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:58:05 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:58:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:58:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/635/t513eek1/websocket
2026-02-06 01:58:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=t513eek1]
2026-02-06 01:58:05 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: t513eek1
2026-02-06 01:58:05 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: t513eek1
2026-02-06 01:58:05 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: t513eek1
2026-02-06 01:58:05 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:58:05 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:58:05 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:58:05 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:58:05 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: t513eek1
2026-02-06 01:58:05 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=t513eek1
2026-02-06 01:58:05 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: t513eek1
2026-02-06 01:58:05 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:58:05 [clientOutboundChannel-35] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjI1NCwiZXhwIjoxNzcwMzI1ODU0fQ.kJYzgqt5Z9XyHIIq8Gf1DU3f3M6o1dtTOwuiRpoQ5Dg], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322385943, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@2b4ca671, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=t513eek1}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=t513eek1}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:58:05 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:58:05 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usert513eek1 subscriptionId=sub-0 session=t513eek1 user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:58:05 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usert513eek1 subscriptionId=sub-1 session=t513eek1 user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:58:12 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=t513eek1
2026-02-06 01:58:12 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=t513eek1
2026-02-06 01:58:12 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=t513eek1
2026-02-06 01:58:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=t513eek1] closed with CloseStatus[code=1000, reason=null]
2026-02-06 01:58:12 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session t513eek1
2026-02-06 01:58:12 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: t513eek1
2026-02-06 01:58:12 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 01:58:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 01:58:12 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770322392170,"userId":6}
2026-02-06 01:58:12 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=t513eek1
2026-02-06 01:58:12 [clientOutboundChannel-33] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322385943, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=t513eek1}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=t513eek1}]
2026-02-06 01:58:14 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [015c3s2u]
2026-02-06 01:58:19 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [t513eek1]
2026-02-06 01:58:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:58:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322404319
2026-02-06 01:58:24 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:58:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:58:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 01:58:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/204/1dvgc03j/websocket
2026-02-06 01:58:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:58:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1dvgc03j]
2026-02-06 01:58:24 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 1dvgc03j
2026-02-06 01:58:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 1dvgc03j
2026-02-06 01:58:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: 1dvgc03j
2026-02-06 01:58:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 01:58:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 01:58:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 01:58:24 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: 1dvgc03j
2026-02-06 01:58:24 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=1dvgc03j
2026-02-06 01:58:24 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 1dvgc03j
2026-02-06 01:58:24 [clientOutboundChannel-34] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjI1NCwiZXhwIjoxNzcwMzI1ODU0fQ.kJYzgqt5Z9XyHIIq8Gf1DU3f3M6o1dtTOwuiRpoQ5Dg], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322404398, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@372d8de0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@39ea6575, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1dvgc03j}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@39ea6575, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1dvgc03j}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 01:58:24 [clientInboundChannel-25] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user1dvgc03j subscriptionId=sub-0 session=1dvgc03j user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:58:24 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user1dvgc03j subscriptionId=sub-1 session=1dvgc03j user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 01:58:24 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 01:58:24 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 01:58:24 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 01:58:28 [clientInboundChannel-27] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/5 id=sub-2 session=1dvgc03j
2026-02-06 01:58:28 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/5 id=sub-3 session=1dvgc03j
2026-02-06 01:58:28 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 6
2026-02-06 01:58:28 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 5 by user 6
2026-02-06 01:58:28 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 6
2026-02-06 01:58:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 5 by user 6
2026-02-06 01:58:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 5
2026-02-06 01:58:28 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 5
2026-02-06 01:58:28 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":6,"count":0}
2026-02-06 02:02:19 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=1dvgc03j
2026-02-06 02:02:19 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=1dvgc03j
2026-02-06 02:02:19 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=1dvgc03j
2026-02-06 02:02:19 [clientInboundChannel-28] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=1dvgc03j
2026-02-06 02:02:19 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=1dvgc03j
2026-02-06 02:02:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1dvgc03j] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:02:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1dvgc03j
2026-02-06 02:02:19 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: 1dvgc03j
2026-02-06 02:02:19 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 02:02:19 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 02:02:19 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770322639283,"userId":6}
2026-02-06 02:02:19 [clientInboundChannel-29] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1dvgc03j
2026-02-06 02:02:19 [clientOutboundChannel-44] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322404398, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@39ea6575, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1dvgc03j}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@39ea6575, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1dvgc03j}]
2026-02-06 02:02:20 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 02:02:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:02:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 02:02:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322640662
2026-02-06 02:02:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 02:02:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:02:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/767/tnime5z0/websocket
2026-02-06 02:02:20 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=tnime5z0]
2026-02-06 02:02:20 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: tnime5z0
2026-02-06 02:02:20 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: tnime5z0
2026-02-06 02:02:20 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: tnime5z0
2026-02-06 02:02:20 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 02:02:20 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 02:02:20 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 02:02:20 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:02:20 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: tnime5z0
2026-02-06 02:02:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 02:02:20 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=tnime5z0
2026-02-06 02:02:20 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: tnime5z0
2026-02-06 02:02:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 02:02:20 [clientOutboundChannel-41] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjI1NCwiZXhwIjoxNzcwMzI1ODU0fQ.kJYzgqt5Z9XyHIIq8Gf1DU3f3M6o1dtTOwuiRpoQ5Dg], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322640726, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@6d74ead9, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63b30907, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=tnime5z0}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63b30907, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=tnime5z0}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:02:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usertnime5z0 subscriptionId=sub-0 session=tnime5z0 user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:02:20 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usertnime5z0 subscriptionId=sub-1 session=tnime5z0 user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:02:23 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 6
2026-02-06 02:02:23 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 6
2026-02-06 02:02:23 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:02:24 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 6
2026-02-06 02:02:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 6
2026-02-06 02:02:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 02:02:25 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 6
2026-02-06 02:02:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 6
2026-02-06 02:02:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 02:02:29 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [1dvgc03j]
2026-02-06 02:03:25 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=tnime5z0
2026-02-06 02:03:25 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=tnime5z0
2026-02-06 02:03:25 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=tnime5z0
2026-02-06 02:03:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=tnime5z0] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:03:25 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session tnime5z0
2026-02-06 02:03:25 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: tnime5z0
2026-02-06 02:03:25 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 02:03:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 02:03:25 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770322705228,"userId":6}
2026-02-06 02:03:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=tnime5z0
2026-02-06 02:03:25 [clientOutboundChannel-47] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322640726, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63b30907, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=tnime5z0}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63b30907, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=tnime5z0}]
2026-02-06 02:03:34 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [tnime5z0]
2026-02-06 02:03:34 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 02:03:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:03:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322717038
2026-02-06 02:03:37 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:03:37 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:03:37 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:03:37 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:03:37 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/083/xhetiffv/websocket
2026-02-06 02:03:37 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xhetiffv]
2026-02-06 02:03:37 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: xhetiffv
2026-02-06 02:03:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: xhetiffv
2026-02-06 02:03:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: xhetiffv
2026-02-06 02:03:37 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:03:37 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:03:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 02:03:37 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:03:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 02:03:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:03:37 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: xhetiffv
2026-02-06 02:03:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=xhetiffv
2026-02-06 02:03:37 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: xhetiffv
2026-02-06 02:03:37 [clientOutboundChannel-48] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjI3MTIsImV4cCI6MTc3MDMyNjMxMn0.Je2oUva-XLaNx9nqU-VNOp6VvLevWyuwmAX4wqo7oDo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322717134, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@5ec126b5, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5006d31d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xhetiffv}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5006d31d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xhetiffv}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:03:37 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxhetiffv subscriptionId=sub-0 session=xhetiffv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:03:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxhetiffv subscriptionId=sub-1 session=xhetiffv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:03:42 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-2 session=xhetiffv
2026-02-06 02:03:42 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-3 session=xhetiffv
2026-02-06 02:03:42 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 02:03:42 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 02:03:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 02:03:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 02:03:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 6
2026-02-06 02:03:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 02:03:42 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 02:03:49 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 31
2026-02-06 02:03:49 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 31
2026-02-06 02:03:49 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:03:59 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:03:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:03:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:04:00 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 31
2026-02-06 02:04:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 31
2026-02-06 02:04:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 02:04:02 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 31
2026-02-06 02:04:02 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 31
2026-02-06 02:04:02 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:04:03 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:04:03 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:04:03 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:04:06 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=xhetiffv
2026-02-06 02:04:06 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-4 session=xhetiffv
2026-02-06 02:04:06 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-5 session=xhetiffv
2026-02-06 02:04:06 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 02:04:06 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 02:04:06 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 02:04:06 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 02:04:06 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 6
2026-02-06 02:04:06 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 02:04:06 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:08 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:08 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:09 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:10 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:11 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:11 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:12 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:12 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:13 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:14 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:14 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:15 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:15 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:17 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:17 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:17 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:17 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:17 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:17 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:18 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:18 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:18 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:18 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:20 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:21 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:22 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:23 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=xhetiffv, lookupDestination='/chat.typing'
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":true,"username":"nayanchy2004@gmail.c...(truncated)
2026-02-06 02:04:23 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:24 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=xhetiffv, lookupDestination='/chat.sendMessage'
2026-02-06 02:04:24 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=xhetiffv, lookupDestination='/chat.stopTyping'
2026-02-06 02:04:24 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 02:04:24 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 02:04:24 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":false,"timestamp":1770322764974}
2026-02-06 02:04:24 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:24 [clientInboundChannel-33] INFO  c.e.e.controller.ChatController -  WebSocket message from nayanchy2004@gmail.com (31) to 1
2026-02-06 02:04:24 [clientInboundChannel-33] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 1
2026-02-06 02:04:25 [clientInboundChannel-33] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=24
2026-02-06 02:04:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/6 session=null payload={"id":24,"conversationId":6,"senderId":31,"senderName":"Nayan Chy","receiverId":...(truncated)
2026-02-06 02:04:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:25 [clientInboundChannel-33] INFO  c.e.e.controller.ChatController -  Message 24 sent successfully
2026-02-06 02:04:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=xhetiffv payload={"id":24,"conversationId":6,"senderId":31,"senderName":"Nayan Chy","receiverId":...(truncated)
2026-02-06 02:04:25 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:04:25 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:04:25 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:04:25 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 02:04:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 02:04:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 02:04:25 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 02:04:25 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=xhetiffv, lookupDestination='/chat.stopTyping'
2026-02-06 02:04:25 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 02:04:25 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":31,"isTyping":false,"timestamp":1770322765749}
2026-02-06 02:04:25 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:04:29 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=xhetiffv
2026-02-06 02:04:29 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=xhetiffv
2026-02-06 02:04:29 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=xhetiffv
2026-02-06 02:04:29 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=xhetiffv
2026-02-06 02:04:29 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=xhetiffv
2026-02-06 02:04:29 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-6 session=xhetiffv
2026-02-06 02:04:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xhetiffv] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:04:29 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xhetiffv
2026-02-06 02:04:29 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: xhetiffv
2026-02-06 02:04:29 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 02:04:29 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 02:04:29 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770322769211,"userId":31}
2026-02-06 02:04:29 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xhetiffv
2026-02-06 02:04:29 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322717134, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5006d31d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xhetiffv}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5006d31d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xhetiffv}]
2026-02-06 02:04:39 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xhetiffv]
2026-02-06 02:04:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:04:39 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:04:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322779332
2026-02-06 02:04:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:04:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 02:04:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:04:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/558/zebur4pr/websocket
2026-02-06 02:04:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zebur4pr]
2026-02-06 02:04:39 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: zebur4pr
2026-02-06 02:04:39 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: zebur4pr
2026-02-06 02:04:39 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: zebur4pr
2026-02-06 02:04:39 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 02:04:39 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 02:04:39 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:04:39 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: zebur4pr
2026-02-06 02:04:39 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:04:39 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=zebur4pr
2026-02-06 02:04:39 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: zebur4pr
2026-02-06 02:04:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:04:39 [clientOutboundChannel-45] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjc3NiwiZXhwIjoxNzcwMzI2Mzc2fQ.-QpBViEZrZ9NwjjBRFj1FC3MLkOjRrzUhOYsioZNrL8], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322779375, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@103c0fcb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1efbf3bc, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=zebur4pr}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1efbf3bc, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=zebur4pr}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:04:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 02:04:39 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userzebur4pr subscriptionId=sub-0 session=zebur4pr user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:04:39 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userzebur4pr subscriptionId=sub-1 session=zebur4pr user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:04:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zebur4pr] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:04:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zebur4pr
2026-02-06 02:04:47 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: zebur4pr
2026-02-06 02:04:47 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 02:04:47 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 02:04:47 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770322787222,"userId":1}
2026-02-06 02:04:47 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zebur4pr
2026-02-06 02:04:47 [clientOutboundChannel-47] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322779375, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1efbf3bc, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=zebur4pr}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1efbf3bc, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=zebur4pr}]
2026-02-06 02:04:54 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [zebur4pr]
2026-02-06 02:04:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:04:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322796164
2026-02-06 02:04:56 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:04:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:04:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:04:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/233/kmcrdraj/websocket
2026-02-06 02:04:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:04:56 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kmcrdraj]
2026-02-06 02:04:56 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: kmcrdraj
2026-02-06 02:04:56 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: kmcrdraj
2026-02-06 02:04:56 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: kmcrdraj
2026-02-06 02:04:56 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 02:04:56 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 02:04:56 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:04:56 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: kmcrdraj
2026-02-06 02:04:56 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=kmcrdraj
2026-02-06 02:04:56 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: kmcrdraj
2026-02-06 02:04:56 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:04:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:04:56 [clientOutboundChannel-48] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjI3OTQsImV4cCI6MTc3MDMyNjM5NH0.EK3G-OnTWYxjCH6mBRuJ2gDT8tkRU6wtfO7La2oyL5U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322796209, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@113bd926, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4698b13a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kmcrdraj}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4698b13a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kmcrdraj}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:04:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:04:56 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userkmcrdraj subscriptionId=sub-0 session=kmcrdraj user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:04:56 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userkmcrdraj subscriptionId=sub-1 session=kmcrdraj user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:04:57 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-2 session=kmcrdraj
2026-02-06 02:04:57 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-3 session=kmcrdraj
2026-02-06 02:04:57 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 02:04:57 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 02:04:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 02:04:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 02:04:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 6
2026-02-06 02:04:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 02:04:57 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 02:05:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kmcrdraj] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:05:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kmcrdraj
2026-02-06 02:05:00 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: kmcrdraj
2026-02-06 02:05:00 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 02:05:00 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 02:05:00 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770322800292,"userId":31}
2026-02-06 02:05:00 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kmcrdraj
2026-02-06 02:05:00 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322796209, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4698b13a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kmcrdraj}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4698b13a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=kmcrdraj}]
2026-02-06 02:05:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:05:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322808998
2026-02-06 02:05:09 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:05:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:05:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 02:05:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:05:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/576/vjcvd44v/websocket
2026-02-06 02:05:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vjcvd44v]
2026-02-06 02:05:09 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: vjcvd44v
2026-02-06 02:05:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: vjcvd44v
2026-02-06 02:05:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: vjcvd44v
2026-02-06 02:05:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 02:05:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 02:05:09 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:05:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:05:09 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: vjcvd44v
2026-02-06 02:05:09 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=vjcvd44v
2026-02-06 02:05:09 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: vjcvd44v
2026-02-06 02:05:09 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:05:09 [clientOutboundChannel-45] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMjgwNywiZXhwIjoxNzcwMzI2NDA3fQ.62q8uyMK9Svd5pBg1KYXMrYEdeIV5PBVumTkOW7FhAc], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322809047, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@5fc6f987, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2f74f7e3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=vjcvd44v}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2f74f7e3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=vjcvd44v}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:05:09 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 02:05:09 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-uservjcvd44v subscriptionId=sub-0 session=vjcvd44v user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:05:09 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-uservjcvd44v subscriptionId=sub-1 session=vjcvd44v user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:05:09 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [kmcrdraj]
2026-02-06 02:05:10 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-2 session=vjcvd44v
2026-02-06 02:05:10 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-3 session=vjcvd44v
2026-02-06 02:05:10 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 1
2026-02-06 02:05:10 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 1
2026-02-06 02:05:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 1
2026-02-06 02:05:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 1
2026-02-06 02:05:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 6
2026-02-06 02:05:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 6
2026-02-06 02:05:10 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":1,"count":1}
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:17 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:17 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:18 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:18 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:18 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:18 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:18 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=vjcvd44v, lookupDestination='/chat.stopTyping'
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":false,"timestamp":1770322820161}
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:21 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:21 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:22 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:22 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:23 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:23 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:23 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:23 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:23 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:24 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:24 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:24 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:24 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:25 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:25 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:26 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:26 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:27 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:27 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:28 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:28 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:28 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:28 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:28 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:29 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:29 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:29 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:29 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:30 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:30 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:31 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:31 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:31 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:31 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:31 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:31 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:31 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:31 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:32 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:32 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:32 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:32 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:33 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:33 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:33 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:33 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:33 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:34 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:34 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:36 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:36 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:36 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:36 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:36 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:37 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:37 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:38 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:38 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:39 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:39 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:40 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:40 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:40 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:40 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:40 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:41 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:41 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:42 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:42 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:43 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:43 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:44 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:44 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:45 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:45 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:45 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:45 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:46 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:46 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:47 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=vjcvd44v, lookupDestination='/chat.typing'
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":true,"username":"admin123@gmail.com","...(truncated)
2026-02-06 02:05:47 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:48 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=vjcvd44v, lookupDestination='/chat.stopTyping'
2026-02-06 02:05:48 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=vjcvd44v, lookupDestination='/chat.sendMessage'
2026-02-06 02:05:48 [clientInboundChannel-34] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 02:05:48 [clientInboundChannel-31] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 02:05:48 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":false,"timestamp":1770322848300}
2026-02-06 02:05:48 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:48 [clientInboundChannel-31] INFO  c.e.e.controller.ChatController -  WebSocket message from admin123@gmail.com (1) to 31
2026-02-06 02:05:48 [clientInboundChannel-31] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 1 to user 31
2026-02-06 02:05:48 [clientInboundChannel-31] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=25
2026-02-06 02:05:48 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/6 session=null payload={"id":25,"conversationId":6,"senderId":1,"senderName":"Admin User","receiverId":...(truncated)
2026-02-06 02:05:48 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:48 [clientInboundChannel-31] INFO  c.e.e.controller.ChatController -  Message 25 sent successfully
2026-02-06 02:05:48 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=vjcvd44v payload={"id":25,"conversationId":6,"senderId":1,"senderName":"Admin User","receiverId":...(truncated)
2026-02-06 02:05:48 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:05:48 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:05:48 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 02:05:48 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 1
2026-02-06 02:05:48 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 1
2026-02-06 02:05:48 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 02:05:48 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":1,"count":0}
2026-02-06 02:05:49 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=vjcvd44v, lookupDestination='/chat.stopTyping'
2026-02-06 02:05:49 [clientInboundChannel-33] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 02:05:49 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/6 session=null payload={"conversationId":6,"userId":1,"isTyping":false,"timestamp":1770322849837}
2026-02-06 02:05:49 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 02:05:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vjcvd44v] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:05:50 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vjcvd44v
2026-02-06 02:05:50 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: vjcvd44v
2026-02-06 02:05:50 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 02:05:50 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 02:05:50 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770322850816,"userId":1}
2026-02-06 02:05:50 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vjcvd44v
2026-02-06 02:05:50 [clientOutboundChannel-46] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322809047, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2f74f7e3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=vjcvd44v}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2f74f7e3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=vjcvd44v}]
2026-02-06 02:05:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:05:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322858626
2026-02-06 02:05:58 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:05:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:05:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:05:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/974/cgr1wsc2/websocket
2026-02-06 02:05:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:05:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cgr1wsc2]
2026-02-06 02:05:58 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: cgr1wsc2
2026-02-06 02:05:58 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: cgr1wsc2
2026-02-06 02:05:58 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: cgr1wsc2
2026-02-06 02:05:58 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 02:05:58 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 02:05:58 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:05:58 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: cgr1wsc2
2026-02-06 02:05:58 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=cgr1wsc2
2026-02-06 02:05:58 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: cgr1wsc2
2026-02-06 02:05:58 [clientOutboundChannel-45] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjI4NTYsImV4cCI6MTc3MDMyNjQ1Nn0.gHaTBMHkQXIY1hkTRkn07DuL0ftNs5pAZdEwFs3-Rdw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322858680, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@570bd76f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3fe906c8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=cgr1wsc2}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3fe906c8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=cgr1wsc2}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:05:58 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:05:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:05:58 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usercgr1wsc2 subscriptionId=sub-0 session=cgr1wsc2 user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:05:58 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usercgr1wsc2 subscriptionId=sub-1 session=cgr1wsc2 user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:05:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:05:59 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [vjcvd44v]
2026-02-06 02:06:02 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-2 session=cgr1wsc2
2026-02-06 02:06:02 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-3 session=cgr1wsc2
2026-02-06 02:06:02 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 02:06:02 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 02:06:02 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 02:06:02 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 02:06:02 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 02:06:02 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 6
2026-02-06 02:06:02 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":1}
2026-02-06 02:06:18 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:06:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:06:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:06:19 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 31
2026-02-06 02:06:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 31
2026-02-06 02:06:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:06:20 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=cgr1wsc2
2026-02-06 02:06:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=cgr1wsc2
2026-02-06 02:06:20 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=cgr1wsc2
2026-02-06 02:06:20 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=cgr1wsc2
2026-02-06 02:06:20 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=cgr1wsc2
2026-02-06 02:06:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cgr1wsc2] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:06:20 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cgr1wsc2
2026-02-06 02:06:20 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: cgr1wsc2
2026-02-06 02:06:20 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 02:06:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 02:06:20 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770322880702,"userId":31}
2026-02-06 02:06:20 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cgr1wsc2
2026-02-06 02:06:20 [clientOutboundChannel-48] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322858680, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3fe906c8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=cgr1wsc2}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3fe906c8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=cgr1wsc2}]
2026-02-06 02:06:29 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [cgr1wsc2]
2026-02-06 02:06:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:06:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322900310
2026-02-06 02:06:40 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:06:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:06:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:06:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/148/zlh4zn5n/websocket
2026-02-06 02:06:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:06:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zlh4zn5n]
2026-02-06 02:06:40 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: zlh4zn5n
2026-02-06 02:06:40 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: zlh4zn5n
2026-02-06 02:06:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 02:06:40 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: zlh4zn5n
2026-02-06 02:06:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 02:06:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 02:06:40 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 02:06:40 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 02:06:40 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:06:40 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: zlh4zn5n
2026-02-06 02:06:40 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: zlh4zn5n
2026-02-06 02:06:40 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=zlh4zn5n
2026-02-06 02:06:40 [clientOutboundChannel-46] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjI4NTYsImV4cCI6MTc3MDMyNjQ1Nn0.gHaTBMHkQXIY1hkTRkn07DuL0ftNs5pAZdEwFs3-Rdw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322900442, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@627948c5, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6cbeaafa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zlh4zn5n}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6cbeaafa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zlh4zn5n}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:06:40 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userzlh4zn5n subscriptionId=sub-0 session=zlh4zn5n user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:06:40 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userzlh4zn5n subscriptionId=sub-1 session=zlh4zn5n user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:06:48 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=zlh4zn5n
2026-02-06 02:06:48 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=zlh4zn5n
2026-02-06 02:06:48 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=zlh4zn5n
2026-02-06 02:06:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zlh4zn5n] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:06:48 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zlh4zn5n
2026-02-06 02:06:48 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: zlh4zn5n
2026-02-06 02:06:48 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 02:06:48 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 02:06:48 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770322908480,"userId":31}
2026-02-06 02:06:48 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zlh4zn5n
2026-02-06 02:06:48 [clientOutboundChannel-47] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322900442, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6cbeaafa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zlh4zn5n}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6cbeaafa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zlh4zn5n}]
2026-02-06 02:06:49 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 02:06:54 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [zlh4zn5n]
2026-02-06 02:07:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:07:26 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:07:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770322946348
2026-02-06 02:07:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:07:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 34
2026-02-06 02:07:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:07:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/590/hr2rkmhj/websocket
2026-02-06 02:07:26 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 34
2026-02-06 02:07:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hr2rkmhj]
2026-02-06 02:07:26 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: hr2rkmhj
2026-02-06 02:07:26 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: hr2rkmhj
2026-02-06 02:07:26 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ganesh@gmail.com - Session: hr2rkmhj
2026-02-06 02:07:26 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ganesh@gmail.com
2026-02-06 02:07:26 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ganesh@gmail.com
2026-02-06 02:07:26 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:07:26 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ganesh@gmail.com (ID: 34), Session: hr2rkmhj
2026-02-06 02:07:26 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ganesh@gmail.com session=hr2rkmhj
2026-02-06 02:07:26 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: hr2rkmhj
2026-02-06 02:07:26 [clientOutboundChannel-49] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MzQsInN1YiI6ImdhbmVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjI5NDEsImV4cCI6MTc3MDMyNjU0MX0.i6Ffqmq_0fA3L5H5bvXDixLgGvXT_bGJfsBj3U69qPA], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770322946449, userId=34, username=ganesh@gmail.com}, simpHeartbeat=[J@71690cc4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7faefc99, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=hr2rkmhj}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7faefc99, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=hr2rkmhj}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:07:26 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userhr2rkmhj subscriptionId=sub-0 session=hr2rkmhj user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:07:26 [clientInboundChannel-32] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userhr2rkmhj subscriptionId=sub-1 session=hr2rkmhj user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:07:30 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 34
2026-02-06 02:07:30 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 34
2026-02-06 02:07:30 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:07:32 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 34
2026-02-06 02:07:35 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=hr2rkmhj
2026-02-06 02:07:35 [clientInboundChannel-33] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=hr2rkmhj
2026-02-06 02:07:35 [clientInboundChannel-31] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=hr2rkmhj
2026-02-06 02:07:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hr2rkmhj] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:07:35 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hr2rkmhj
2026-02-06 02:07:35 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ganesh@gmail.com (ID: 34), Session: hr2rkmhj
2026-02-06 02:07:35 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 34 went OFFLINE (last session closed)
2026-02-06 02:07:35 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 34 status to OFFLINE
2026-02-06 02:07:35 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/34 session=null payload={"status":"OFFLINE","timestamp":1770322955513,"userId":34}
2026-02-06 02:07:35 [clientInboundChannel-34] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hr2rkmhj
2026-02-06 02:07:35 [clientOutboundChannel-45] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770322946449, userId=34, username=ganesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7faefc99, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=hr2rkmhj}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7faefc99, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=hr2rkmhj}]
2026-02-06 02:07:44 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [hr2rkmhj]
2026-02-06 02:10:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:10:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770323137736
2026-02-06 02:10:37 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:10:37 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:10:37 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:10:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:10:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/349/vyisuawo/websocket
2026-02-06 02:10:37 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=vyisuawo]
2026-02-06 02:10:37 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: vyisuawo
2026-02-06 02:10:37 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: vyisuawo
2026-02-06 02:10:37 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: vyisuawo
2026-02-06 02:10:37 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 02:10:37 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:10:37 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:10:37 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 02:10:37 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:10:37 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: vyisuawo
2026-02-06 02:10:37 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: vyisuawo
2026-02-06 02:10:37 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=vyisuawo
2026-02-06 02:10:37 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:10:37 [clientOutboundChannel-50] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzIzMTMzLCJleHAiOjE3NzAzMjY3MzN9.Wz5evdzvHS-ftzvAMMuMGIg7C_q38tD0FU2M8q5AZ24], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770323137789, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@3a33c201, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@34f43b37, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vyisuawo}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@34f43b37, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vyisuawo}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:10:37 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-uservyisuawo subscriptionId=sub-0 session=vyisuawo user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:10:37 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-uservyisuawo subscriptionId=sub-1 session=vyisuawo user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:10:39 [clientInboundChannel-36] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=vyisuawo
2026-02-06 02:10:39 [clientInboundChannel-37] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=vyisuawo
2026-02-06 02:10:39 [clientInboundChannel-38] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=vyisuawo
2026-02-06 02:10:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=vyisuawo] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:10:39 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session vyisuawo
2026-02-06 02:10:39 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: vyisuawo
2026-02-06 02:10:39 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 02:10:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 02:10:39 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770323139169,"userId":32}
2026-02-06 02:10:39 [clientInboundChannel-35] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=vyisuawo
2026-02-06 02:10:39 [clientOutboundChannel-52] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770323137789, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@34f43b37, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vyisuawo}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@34f43b37, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=vyisuawo}]
2026-02-06 02:10:40 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 02:10:44 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [vyisuawo]
2026-02-06 02:10:59 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 02:13:57 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 02:15:33 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 02:17:21 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.EmailServiceImpl - Receipt email sent to ritulsingh079@gmail.com
2026-02-06 02:17:26 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.EmailServiceImpl - Booking confirmation email sent to ritulsingh079@gmail.com
2026-02-06 02:17:28 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 02:17:55 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:17:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:17:55 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770323575803
2026-02-06 02:17:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:17:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:17:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:17:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/544/usw2ntui/websocket
2026-02-06 02:17:55 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=usw2ntui]
2026-02-06 02:17:55 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: usw2ntui
2026-02-06 02:17:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: usw2ntui
2026-02-06 02:17:55 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:17:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:17:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: usw2ntui
2026-02-06 02:17:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:17:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 02:17:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 02:17:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:17:55 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: usw2ntui
2026-02-06 02:17:55 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=usw2ntui
2026-02-06 02:17:55 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: usw2ntui
2026-02-06 02:17:55 [clientOutboundChannel-53] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzIzNDMwLCJleHAiOjE3NzAzMjcwMzB9.O2Tr4jVFcLRYbjtuiP8Am-Fd37hULI9UFdaVkjW9vHY], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770323575902, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@23acb814, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2d6b4211, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=usw2ntui}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2d6b4211, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=usw2ntui}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:17:55 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userusw2ntui subscriptionId=sub-0 session=usw2ntui user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:17:55 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userusw2ntui subscriptionId=sub-1 session=usw2ntui user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:17:57 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 02:17:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 02:17:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:18:03 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 02:18:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 02:18:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:18:09 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:18:09 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:18:09 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:18:10 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 02:18:23 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=usw2ntui
2026-02-06 02:18:23 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=usw2ntui
2026-02-06 02:18:23 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=usw2ntui
2026-02-06 02:18:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=usw2ntui] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:18:23 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session usw2ntui
2026-02-06 02:18:23 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: usw2ntui
2026-02-06 02:18:23 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 02:18:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 02:18:23 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770323603650,"userId":32}
2026-02-06 02:18:23 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=usw2ntui
2026-02-06 02:18:23 [clientOutboundChannel-55] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770323575902, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2d6b4211, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=usw2ntui}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2d6b4211, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=usw2ntui}]
2026-02-06 02:18:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:18:24 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770323604660
2026-02-06 02:18:24 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:18:24 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/494/2yfhdsl2/websocket
2026-02-06 02:18:24 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2yfhdsl2]
2026-02-06 02:18:24 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 2yfhdsl2
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 2yfhdsl2
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 2yfhdsl2
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 02:18:24 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:18:24 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 2yfhdsl2
2026-02-06 02:18:24 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=2yfhdsl2
2026-02-06 02:18:24 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 2yfhdsl2
2026-02-06 02:18:24 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:18:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:18:24 [clientOutboundChannel-56] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzIzNDMwLCJleHAiOjE3NzAzMjcwMzB9.O2Tr4jVFcLRYbjtuiP8Am-Fd37hULI9UFdaVkjW9vHY], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770323604735, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@fc19362, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1067cea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2yfhdsl2}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1067cea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2yfhdsl2}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:18:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:18:24 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user2yfhdsl2 subscriptionId=sub-0 session=2yfhdsl2 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:18:24 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user2yfhdsl2 subscriptionId=sub-1 session=2yfhdsl2 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:18:27 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=2yfhdsl2
2026-02-06 02:18:27 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=2yfhdsl2
2026-02-06 02:18:27 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=2yfhdsl2
2026-02-06 02:18:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2yfhdsl2] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:18:27 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2yfhdsl2
2026-02-06 02:18:27 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 2yfhdsl2
2026-02-06 02:18:27 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 02:18:27 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 02:18:27 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770323607962,"userId":32}
2026-02-06 02:18:27 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2yfhdsl2
2026-02-06 02:18:27 [clientOutboundChannel-54] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770323604735, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1067cea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2yfhdsl2}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1067cea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2yfhdsl2}]
2026-02-06 02:18:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:18:29 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770323609068
2026-02-06 02:18:29 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:18:29 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:18:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:18:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/017/0jpl4n4p/websocket
2026-02-06 02:18:29 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:18:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0jpl4n4p]
2026-02-06 02:18:29 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 0jpl4n4p
2026-02-06 02:18:29 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 0jpl4n4p
2026-02-06 02:18:29 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 0jpl4n4p
2026-02-06 02:18:29 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:18:29 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:18:29 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 02:18:29 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:18:29 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 02:18:29 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:18:29 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 0jpl4n4p
2026-02-06 02:18:29 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=0jpl4n4p
2026-02-06 02:18:29 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 0jpl4n4p
2026-02-06 02:18:29 [clientOutboundChannel-55] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzIzNDMwLCJleHAiOjE3NzAzMjcwMzB9.O2Tr4jVFcLRYbjtuiP8Am-Fd37hULI9UFdaVkjW9vHY], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770323609138, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@1f95053a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1152f8b8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0jpl4n4p}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1152f8b8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0jpl4n4p}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:18:29 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user0jpl4n4p subscriptionId=sub-0 session=0jpl4n4p user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:18:29 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user0jpl4n4p subscriptionId=sub-1 session=0jpl4n4p user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:18:29 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [usw2ntui]
2026-02-06 02:18:30 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:30 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:30 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 02:18:32 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 02:18:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 02:18:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:18:33 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 02:18:34 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [2yfhdsl2]
2026-02-06 02:18:34 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 02:18:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 02:18:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 02:18:35 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 02:18:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 02:18:36 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 02:18:36 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 02:18:36 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:18:36 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=0jpl4n4p
2026-02-06 02:18:36 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=0jpl4n4p
2026-02-06 02:18:36 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=0jpl4n4p
2026-02-06 02:18:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0jpl4n4p] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:18:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0jpl4n4p
2026-02-06 02:18:36 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 0jpl4n4p
2026-02-06 02:18:36 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 02:18:36 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 02:18:37 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770323617003,"userId":32}
2026-02-06 02:18:37 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0jpl4n4p
2026-02-06 02:18:37 [clientOutboundChannel-53] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770323609138, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1152f8b8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0jpl4n4p}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1152f8b8, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0jpl4n4p}]
2026-02-06 02:18:44 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [0jpl4n4p]
2026-02-06 02:18:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:18:58 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770323638138
2026-02-06 02:18:58 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:18:58 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:18:58 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 34
2026-02-06 02:18:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:18:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/099/03w21kx3/websocket
2026-02-06 02:18:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=03w21kx3]
2026-02-06 02:18:58 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 03w21kx3
2026-02-06 02:18:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 03w21kx3
2026-02-06 02:18:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ganesh@gmail.com - Session: 03w21kx3
2026-02-06 02:18:58 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:18:58 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:18:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ganesh@gmail.com
2026-02-06 02:18:58 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 34
2026-02-06 02:18:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ganesh@gmail.com
2026-02-06 02:18:58 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:18:58 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ganesh@gmail.com (ID: 34), Session: 03w21kx3
2026-02-06 02:18:58 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ganesh@gmail.com session=03w21kx3
2026-02-06 02:18:58 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 03w21kx3
2026-02-06 02:18:58 [clientOutboundChannel-54] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MzQsInN1YiI6ImdhbmVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjM2MzAsImV4cCI6MTc3MDMyNzIzMH0.jw_nEyNYrEONjsm4FR2G2EyTvwUzR1yH1LQgWA7IKUw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770323638207, userId=34, username=ganesh@gmail.com}, simpHeartbeat=[J@5a912f8b, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5456caa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=03w21kx3}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5456caa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=03w21kx3}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:18:58 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user03w21kx3 subscriptionId=sub-0 session=03w21kx3 user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:18:58 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user03w21kx3 subscriptionId=sub-1 session=03w21kx3 user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:18:59 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 34
2026-02-06 02:18:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 34
2026-02-06 02:18:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:19:02 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:19:02 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:19:02 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 34
2026-02-06 02:19:03 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching HOST_ADMIN conversations for user 34
2026-02-06 02:19:03 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching HOST_ADMIN conversations for user 34
2026-02-06 02:19:03 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 HOST_ADMIN conversations
2026-02-06 02:19:04 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:19:04 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:19:04 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 34
2026-02-06 02:19:06 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=03w21kx3
2026-02-06 02:19:06 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=03w21kx3
2026-02-06 02:19:06 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=03w21kx3
2026-02-06 02:19:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=03w21kx3] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:19:06 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 03w21kx3
2026-02-06 02:19:06 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ganesh@gmail.com (ID: 34), Session: 03w21kx3
2026-02-06 02:19:06 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 34 went OFFLINE (last session closed)
2026-02-06 02:19:06 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 34 status to OFFLINE
2026-02-06 02:19:06 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/34 session=null payload={"status":"OFFLINE","timestamp":1770323646098,"userId":34}
2026-02-06 02:19:06 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=03w21kx3
2026-02-06 02:19:06 [clientOutboundChannel-56] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770323638207, userId=34, username=ganesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5456caa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=03w21kx3}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5456caa9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=03w21kx3}]
2026-02-06 02:19:14 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [03w21kx3]
2026-02-06 02:19:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:19:32 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770323672978
2026-02-06 02:19:32 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:19:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:19:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:19:32 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/070/ftqwalxq/websocket
2026-02-06 02:19:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 02:19:33 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ftqwalxq]
2026-02-06 02:19:33 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ftqwalxq
2026-02-06 02:19:33 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ftqwalxq
2026-02-06 02:19:33 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: ftqwalxq
2026-02-06 02:19:33 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 02:19:33 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 02:19:33 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:19:33 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: ftqwalxq
2026-02-06 02:19:33 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ftqwalxq
2026-02-06 02:19:33 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=ftqwalxq
2026-02-06 02:19:33 [clientOutboundChannel-53] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDMyMzY3MSwiZXhwIjoxNzcwMzI3MjcxfQ.WYw50C2IowOsmk85n3N4SeEofe2HWgCxSQEb4B6H2ng], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770323673032, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@6c56482a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a7c21ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ftqwalxq}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a7c21ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ftqwalxq}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:19:33 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:19:33 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userftqwalxq subscriptionId=sub-0 session=ftqwalxq user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:19:33 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userftqwalxq subscriptionId=sub-1 session=ftqwalxq user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:19:33 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:19:33 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 1
2026-02-06 02:19:37 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'ga'
2026-02-06 02:19:37 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'ga'
2026-02-06 02:19:42 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Admin 1 initiating chat with user 34
2026-02-06 02:19:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 initiating chat with user 34
2026-02-06 02:19:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new HOST_ADMIN conversation between users 34 and 1
2026-02-06 02:19:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=7
2026-02-06 02:19:42 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/7 id=sub-2 session=ftqwalxq
2026-02-06 02:19:42 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/7 id=sub-3 session=ftqwalxq
2026-02-06 02:19:42 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 02:19:42 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 02:19:42 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 1
2026-02-06 02:19:42 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 7 as read by user 1
2026-02-06 02:19:42 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 7 by user 1
2026-02-06 02:19:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 7 as read by user 1
2026-02-06 02:19:42 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 7 by user 1
2026-02-06 02:19:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 7
2026-02-06 02:19:42 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 7
2026-02-06 02:19:42 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/7 session=null payload={"conversationId":7,"readBy":1,"count":0}
2026-02-06 02:19:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ftqwalxq] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:19:46 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ftqwalxq
2026-02-06 02:19:46 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: ftqwalxq
2026-02-06 02:19:46 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 02:19:46 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 02:19:46 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770323686714,"userId":1}
2026-02-06 02:19:46 [clientInboundChannel-40] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ftqwalxq
2026-02-06 02:19:46 [clientOutboundChannel-54] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770323673032, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a7c21ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ftqwalxq}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a7c21ac, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=ftqwalxq}]
2026-02-06 02:19:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:19:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770323692740
2026-02-06 02:19:52 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:19:52 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:19:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4d678e16
2026-02-06 02:19:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/398/ted54xpf/websocket
2026-02-06 02:19:52 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 34
2026-02-06 02:19:52 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ted54xpf]
2026-02-06 02:19:52 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ted54xpf
2026-02-06 02:19:52 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ted54xpf
2026-02-06 02:19:52 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ganesh@gmail.com - Session: ted54xpf
2026-02-06 02:19:52 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ganesh@gmail.com
2026-02-06 02:19:52 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ganesh@gmail.com
2026-02-06 02:19:52 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 02:19:52 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ganesh@gmail.com (ID: 34), Session: ted54xpf
2026-02-06 02:19:52 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ted54xpf
2026-02-06 02:19:52 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ganesh@gmail.com session=ted54xpf
2026-02-06 02:19:52 [clientOutboundChannel-55] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MzQsInN1YiI6ImdhbmVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzMjM2OTEsImV4cCI6MTc3MDMyNzI5MX0.si1JUaeKqTjEMZ1jrU5bVUGfnGcu4Zg9R8EWjVwa2EA], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770323692907, userId=34, username=ganesh@gmail.com}, simpHeartbeat=[J@506ff283, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@67648161, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ted54xpf}], simpHeartbeat=[J@344b7177, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@67648161, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ted54xpf}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 02:19:52 [clientInboundChannel-42] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userted54xpf subscriptionId=sub-0 session=ted54xpf user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:19:52 [clientInboundChannel-41] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userted54xpf subscriptionId=sub-1 session=ted54xpf user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 02:19:52 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:19:52 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:19:52 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 34
2026-02-06 02:19:54 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ftqwalxq]
2026-02-06 02:20:03 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching HOST_ADMIN conversations for user 34
2026-02-06 02:20:03 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching HOST_ADMIN conversations for user 34
2026-02-06 02:20:03 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 HOST_ADMIN conversations
2026-02-06 02:20:03 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 34
2026-02-06 02:20:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 34
2026-02-06 02:20:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 02:20:04 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 02:20:04 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 02:20:04 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 34
2026-02-06 02:20:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ted54xpf] closed with CloseStatus[code=1000, reason=null]
2026-02-06 02:20:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ted54xpf
2026-02-06 02:20:06 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ganesh@gmail.com (ID: 34), Session: ted54xpf
2026-02-06 02:20:06 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 34 went OFFLINE (last session closed)
2026-02-06 02:20:06 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 34 status to OFFLINE
2026-02-06 02:20:06 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/34 session=null payload={"status":"OFFLINE","timestamp":1770323706102,"userId":34}
2026-02-06 02:20:06 [clientInboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ted54xpf
2026-02-06 02:20:06 [clientOutboundChannel-56] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770323692907, userId=34, username=ganesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@67648161, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ted54xpf}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@67648161, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ted54xpf}]
2026-02-06 02:20:14 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ted54xpf]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 02:20:41 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 02:20:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 02:20:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@76f0fc8]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 02:20:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 02:20:41 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 02:20:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 02:20:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 11:32:53 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 18508 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 11:32:53 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 11:32:53 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 11:32:53 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 11:32:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 11:32:55 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 280 ms. Found 9 JPA repository interfaces.
2026-02-06 11:32:58 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 11:32:58 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 11:32:58 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 11:32:58 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 11:32:58 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5559 ms
2026-02-06 11:32:59 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 11:32:59 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 11:32:59 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 11:33:00 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 11:33:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 11:33:01 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@785a8863
2026-02-06 11:33:01 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 11:33:02 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 11:33:02 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 11:33:05 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 11:33:05 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 11:33:06 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 11:33:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 11:33:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 11:33:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 11:33:14 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 11:33:14 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 11:33:15 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 11:33:15 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 11:33:15 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 11:33:15 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 11:33:15 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@730641e7]
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@730641e7]
2026-02-06 11:33:15 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@730641e7]]
2026-02-06 11:33:15 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 11:33:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 11:33:15 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 11:33:15 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 11:33:15 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 23.883 seconds (process running for 24.425)
2026-02-06 11:33:16 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Activated booking ID: 46
2026-02-06 11:33:16 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 1, Completed: 0
2026-02-06 11:33:23 [http-nio-8080-exec-6] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 11:33:23 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 11:33:23 [http-nio-8080-exec-6] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-06 11:33:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7ea2dc29
2026-02-06 11:33:26 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770356906897
2026-02-06 11:33:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7ea2dc29
2026-02-06 11:33:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/422/xrekuphw/websocket
2026-02-06 11:33:26 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 11:33:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 11:33:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 34
2026-02-06 11:33:27 [http-nio-8080-exec-6] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 11:33:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xrekuphw]
2026-02-06 11:33:27 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 11:33:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 11:33:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 34
2026-02-06 11:33:27 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: xrekuphw
2026-02-06 11:33:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: xrekuphw
2026-02-06 11:33:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ganesh@gmail.com - Session: xrekuphw
2026-02-06 11:33:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ganesh@gmail.com
2026-02-06 11:33:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ganesh@gmail.com
2026-02-06 11:33:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:33:27 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ganesh@gmail.com (ID: 34), Session: xrekuphw
2026-02-06 11:33:27 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ganesh@gmail.com session=xrekuphw
2026-02-06 11:33:27 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: xrekuphw
2026-02-06 11:33:27 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MzQsInN1YiI6ImdhbmVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTY5MDQsImV4cCI6MTc3MDM2MDUwNH0.FPAorD73u01fRPOgJMMGf7jS0agnaYFD6zDNWxNHF1w], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770356907220, userId=34, username=ganesh@gmail.com}, simpHeartbeat=[J@4db84dbc, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2874f844, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xrekuphw}], simpHeartbeat=[J@18dbcd77, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2874f844, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xrekuphw}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:33:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxrekuphw subscriptionId=sub-0 session=xrekuphw user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:33:27 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxrekuphw subscriptionId=sub-1 session=xrekuphw user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:33:28 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=xrekuphw
2026-02-06 11:33:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=xrekuphw
2026-02-06 11:33:28 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=xrekuphw
2026-02-06 11:33:28 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xrekuphw] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:33:28 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xrekuphw
2026-02-06 11:33:28 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ganesh@gmail.com (ID: 34), Session: xrekuphw
2026-02-06 11:33:28 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 34 went OFFLINE (last session closed)
2026-02-06 11:33:28 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 34 status to OFFLINE
2026-02-06 11:33:28 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/34 session=null payload={"status":"OFFLINE","timestamp":1770356908781,"userId":34}
2026-02-06 11:33:28 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xrekuphw
2026-02-06 11:33:28 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770356907220, userId=34, username=ganesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2874f844, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xrekuphw}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2874f844, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xrekuphw}]
2026-02-06 11:33:36 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xrekuphw]
2026-02-06 11:34:15 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 21], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 13, active threads = 1, queued tasks = 1, completed tasks = 10]
2026-02-06 11:34:16 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Completed booking ID: 46
2026-02-06 11:34:16 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 0, Completed: 1
2026-02-06 11:35:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7ea2dc29
2026-02-06 11:35:13 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770357013346
2026-02-06 11:35:13 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:35:13 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:35:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7ea2dc29
2026-02-06 11:35:13 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:35:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/570/0kwh1f3k/websocket
2026-02-06 11:35:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0kwh1f3k]
2026-02-06 11:35:13 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 0kwh1f3k
2026-02-06 11:35:13 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 0kwh1f3k
2026-02-06 11:35:13 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 0kwh1f3k
2026-02-06 11:35:13 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 11:35:13 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:35:13 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 11:35:13 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:35:13 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 0kwh1f3k
2026-02-06 11:35:13 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:35:13 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=0kwh1f3k
2026-02-06 11:35:13 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 0kwh1f3k
2026-02-06 11:35:13 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU2OTQxLCJleHAiOjE3NzAzNjA1NDF9.RkcOot4y5kZChlqOIKO4DESDZ1ivz1wHnBkyR81arHQ], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770357013425, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@765db029, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@789a4092, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0kwh1f3k}], simpHeartbeat=[J@18dbcd77, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@789a4092, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0kwh1f3k}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:35:13 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:35:13 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user0kwh1f3k subscriptionId=sub-0 session=0kwh1f3k user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:35:13 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user0kwh1f3k subscriptionId=sub-1 session=0kwh1f3k user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:35:15 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 11:35:15 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 11:35:15 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 11:35:16 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 11:35:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 11:35:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 11:35:17 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:35:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:35:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:35:21 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 11:35:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 11:35:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 11:35:23 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 11:35:23 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 11:35:23 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 11:35:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0kwh1f3k] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:35:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0kwh1f3k
2026-02-06 11:35:29 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 0kwh1f3k
2026-02-06 11:35:29 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 11:35:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 11:35:29 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770357029667,"userId":32}
2026-02-06 11:35:29 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0kwh1f3k
2026-02-06 11:35:29 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770357013425, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@789a4092, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0kwh1f3k}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@789a4092, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0kwh1f3k}]
2026-02-06 11:35:36 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [0kwh1f3k]
2026-02-06 11:35:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7ea2dc29
2026-02-06 11:35:38 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770357038319
2026-02-06 11:35:38 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 11:35:38 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 11:35:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7ea2dc29
2026-02-06 11:35:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/748/nph4ednc/websocket
2026-02-06 11:35:38 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 34
2026-02-06 11:35:38 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nph4ednc]
2026-02-06 11:35:38 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: nph4ednc
2026-02-06 11:35:38 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: nph4ednc
2026-02-06 11:35:38 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ganesh@gmail.com - Session: nph4ednc
2026-02-06 11:35:38 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ganesh@gmail.com
2026-02-06 11:35:38 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ganesh@gmail.com
2026-02-06 11:35:38 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:35:38 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ganesh@gmail.com (ID: 34), Session: nph4ednc
2026-02-06 11:35:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ganesh@gmail.com session=nph4ednc
2026-02-06 11:35:38 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: nph4ednc
2026-02-06 11:35:38 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MzQsInN1YiI6ImdhbmVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTcwMzYsImV4cCI6MTc3MDM2MDYzNn0.2w7n1_CkL1KW3rYdcHIVXbX6kixnLGZ4Xj0oBD9x1bQ], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770357038374, userId=34, username=ganesh@gmail.com}, simpHeartbeat=[J@67faba3b, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@693d58b4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=nph4ednc}], simpHeartbeat=[J@18dbcd77, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@693d58b4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=nph4ednc}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:35:38 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usernph4ednc subscriptionId=sub-0 session=nph4ednc user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:35:38 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 11:35:38 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usernph4ednc subscriptionId=sub-1 session=nph4ednc user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:35:38 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 11:35:38 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 34
2026-02-06 11:35:43 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=nph4ednc
2026-02-06 11:35:43 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=nph4ednc
2026-02-06 11:35:43 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=nph4ednc
2026-02-06 11:35:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nph4ednc] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:35:43 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nph4ednc
2026-02-06 11:35:43 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ganesh@gmail.com (ID: 34), Session: nph4ednc
2026-02-06 11:35:43 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 34 went OFFLINE (last session closed)
2026-02-06 11:35:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 34 status to OFFLINE
2026-02-06 11:35:43 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/34 session=null payload={"status":"OFFLINE","timestamp":1770357043867,"userId":34}
2026-02-06 11:35:43 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nph4ednc
2026-02-06 11:35:43 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770357038374, userId=34, username=ganesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@693d58b4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=nph4ednc}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@693d58b4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=nph4ednc}]
2026-02-06 11:35:51 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [nph4ednc]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 11:37:00 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 11:37:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 11:37:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@730641e7]]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@730641e7]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@730641e7]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 11:37:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 11:37:00 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 11:37:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 11:37:00 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 11:46:21 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 21736 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 11:46:21 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 11:46:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 11:46:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 11:46:22 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 11:46:22 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 120 ms. Found 9 JPA repository interfaces.
2026-02-06 11:46:23 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 11:46:23 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 11:46:23 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 11:46:23 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 11:46:23 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2377 ms
2026-02-06 11:46:24 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 11:46:24 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 11:46:24 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 11:46:24 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 11:46:24 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 11:46:24 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@61b139e6
2026-02-06 11:46:24 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 11:46:24 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 11:46:24 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 11:46:26 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 11:46:26 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 11:46:26 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 11:46:30 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 11:46:30 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 11:46:30 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 11:46:30 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 11:46:31 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 11:46:31 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 11:46:31 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 11:46:31 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 11:46:31 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 11:46:31 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 11:46:32 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 11:46:32 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 11:46:32 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 11:46:32 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5c155ccf]
2026-02-06 11:46:32 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5c155ccf]
2026-02-06 11:46:32 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5c155ccf]]
2026-02-06 11:46:32 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 11:46:32 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 11:46:32 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 11:46:32 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 11:46:32 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 11:46:32 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 11.536 seconds (process running for 12.341)
2026-02-06 11:47:00 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 11:47:00 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 11:47:00 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-06 11:47:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:47:06 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:47:06 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:47:06 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770357726526
2026-02-06 11:47:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:47:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/375/i3t5n35e/websocket
2026-02-06 11:47:06 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:47:06 [http-nio-8080-exec-3] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 11:47:06 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:47:06 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:47:06 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:47:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=i3t5n35e]
2026-02-06 11:47:06 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: i3t5n35e
2026-02-06 11:47:06 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: i3t5n35e
2026-02-06 11:47:06 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: i3t5n35e
2026-02-06 11:47:06 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 11:47:06 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 11:47:06 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:47:06 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: i3t5n35e
2026-02-06 11:47:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=i3t5n35e
2026-02-06 11:47:06 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: i3t5n35e
2026-02-06 11:47:06 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770357726764, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@55620d9, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2ca4631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=i3t5n35e}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2ca4631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=i3t5n35e}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:47:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useri3t5n35e subscriptionId=sub-1 session=i3t5n35e user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:47:06 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useri3t5n35e subscriptionId=sub-0 session=i3t5n35e user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:47:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=i3t5n35e
2026-02-06 11:47:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=i3t5n35e
2026-02-06 11:47:09 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=i3t5n35e
2026-02-06 11:47:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=i3t5n35e] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:47:09 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session i3t5n35e
2026-02-06 11:47:09 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: i3t5n35e
2026-02-06 11:47:09 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 11:47:09 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 11:47:09 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770357729474,"status":"OFFLINE","userId":32}
2026-02-06 11:47:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=i3t5n35e
2026-02-06 11:47:09 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770357726764, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2ca4631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=i3t5n35e}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2ca4631d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=i3t5n35e}]
2026-02-06 11:47:16 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [i3t5n35e]
2026-02-06 11:47:18 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 11:47:32 [MessageBroker-6] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 21], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 9, active threads = 1, queued tasks = 1, completed tasks = 6]
2026-02-06 11:47:37 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 11:47:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:47:39 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770357759465
2026-02-06 11:47:39 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:47:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:47:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/750/efyoh2u5/websocket
2026-02-06 11:47:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:47:39 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=efyoh2u5]
2026-02-06 11:47:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:47:39 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: efyoh2u5
2026-02-06 11:47:39 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: efyoh2u5
2026-02-06 11:47:39 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: efyoh2u5
2026-02-06 11:47:39 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 11:47:39 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 11:47:39 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:47:39 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: efyoh2u5
2026-02-06 11:47:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=efyoh2u5
2026-02-06 11:47:39 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: efyoh2u5
2026-02-06 11:47:39 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:47:39 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770357759538, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@1474c623, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ab33add, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=efyoh2u5}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ab33add, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=efyoh2u5}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:47:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:47:39 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userefyoh2u5 subscriptionId=sub-0 session=efyoh2u5 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:47:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userefyoh2u5 subscriptionId=sub-1 session=efyoh2u5 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:47:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:47:41 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 11:47:41 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 11:47:41 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 11:47:42 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:47:42 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:47:42 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:47:43 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=efyoh2u5
2026-02-06 11:47:43 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=efyoh2u5
2026-02-06 11:47:43 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=efyoh2u5
2026-02-06 11:47:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=efyoh2u5] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:47:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session efyoh2u5
2026-02-06 11:47:43 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: efyoh2u5
2026-02-06 11:47:43 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 11:47:43 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 11:47:43 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770357763349,"status":"OFFLINE","userId":32}
2026-02-06 11:47:43 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=efyoh2u5
2026-02-06 11:47:43 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770357759538, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ab33add, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=efyoh2u5}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1ab33add, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=efyoh2u5}]
2026-02-06 11:47:43 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 11:47:51 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [efyoh2u5]
2026-02-06 11:48:31 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 11:49:42 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 11:53:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:53:49 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770358129045
2026-02-06 11:53:49 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:53:49 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:53:49 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:53:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:53:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/710/zqcvtkko/websocket
2026-02-06 11:53:49 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=zqcvtkko]
2026-02-06 11:53:49 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: zqcvtkko
2026-02-06 11:53:49 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: zqcvtkko
2026-02-06 11:53:49 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: zqcvtkko
2026-02-06 11:53:49 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:53:49 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:53:49 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 11:53:49 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:53:49 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 11:53:49 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:53:49 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: zqcvtkko
2026-02-06 11:53:49 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: zqcvtkko
2026-02-06 11:53:49 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=zqcvtkko
2026-02-06 11:53:49 [clientOutboundChannel-5] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770358129115, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@24a7030e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a60e9ea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zqcvtkko}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a60e9ea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zqcvtkko}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:53:49 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userzqcvtkko subscriptionId=sub-0 session=zqcvtkko user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:53:49 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userzqcvtkko subscriptionId=sub-1 session=zqcvtkko user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:53:56 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=zqcvtkko
2026-02-06 11:53:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=zqcvtkko
2026-02-06 11:53:56 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=zqcvtkko
2026-02-06 11:53:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=zqcvtkko] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:53:56 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session zqcvtkko
2026-02-06 11:53:56 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: zqcvtkko
2026-02-06 11:53:56 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 11:53:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 11:53:56 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770358136536,"status":"OFFLINE","userId":32}
2026-02-06 11:53:56 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=zqcvtkko
2026-02-06 11:53:56 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770358129115, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a60e9ea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zqcvtkko}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a60e9ea, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=zqcvtkko}]
2026-02-06 11:54:01 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [zqcvtkko]
2026-02-06 11:55:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:55:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770358209376
2026-02-06 11:55:09 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:55:09 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:55:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:55:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/640/2q1amr02/websocket
2026-02-06 11:55:09 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:55:09 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2q1amr02]
2026-02-06 11:55:09 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 2q1amr02
2026-02-06 11:55:09 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 2q1amr02
2026-02-06 11:55:09 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 2q1amr02
2026-02-06 11:55:09 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:55:09 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 11:55:09 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:55:09 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:55:09 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 11:55:09 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:55:09 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 2q1amr02
2026-02-06 11:55:09 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=2q1amr02
2026-02-06 11:55:09 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 2q1amr02
2026-02-06 11:55:09 [clientOutboundChannel-8] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770358209471, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@39b43e30, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3773c776, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2q1amr02}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3773c776, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2q1amr02}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:55:09 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user2q1amr02 subscriptionId=sub-0 session=2q1amr02 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:55:09 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user2q1amr02 subscriptionId=sub-1 session=2q1amr02 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:55:12 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 11:55:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 11:55:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 11:55:13 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 11:55:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 11:55:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 11:55:13 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:55:13 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:55:13 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:55:15 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=2q1amr02
2026-02-06 11:55:15 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=2q1amr02
2026-02-06 11:55:15 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=2q1amr02
2026-02-06 11:55:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2q1amr02] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:55:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2q1amr02
2026-02-06 11:55:15 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 2q1amr02
2026-02-06 11:55:15 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 11:55:15 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 11:55:15 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770358215248,"status":"OFFLINE","userId":32}
2026-02-06 11:55:15 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2q1amr02
2026-02-06 11:55:15 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770358209471, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3773c776, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2q1amr02}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3773c776, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2q1amr02}]
2026-02-06 11:55:19 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 11:55:21 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [2q1amr02]
2026-02-06 11:55:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:55:26 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770358226537
2026-02-06 11:55:26 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:55:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:55:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:55:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:55:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/042/eqjs4j1w/websocket
2026-02-06 11:55:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=eqjs4j1w]
2026-02-06 11:55:26 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: eqjs4j1w
2026-02-06 11:55:26 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: eqjs4j1w
2026-02-06 11:55:26 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: eqjs4j1w
2026-02-06 11:55:26 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:55:26 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 11:55:26 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:55:26 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:55:26 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 11:55:26 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:55:26 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: eqjs4j1w
2026-02-06 11:55:26 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=eqjs4j1w
2026-02-06 11:55:26 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: eqjs4j1w
2026-02-06 11:55:26 [clientOutboundChannel-11] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770358226621, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@22453af3, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c82d0cb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqjs4j1w}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c82d0cb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqjs4j1w}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:55:26 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usereqjs4j1w subscriptionId=sub-0 session=eqjs4j1w user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:55:26 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usereqjs4j1w subscriptionId=sub-1 session=eqjs4j1w user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:57:29 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=eqjs4j1w
2026-02-06 11:57:29 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=eqjs4j1w
2026-02-06 11:57:29 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=eqjs4j1w
2026-02-06 11:57:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=eqjs4j1w] closed with CloseStatus[code=1000, reason=null]
2026-02-06 11:57:29 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session eqjs4j1w
2026-02-06 11:57:29 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: eqjs4j1w
2026-02-06 11:57:29 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 11:57:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 11:57:30 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770358350028,"status":"OFFLINE","userId":32}
2026-02-06 11:57:30 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=eqjs4j1w
2026-02-06 11:57:30 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770358226621, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c82d0cb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqjs4j1w}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2c82d0cb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=eqjs4j1w}]
2026-02-06 11:57:31 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 11:57:36 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [eqjs4j1w]
2026-02-06 11:57:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:57:55 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770358375048
2026-02-06 11:57:55 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:57:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 11:57:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:57:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/692/bjglqcqf/websocket
2026-02-06 11:57:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:57:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=bjglqcqf]
2026-02-06 11:57:55 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: bjglqcqf
2026-02-06 11:57:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: bjglqcqf
2026-02-06 11:57:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: bjglqcqf
2026-02-06 11:57:55 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 11:57:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 11:57:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 11:57:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 11:57:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 11:57:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 11:57:55 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: bjglqcqf
2026-02-06 11:57:55 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: bjglqcqf
2026-02-06 11:57:55 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=bjglqcqf
2026-02-06 11:57:55 [clientOutboundChannel-13] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770358375175, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@321fc515, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3cd82d26, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=bjglqcqf}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3cd82d26, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=bjglqcqf}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 11:57:55 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userbjglqcqf subscriptionId=sub-0 session=bjglqcqf user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 11:57:55 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userbjglqcqf subscriptionId=sub-1 session=bjglqcqf user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:03:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=bjglqcqf
2026-02-06 12:03:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=bjglqcqf
2026-02-06 12:03:57 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=bjglqcqf
2026-02-06 12:03:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=bjglqcqf] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:03:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session bjglqcqf
2026-02-06 12:03:57 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: bjglqcqf
2026-02-06 12:03:57 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 12:03:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 12:03:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 12:03:57 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770358737024
2026-02-06 12:03:57 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:03:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:03:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 12:03:57 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770358737043,"status":"OFFLINE","userId":32}
2026-02-06 12:03:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=bjglqcqf
2026-02-06 12:03:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 12:03:57 [clientOutboundChannel-30] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770358375175, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3cd82d26, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=bjglqcqf}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3cd82d26, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=bjglqcqf}]
2026-02-06 12:03:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/737/gcw3q03r/websocket
2026-02-06 12:03:57 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gcw3q03r]
2026-02-06 12:03:57 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: gcw3q03r
2026-02-06 12:03:57 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: gcw3q03r
2026-02-06 12:03:57 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: gcw3q03r
2026-02-06 12:03:57 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:03:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:03:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 12:03:57 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 12:03:57 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 12:03:57 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:03:57 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: gcw3q03r
2026-02-06 12:03:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=gcw3q03r
2026-02-06 12:03:57 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: gcw3q03r
2026-02-06 12:03:57 [clientOutboundChannel-27] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770358737114, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@11d32d5c, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f14d116, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gcw3q03r}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f14d116, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gcw3q03r}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:03:57 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usergcw3q03r subscriptionId=sub-0 session=gcw3q03r user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:03:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usergcw3q03r subscriptionId=sub-1 session=gcw3q03r user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:04:01 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usergcw3q03r subscriptionId=sub-2 session=gcw3q03r user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:04:01 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usergcw3q03r subscriptionId=sub-3 session=gcw3q03r user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:04:06 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [bjglqcqf]
2026-02-06 12:05:15 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=gcw3q03r
2026-02-06 12:05:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=gcw3q03r
2026-02-06 12:05:15 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=gcw3q03r
2026-02-06 12:05:15 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=gcw3q03r
2026-02-06 12:05:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=gcw3q03r
2026-02-06 12:05:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gcw3q03r] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:05:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gcw3q03r
2026-02-06 12:05:15 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: gcw3q03r
2026-02-06 12:05:15 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 12:05:15 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 12:05:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 12:05:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770358815019
2026-02-06 12:05:15 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:05:15 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:05:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 12:05:15 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770358815032,"status":"OFFLINE","userId":32}
2026-02-06 12:05:15 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gcw3q03r
2026-02-06 12:05:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/677/hs2rihrc/websocket
2026-02-06 12:05:15 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 12:05:15 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770358737114, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f14d116, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gcw3q03r}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1f14d116, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gcw3q03r}]
2026-02-06 12:05:15 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hs2rihrc]
2026-02-06 12:05:15 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: hs2rihrc
2026-02-06 12:05:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: hs2rihrc
2026-02-06 12:05:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: hs2rihrc
2026-02-06 12:05:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 12:05:15 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:05:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 12:05:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:05:15 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:05:15 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: hs2rihrc
2026-02-06 12:05:15 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: hs2rihrc
2026-02-06 12:05:15 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=hs2rihrc
2026-02-06 12:05:15 [clientOutboundChannel-28] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770358815061, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@6f19cb4a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61de38d9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hs2rihrc}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61de38d9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hs2rihrc}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:05:15 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 12:05:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userhs2rihrc subscriptionId=sub-0 session=hs2rihrc user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:05:15 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userhs2rihrc subscriptionId=sub-1 session=hs2rihrc user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:05:19 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userhs2rihrc subscriptionId=sub-2 session=hs2rihrc user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:05:19 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userhs2rihrc subscriptionId=sub-3 session=hs2rihrc user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:05:21 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [gcw3q03r]
2026-02-06 12:06:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=hs2rihrc
2026-02-06 12:06:55 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=hs2rihrc
2026-02-06 12:06:55 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=hs2rihrc
2026-02-06 12:06:55 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=hs2rihrc
2026-02-06 12:06:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=hs2rihrc
2026-02-06 12:06:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hs2rihrc] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:06:55 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hs2rihrc
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: hs2rihrc
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 12:06:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 12:06:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770358915036
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:06:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@7158bee9
2026-02-06 12:06:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/639/snbt3h35/websocket
2026-02-06 12:06:55 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770358915062,"status":"OFFLINE","userId":32}
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hs2rihrc
2026-02-06 12:06:55 [clientOutboundChannel-35] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770358815061, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61de38d9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hs2rihrc}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@61de38d9, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hs2rihrc}]
2026-02-06 12:06:55 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=snbt3h35]
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:06:55 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 32
2026-02-06 12:06:55 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 12:06:55 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=snbt3h35
2026-02-06 12:06:55 [clientOutboundChannel-31] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU3NzIwLCJleHAiOjE3NzAzNjEzMjB9.uAxVrvb24ZG5ri5JrOhAHJFheKur22RAa6LmkpzSR9U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770358915122, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@58f742ad, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5630a7c3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=snbt3h35}], simpHeartbeat=[J@27d6e77a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5630a7c3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=snbt3h35}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usersnbt3h35 subscriptionId=sub-0 session=snbt3h35 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:06:55 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usersnbt3h35 subscriptionId=sub-1 session=snbt3h35 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 32 and 15
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=8
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=26
2026-02-06 12:06:55 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-2 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-3 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:55 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=27
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-4 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-5 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=28
2026-02-06 12:06:55 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=29
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-6 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-7 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:55 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 8
2026-02-06 12:06:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-8 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:55 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-9 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=30
2026-02-06 12:06:55 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:55 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=31
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=32
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-8 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-10 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-11 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=33
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:55 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-10 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 6 messages in conversation 8
2026-02-06 12:06:55 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:55 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-12 session=snbt3h35
2026-02-06 12:06:55 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-13 session=snbt3h35
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=34
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 7 messages in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-12 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-14 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-15 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=35
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 9 messages in conversation 8
2026-02-06 12:06:56 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-14 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-16 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-17 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=36
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 9 messages in conversation 8
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-16 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-18 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-19 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=37
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 10 messages in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=38
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-18 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-20 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-21 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 12 messages in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=39
2026-02-06 12:06:56 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-20 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-22 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-23 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 13 messages in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=40
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-22 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=41
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-24 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-25 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 15 messages in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-10] INFO  org.hibernate.orm.jdbc.batch - HHH100503: On release of batch it still contained JDBC statements
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [http-nio-8080-exec-10] WARN  o.h.e.jdbc.spi.SqlExceptionHelper - SQL Error: 1213, SQLState: 40001
2026-02-06 12:06:56 [http-nio-8080-exec-10] ERROR o.h.e.jdbc.spi.SqlExceptionHelper - Deadlock found when trying to get lock; try restarting transaction
2026-02-06 12:06:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=42
2026-02-06 12:06:56 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-24 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-26 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-27 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-10] ERROR c.e.e.controller.ChatController -  Error initiating conversation: could not execute batch [Deadlock found when trying to get lock; try restarting transaction] [/* update for com.evstation.ev_charging_backend.entity.Conversation */update conversations set archived_user1=?,archived_user2=?,charger_id=?,conversation_type=?,is_active=?,last_message=?,last_message_sender_id=?,last_message_time=?,title=?,unread_count_user1=?,unread_count_user2=?,updated_at=?,user1_id=?,user2_id=? where id=?]; SQL [/* update for com.evstation.ev_charging_backend.entity.Conversation */update conversations set archived_user1=?,archived_user2=?,charger_id=?,conversation_type=?,is_active=?,last_message=?,last_message_sender_id=?,last_message_time=?,title=?,unread_count_user1=?,unread_count_user2=?,updated_at=?,user1_id=?,user2_id=? where id=?]
org.springframework.dao.CannotAcquireLockException: could not execute batch [Deadlock found when trying to get lock; try restarting transaction] [/* update for com.evstation.ev_charging_backend.entity.Conversation */update conversations set archived_user1=?,archived_user2=?,charger_id=?,conversation_type=?,is_active=?,last_message=?,last_message_sender_id=?,last_message_time=?,title=?,unread_count_user1=?,unread_count_user2=?,updated_at=?,user1_id=?,user2_id=? where id=?]; SQL [/* update for com.evstation.ev_charging_backend.entity.Conversation */update conversations set archived_user1=?,archived_user2=?,charger_id=?,conversation_type=?,is_active=?,last_message=?,last_message_sender_id=?,last_message_time=?,title=?,unread_count_user1=?,unread_count_user2=?,updated_at=?,user1_id=?,user2_id=? where id=?]
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:287)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:256)
	at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:244)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:567)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:795)
	at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:758)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:698)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:416)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:728)
	at com.evstation.ev_charging_backend.serviceImpl.ChatMessageServiceImpl$$SpringCGLIB$$0.initiateConversation(<generated>)
	at com.evstation.ev_charging_backend.controller.ChatController.initiateConversation(ChatController.java:226)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:125)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:119)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.evstation.ev_charging_backend.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:56)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at com.evstation.ev_charging_backend.config.CorsFilter.doFilter(CorsFilter.java:65)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.hibernate.exception.LockAcquisitionException: could not execute batch [Deadlock found when trying to get lock; try restarting transaction] [/* update for com.evstation.ev_charging_backend.entity.Conversation */update conversations set archived_user1=?,archived_user2=?,charger_id=?,conversation_type=?,is_active=?,last_message=?,last_message_sender_id=?,last_message_time=?,title=?,unread_count_user1=?,unread_count_user2=?,updated_at=?,user1_id=?,user2_id=? where id=?]
	at org.hibernate.dialect.MySQLDialect.lambda$buildSQLExceptionConversionDelegate$3(MySQLDialect.java:1255)
	at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:58)
	at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:108)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:293)
	at org.hibernate.engine.jdbc.mutation.internal.PreparedStatementGroupSingleTable.forEachStatement(PreparedStatementGroupSingleTable.java:67)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.performExecution(BatchImpl.java:264)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.execute(BatchImpl.java:242)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.executeBatch(JdbcCoordinatorImpl.java:188)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:674)
	at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:511)
	at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:414)
	at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:41)
	at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:127)
	at org.hibernate.internal.SessionImpl.doFlush(SessionImpl.java:1429)
	at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:491)
	at org.hibernate.internal.SessionImpl.flushBeforeTransactionCompletion(SessionImpl.java:2354)
	at org.hibernate.internal.SessionImpl.beforeTransactionCompletion(SessionImpl.java:1978)
	at org.hibernate.engine.jdbc.internal.JdbcCoordinatorImpl.beforeTransactionCompletion(JdbcCoordinatorImpl.java:439)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl.beforeCompletionCallback(JdbcResourceLocalTransactionCoordinatorImpl.java:169)
	at org.hibernate.resource.transaction.backend.jdbc.internal.JdbcResourceLocalTransactionCoordinatorImpl$TransactionDriverControlImpl.commit(JdbcResourceLocalTransactionCoordinatorImpl.java:267)
	at org.hibernate.engine.transaction.internal.TransactionImpl.commit(TransactionImpl.java:101)
	at org.springframework.orm.jpa.JpaTransactionManager.doCommit(JpaTransactionManager.java:563)
	... 116 common frames omitted
Caused by: java.sql.BatchUpdateException: Deadlock found when trying to get lock; try restarting transaction
	at com.mysql.cj.jdbc.exceptions.SQLError.createBatchUpdateException(SQLError.java:214)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:877)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchInternal(ClientPreparedStatement.java:465)
	at com.mysql.cj.jdbc.StatementImpl.executeBatch(StatementImpl.java:858)
	at com.zaxxer.hikari.pool.ProxyStatement.executeBatch(ProxyStatement.java:128)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.executeBatch(HikariProxyPreparedStatement.java)
	at org.hibernate.engine.jdbc.batch.internal.BatchImpl.lambda$performExecution$2(BatchImpl.java:279)
	... 134 common frames omitted
Caused by: com.mysql.cj.jdbc.exceptions.MySQLTransactionRollbackException: Deadlock found when trying to get lock; try restarting transaction
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:115)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:114)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:988)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeUpdateInternal(ClientPreparedStatement.java:1166)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeBatchSerially(ClientPreparedStatement.java:862)
	... 139 common frames omitted
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 16 messages in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=43
2026-02-06 12:06:56 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-26 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-28 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-29 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 17 messages in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=44
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-28 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-30 session=snbt3h35
2026-02-06 12:06:56 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-31 session=snbt3h35
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:56 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:56 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 18 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=45
2026-02-06 12:06:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-30 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-32 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-33 session=snbt3h35
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 19 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=46
2026-02-06 12:06:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-32 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-34 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-35 session=snbt3h35
2026-02-06 12:06:57 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 20 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=47
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-34 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-36 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-37 session=snbt3h35
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 21 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=48
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-36 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-38 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-39 session=snbt3h35
2026-02-06 12:06:57 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 22 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:57 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=49
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=50
2026-02-06 12:06:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-38 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-40 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-41 session=snbt3h35
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 24 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:57 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=51
2026-02-06 12:06:57 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-40 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-42 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-43 session=snbt3h35
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 25 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=52
2026-02-06 12:06:57 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-42 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-44 session=snbt3h35
2026-02-06 12:06:57 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-45 session=snbt3h35
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:57 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:57 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 26 messages in conversation 8
2026-02-06 12:06:57 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=53
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-44 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-46 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-47 session=snbt3h35
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 27 messages in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=54
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-46 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-48 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-49 session=snbt3h35
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 28 messages in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=55
2026-02-06 12:06:58 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-48 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-50 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-51 session=snbt3h35
2026-02-06 12:06:58 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 29 messages in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=56
2026-02-06 12:06:58 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-50 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-52 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-53 session=snbt3h35
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:58 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 30 messages in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=57
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-52 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-54 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-55 session=snbt3h35
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 31 messages in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=58
2026-02-06 12:06:58 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-54 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-56 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-57 session=snbt3h35
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 32 messages in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:58 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=59
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-56 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-58 session=snbt3h35
2026-02-06 12:06:58 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-59 session=snbt3h35
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 33 messages in conversation 8
2026-02-06 12:06:58 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=60
2026-02-06 12:06:58 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-58 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-60 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-61 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usersnbt3h35 subscriptionId=sub-62 session=snbt3h35 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:06:59 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usersnbt3h35 subscriptionId=sub-63 session=snbt3h35 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 34 messages in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=61
2026-02-06 12:06:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-60 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-64 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-65 session=snbt3h35
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 35 messages in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=62
2026-02-06 12:06:59 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-64 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-66 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-67 session=snbt3h35
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 36 messages in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=63
2026-02-06 12:06:59 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-66 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-68 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-69 session=snbt3h35
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:59 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 37 messages in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=64
2026-02-06 12:06:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-68 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-70 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-71 session=snbt3h35
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 38 messages in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=65
2026-02-06 12:06:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-70 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-72 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-73 session=snbt3h35
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 39 messages in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=66
2026-02-06 12:06:59 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-72 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-74 session=snbt3h35
2026-02-06 12:06:59 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-75 session=snbt3h35
2026-02-06 12:06:59 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:06:59 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 40 messages in conversation 8
2026-02-06 12:06:59 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:06:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=67
2026-02-06 12:07:00 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-74 session=snbt3h35
2026-02-06 12:07:00 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-76 session=snbt3h35
2026-02-06 12:07:00 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-77 session=snbt3h35
2026-02-06 12:07:00 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:00 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:00 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:00 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:00 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:00 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 41 messages in conversation 8
2026-02-06 12:07:00 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:00 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:00 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=68
2026-02-06 12:07:01 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [hs2rihrc]
2026-02-06 12:07:08 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-76 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-78 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-79 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 42 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=69
2026-02-06 12:07:08 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-78 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-80 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-81 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 43 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=70
2026-02-06 12:07:08 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-80 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-82 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-83 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 44 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=71
2026-02-06 12:07:08 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-82 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-84 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-85 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 45 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=72
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-84 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-86 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-87 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 46 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=73
2026-02-06 12:07:08 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-86 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-88 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-89 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 47 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=74
2026-02-06 12:07:08 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-88 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-90 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-91 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 48 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=75
2026-02-06 12:07:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-90 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-92 session=snbt3h35
2026-02-06 12:07:08 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-93 session=snbt3h35
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 49 messages in conversation 8
2026-02-06 12:07:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:08 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:09 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=76
2026-02-06 12:07:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-92 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-94 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-95 session=snbt3h35
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:09 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 50 messages in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=77
2026-02-06 12:07:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-94 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-96 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-97 session=snbt3h35
2026-02-06 12:07:09 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:09 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 51 messages in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=78
2026-02-06 12:07:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-96 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-98 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-99 session=snbt3h35
2026-02-06 12:07:09 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 52 messages in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=79
2026-02-06 12:07:09 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-98 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-100 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-101 session=snbt3h35
2026-02-06 12:07:09 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:09 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 53 messages in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:09 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=80
2026-02-06 12:07:09 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-100 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-102 session=snbt3h35
2026-02-06 12:07:09 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-103 session=snbt3h35
2026-02-06 12:07:09 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:09 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 54 messages in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:09 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=81
2026-02-06 12:07:10 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-102 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-104 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-105 session=snbt3h35
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 55 messages in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:10 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:10 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=82
2026-02-06 12:07:10 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-104 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-106 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-107 session=snbt3h35
2026-02-06 12:07:10 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 56 messages in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:10 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=83
2026-02-06 12:07:10 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-106 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-108 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-109 session=snbt3h35
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 57 messages in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:10 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=84
2026-02-06 12:07:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-108 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-110 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-111 session=snbt3h35
2026-02-06 12:07:10 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 58 messages in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:10 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=85
2026-02-06 12:07:10 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-110 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-112 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-113 session=snbt3h35
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 59 messages in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:10 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=86
2026-02-06 12:07:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-112 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-114 session=snbt3h35
2026-02-06 12:07:10 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-115 session=snbt3h35
2026-02-06 12:07:10 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:10 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:10 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:10 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 60 messages in conversation 8
2026-02-06 12:07:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=87
2026-02-06 12:07:11 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-114 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-116 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-117 session=snbt3h35
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:11 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 61 messages in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=88
2026-02-06 12:07:11 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-116 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-118 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-119 session=snbt3h35
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 62 messages in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=89
2026-02-06 12:07:11 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-118 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-120 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-121 session=snbt3h35
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 63 messages in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=90
2026-02-06 12:07:11 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-120 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-122 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-123 session=snbt3h35
2026-02-06 12:07:11 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:11 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 64 messages in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=91
2026-02-06 12:07:11 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-122 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-124 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-125 session=snbt3h35
2026-02-06 12:07:11 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:11 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 65 messages in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:11 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=92
2026-02-06 12:07:11 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-124 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-126 session=snbt3h35
2026-02-06 12:07:11 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-127 session=snbt3h35
2026-02-06 12:07:11 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:11 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:11 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 66 messages in conversation 8
2026-02-06 12:07:11 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:11 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=93
2026-02-06 12:07:12 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-126 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-128 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-129 session=snbt3h35
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 67 messages in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=94
2026-02-06 12:07:12 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-128 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-130 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-131 session=snbt3h35
2026-02-06 12:07:12 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 68 messages in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=95
2026-02-06 12:07:12 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-130 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-132 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-133 session=snbt3h35
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:12 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 69 messages in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=96
2026-02-06 12:07:12 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-132 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-134 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-135 session=snbt3h35
2026-02-06 12:07:12 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 70 messages in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=97
2026-02-06 12:07:12 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-134 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-136 session=snbt3h35
2026-02-06 12:07:12 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-137 session=snbt3h35
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:12 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 71 messages in conversation 8
2026-02-06 12:07:12 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:12 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=98
2026-02-06 12:07:13 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-136 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-138 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-139 session=snbt3h35
2026-02-06 12:07:13 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 72 messages in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=99
2026-02-06 12:07:13 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-138 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-140 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-141 session=snbt3h35
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 73 messages in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=100
2026-02-06 12:07:13 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-140 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-142 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-143 session=snbt3h35
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:13 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 74 messages in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=101
2026-02-06 12:07:13 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-142 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-144 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-145 session=snbt3h35
2026-02-06 12:07:13 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 75 messages in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=102
2026-02-06 12:07:13 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-144 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-146 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-147 session=snbt3h35
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 76 messages in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:13 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=103
2026-02-06 12:07:13 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-146 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-148 session=snbt3h35
2026-02-06 12:07:13 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-149 session=snbt3h35
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:13 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 77 messages in conversation 8
2026-02-06 12:07:13 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:13 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=104
2026-02-06 12:07:14 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-148 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-151 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-150 session=snbt3h35
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:14 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 78 messages in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=105
2026-02-06 12:07:14 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-150 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-152 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-153 session=snbt3h35
2026-02-06 12:07:14 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:14 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 79 messages in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=106
2026-02-06 12:07:14 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-152 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-154 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-155 session=snbt3h35
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:14 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 80 messages in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=107
2026-02-06 12:07:14 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-154 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-156 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-157 session=snbt3h35
2026-02-06 12:07:14 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:14 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 81 messages in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:14 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=108
2026-02-06 12:07:14 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-156 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-158 session=snbt3h35
2026-02-06 12:07:14 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-159 session=snbt3h35
2026-02-06 12:07:14 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:14 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:14 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 82 messages in conversation 8
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:14 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=109
2026-02-06 12:07:15 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-158 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-160 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-161 session=snbt3h35
2026-02-06 12:07:15 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 83 messages in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=110
2026-02-06 12:07:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-160 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-162 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-163 session=snbt3h35
2026-02-06 12:07:15 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:15 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 84 messages in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=111
2026-02-06 12:07:15 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-162 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-164 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-165 session=snbt3h35
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 85 messages in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:15 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=112
2026-02-06 12:07:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-164 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-166 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-167 session=snbt3h35
2026-02-06 12:07:15 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 86 messages in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=113
2026-02-06 12:07:15 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-166 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-168 session=snbt3h35
2026-02-06 12:07:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-169 session=snbt3h35
2026-02-06 12:07:15 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:15 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 87 messages in conversation 8
2026-02-06 12:07:15 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=114
2026-02-06 12:07:16 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-168 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-170 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-171 session=snbt3h35
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 88 messages in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=115
2026-02-06 12:07:16 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-170 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-172 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-173 session=snbt3h35
2026-02-06 12:07:16 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 89 messages in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=116
2026-02-06 12:07:16 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-172 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-174 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-175 session=snbt3h35
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 90 messages in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=117
2026-02-06 12:07:16 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-174 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-176 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-177 session=snbt3h35
2026-02-06 12:07:16 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 91 messages in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=118
2026-02-06 12:07:16 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-176 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-178 session=snbt3h35
2026-02-06 12:07:16 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-179 session=snbt3h35
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:16 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 92 messages in conversation 8
2026-02-06 12:07:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=119
2026-02-06 12:07:17 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-178 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-180 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-181 session=snbt3h35
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:17 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 93 messages in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=120
2026-02-06 12:07:17 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-180 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-182 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-183 session=snbt3h35
2026-02-06 12:07:17 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 94 messages in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=121
2026-02-06 12:07:17 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-182 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-184 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-185 session=snbt3h35
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 95 messages in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:17 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=122
2026-02-06 12:07:17 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-184 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-186 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-187 session=snbt3h35
2026-02-06 12:07:17 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 96 messages in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:17 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=123
2026-02-06 12:07:17 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-186 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-188 session=snbt3h35
2026-02-06 12:07:17 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-189 session=snbt3h35
2026-02-06 12:07:17 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 97 messages in conversation 8
2026-02-06 12:07:17 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:17 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:18 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=124
2026-02-06 12:07:18 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-188 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-190 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-191 session=snbt3h35
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:18 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 98 messages in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=125
2026-02-06 12:07:18 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-190 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-192 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-193 session=snbt3h35
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 99 messages in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:18 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=126
2026-02-06 12:07:18 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-192 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-194 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-195 session=snbt3h35
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:18 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 100 messages in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=127
2026-02-06 12:07:18 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-194 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-196 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-197 session=snbt3h35
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 101 messages in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=128
2026-02-06 12:07:18 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-196 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-198 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-199 session=snbt3h35
2026-02-06 12:07:18 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 102 messages in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:18 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=129
2026-02-06 12:07:18 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-198 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-200 session=snbt3h35
2026-02-06 12:07:18 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-201 session=snbt3h35
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:18 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 103 messages in conversation 8
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:18 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=130
2026-02-06 12:07:19 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-200 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-202 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-203 session=snbt3h35
2026-02-06 12:07:19 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:19 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 104 messages in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=131
2026-02-06 12:07:19 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-202 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-204 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-205 session=snbt3h35
2026-02-06 12:07:19 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 105 messages in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:19 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:19 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=132
2026-02-06 12:07:19 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-204 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-206 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-207 session=snbt3h35
2026-02-06 12:07:19 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:19 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 106 messages in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=133
2026-02-06 12:07:19 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-206 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-208 session=snbt3h35
2026-02-06 12:07:19 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-209 session=snbt3h35
2026-02-06 12:07:19 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 107 messages in conversation 8
2026-02-06 12:07:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:19 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=134
2026-02-06 12:07:19 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:19 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:19 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=135
2026-02-06 12:07:20 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-208 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-210 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-211 session=snbt3h35
2026-02-06 12:07:20 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 109 messages in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=136
2026-02-06 12:07:20 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-210 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-212 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-213 session=snbt3h35
2026-02-06 12:07:20 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:20 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 110 messages in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=137
2026-02-06 12:07:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-212 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-214 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-215 session=snbt3h35
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 111 messages in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=138
2026-02-06 12:07:20 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-214 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-216 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-217 session=snbt3h35
2026-02-06 12:07:20 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:20 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 112 messages in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=139
2026-02-06 12:07:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-216 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-218 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-219 session=snbt3h35
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:20 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 113 messages in conversation 8
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=140
2026-02-06 12:07:20 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-218 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-220 session=snbt3h35
2026-02-06 12:07:20 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-221 session=snbt3h35
2026-02-06 12:07:21 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:21 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 114 messages in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=141
2026-02-06 12:07:21 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-220 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-222 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-223 session=snbt3h35
2026-02-06 12:07:21 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:21 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 115 messages in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:21 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=142
2026-02-06 12:07:21 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-222 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-224 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-225 session=snbt3h35
2026-02-06 12:07:21 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:21 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 116 messages in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=143
2026-02-06 12:07:21 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-224 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-226 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-227 session=snbt3h35
2026-02-06 12:07:21 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:21 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 117 messages in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:21 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=144
2026-02-06 12:07:21 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-226 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-228 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-229 session=snbt3h35
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:21 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:21 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 118 messages in conversation 8
2026-02-06 12:07:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=145
2026-02-06 12:07:21 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-228 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-230 session=snbt3h35
2026-02-06 12:07:21 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-231 session=snbt3h35
2026-02-06 12:07:21 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:21 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:22 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 119 messages in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=146
2026-02-06 12:07:22 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-230 session=snbt3h35
2026-02-06 12:07:22 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-232 session=snbt3h35
2026-02-06 12:07:22 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-233 session=snbt3h35
2026-02-06 12:07:22 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:22 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 120 messages in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:22 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=147
2026-02-06 12:07:22 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-232 session=snbt3h35
2026-02-06 12:07:22 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-234 session=snbt3h35
2026-02-06 12:07:22 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-235 session=snbt3h35
2026-02-06 12:07:22 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:22 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 121 messages in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:22 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=148
2026-02-06 12:07:22 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-234 session=snbt3h35
2026-02-06 12:07:22 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-236 session=snbt3h35
2026-02-06 12:07:22 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-237 session=snbt3h35
2026-02-06 12:07:22 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:22 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:22 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:22 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 122 messages in conversation 8
2026-02-06 12:07:22 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:22 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=149
2026-02-06 12:07:23 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-236 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-238 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-239 session=snbt3h35
2026-02-06 12:07:23 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:23 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 123 messages in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=150
2026-02-06 12:07:23 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-238 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-240 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-241 session=snbt3h35
2026-02-06 12:07:23 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:23 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 124 messages in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:23 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=151
2026-02-06 12:07:23 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-240 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-242 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-243 session=snbt3h35
2026-02-06 12:07:23 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:23 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 125 messages in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=152
2026-02-06 12:07:23 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-242 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-244 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-245 session=snbt3h35
2026-02-06 12:07:23 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:23 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 126 messages in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:23 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=153
2026-02-06 12:07:23 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-244 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-246 session=snbt3h35
2026-02-06 12:07:23 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-247 session=snbt3h35
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 127 messages in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:24 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=154
2026-02-06 12:07:24 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-246 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-248 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-249 session=snbt3h35
2026-02-06 12:07:24 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:24 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 128 messages in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=155
2026-02-06 12:07:24 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-248 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-250 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-251 session=snbt3h35
2026-02-06 12:07:24 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:24 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 129 messages in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=156
2026-02-06 12:07:24 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-250 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-252 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-253 session=snbt3h35
2026-02-06 12:07:24 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:24 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 130 messages in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=157
2026-02-06 12:07:24 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-252 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-254 session=snbt3h35
2026-02-06 12:07:24 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-255 session=snbt3h35
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:24 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:24 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 131 messages in conversation 8
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:24 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=158
2026-02-06 12:07:25 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-254 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-256 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-257 session=snbt3h35
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:25 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 132 messages in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=159
2026-02-06 12:07:25 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-256 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-258 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-259 session=snbt3h35
2026-02-06 12:07:25 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:25 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 133 messages in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=160
2026-02-06 12:07:25 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-258 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-260 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-261 session=snbt3h35
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:25 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 134 messages in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=161
2026-02-06 12:07:25 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-260 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-262 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-263 session=snbt3h35
2026-02-06 12:07:25 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:25 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 135 messages in conversation 8
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=162
2026-02-06 12:07:25 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-262 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-264 session=snbt3h35
2026-02-06 12:07:25 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-265 session=snbt3h35
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:26 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 136 messages in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=163
2026-02-06 12:07:26 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-264 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-266 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-267 session=snbt3h35
2026-02-06 12:07:26 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:26 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 137 messages in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=164
2026-02-06 12:07:26 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-266 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-268 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-269 session=snbt3h35
2026-02-06 12:07:26 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:26 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 138 messages in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=165
2026-02-06 12:07:26 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-268 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-270 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-271 session=snbt3h35
2026-02-06 12:07:26 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:26 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 139 messages in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:26 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=166
2026-02-06 12:07:26 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-270 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-272 session=snbt3h35
2026-02-06 12:07:26 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-273 session=snbt3h35
2026-02-06 12:07:26 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:26 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 140 messages in conversation 8
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:26 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=167
2026-02-06 12:07:27 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-272 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-274 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-275 session=snbt3h35
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 141 messages in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=168
2026-02-06 12:07:27 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-274 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-276 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-277 session=snbt3h35
2026-02-06 12:07:27 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:27 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 142 messages in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=169
2026-02-06 12:07:27 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-276 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-278 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-279 session=snbt3h35
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 143 messages in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:27 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=170
2026-02-06 12:07:27 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-278 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-280 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-281 session=snbt3h35
2026-02-06 12:07:27 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:27 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 144 messages in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=171
2026-02-06 12:07:27 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-280 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-282 session=snbt3h35
2026-02-06 12:07:27 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-283 session=snbt3h35
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:27 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:27 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:27 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 145 messages in conversation 8
2026-02-06 12:07:27 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:27 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=172
2026-02-06 12:07:28 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-282 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-284 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-285 session=snbt3h35
2026-02-06 12:07:28 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 146 messages in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:28 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=173
2026-02-06 12:07:28 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-284 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-286 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-287 session=snbt3h35
2026-02-06 12:07:28 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:28 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 147 messages in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=174
2026-02-06 12:07:28 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-286 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-288 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-289 session=snbt3h35
2026-02-06 12:07:28 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 148 messages in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:28 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=175
2026-02-06 12:07:28 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-288 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-290 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-291 session=snbt3h35
2026-02-06 12:07:28 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:28 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:28 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 149 messages in conversation 8
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=176
2026-02-06 12:07:28 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-290 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-292 session=snbt3h35
2026-02-06 12:07:28 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-293 session=snbt3h35
2026-02-06 12:07:29 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 150 messages in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=177
2026-02-06 12:07:29 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-292 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-294 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-295 session=snbt3h35
2026-02-06 12:07:29 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 151 messages in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=178
2026-02-06 12:07:29 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-294 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-296 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-297 session=snbt3h35
2026-02-06 12:07:29 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:29 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 152 messages in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=179
2026-02-06 12:07:29 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-296 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-298 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-299 session=snbt3h35
2026-02-06 12:07:29 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:29 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 153 messages in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:29 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=180
2026-02-06 12:07:29 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-298 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-300 session=snbt3h35
2026-02-06 12:07:29 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-301 session=snbt3h35
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:29 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 154 messages in conversation 8
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=181
2026-02-06 12:07:30 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-300 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-302 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-303 session=snbt3h35
2026-02-06 12:07:30 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 155 messages in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=182
2026-02-06 12:07:30 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-302 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-304 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-305 session=snbt3h35
2026-02-06 12:07:30 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:30 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 156 messages in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=183
2026-02-06 12:07:30 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-304 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-306 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-307 session=snbt3h35
2026-02-06 12:07:30 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 157 messages in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:30 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=184
2026-02-06 12:07:30 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-306 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-308 session=snbt3h35
2026-02-06 12:07:30 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-309 session=snbt3h35
2026-02-06 12:07:30 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:30 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 158 messages in conversation 8
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:30 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=185
2026-02-06 12:07:31 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-308 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-310 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-311 session=snbt3h35
2026-02-06 12:07:31 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 159 messages in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=186
2026-02-06 12:07:31 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-310 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-312 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-313 session=snbt3h35
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:31 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 160 messages in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=187
2026-02-06 12:07:31 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-312 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-314 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-315 session=snbt3h35
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:31 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:31 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 161 messages in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=188
2026-02-06 12:07:31 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:31 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=189
2026-02-06 12:07:31 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-314 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-316 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-317 session=snbt3h35
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 163 messages in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:31 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=190
2026-02-06 12:07:31 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-316 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-318 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-319 session=snbt3h35
2026-02-06 12:07:31 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:31 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:31 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 164 messages in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=191
2026-02-06 12:07:31 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-318 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-320 session=snbt3h35
2026-02-06 12:07:31 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-321 session=snbt3h35
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:31 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:31 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 165 messages in conversation 8
2026-02-06 12:07:31 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=192
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:31 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=193
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-320 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-322 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-323 session=snbt3h35
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 167 messages in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=194
2026-02-06 12:07:32 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-322 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-324 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-325 session=snbt3h35
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 168 messages in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=195
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-324 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-326 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-327 session=snbt3h35
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 169 messages in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=196
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-326 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-328 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-329 session=snbt3h35
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:32 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 170 messages in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=197
2026-02-06 12:07:32 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-328 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-330 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-331 session=snbt3h35
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 171 messages in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=198
2026-02-06 12:07:32 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-330 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-332 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-333 session=snbt3h35
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 172 messages in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=199
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-332 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-334 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-335 session=snbt3h35
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 173 messages in conversation 8
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:32 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=200
2026-02-06 12:07:32 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-334 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-336 session=snbt3h35
2026-02-06 12:07:32 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-337 session=snbt3h35
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 174 messages in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=201
2026-02-06 12:07:33 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-336 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-338 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-339 session=snbt3h35
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:33 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 175 messages in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=202
2026-02-06 12:07:33 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-338 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-340 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-341 session=snbt3h35
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 176 messages in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=203
2026-02-06 12:07:33 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-340 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-342 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-343 session=snbt3h35
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:33 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 177 messages in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=204
2026-02-06 12:07:33 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-342 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-345 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-344 session=snbt3h35
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 178 messages in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=205
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=206
2026-02-06 12:07:33 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-344 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-346 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-347 session=snbt3h35
2026-02-06 12:07:33 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:33 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 180 messages in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=207
2026-02-06 12:07:33 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-346 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-348 session=snbt3h35
2026-02-06 12:07:33 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-349 session=snbt3h35
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:33 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:33 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 181 messages in conversation 8
2026-02-06 12:07:33 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=208
2026-02-06 12:07:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-348 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-350 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-351 session=snbt3h35
2026-02-06 12:07:34 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 182 messages in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=209
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=210
2026-02-06 12:07:34 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-350 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-352 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-353 session=snbt3h35
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:34 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 184 messages in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=211
2026-02-06 12:07:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-352 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-354 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-355 session=snbt3h35
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:34 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 185 messages in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=212
2026-02-06 12:07:34 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-354 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-356 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-357 session=snbt3h35
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:34 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 186 messages in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=213
2026-02-06 12:07:34 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-356 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-358 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-359 session=snbt3h35
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 187 messages in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=214
2026-02-06 12:07:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-358 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-360 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-361 session=snbt3h35
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:34 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 188 messages in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=215
2026-02-06 12:07:34 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-360 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-362 session=snbt3h35
2026-02-06 12:07:34 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-363 session=snbt3h35
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 189 messages in conversation 8
2026-02-06 12:07:34 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:34 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=216
2026-02-06 12:07:35 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-362 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-364 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-365 session=snbt3h35
2026-02-06 12:07:35 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:35 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 190 messages in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=217
2026-02-06 12:07:35 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-364 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-366 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-367 session=snbt3h35
2026-02-06 12:07:35 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 191 messages in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=218
2026-02-06 12:07:35 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-366 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-368 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-369 session=snbt3h35
2026-02-06 12:07:35 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:35 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 192 messages in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:35 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=219
2026-02-06 12:07:35 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-368 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-370 session=snbt3h35
2026-02-06 12:07:35 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-371 session=snbt3h35
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:35 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:35 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 193 messages in conversation 8
2026-02-06 12:07:35 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:35 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=220
2026-02-06 12:07:36 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-370 session=snbt3h35
2026-02-06 12:07:36 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-372 session=snbt3h35
2026-02-06 12:07:36 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-373 session=snbt3h35
2026-02-06 12:07:36 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:36 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 194 messages in conversation 8
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=221
2026-02-06 12:07:36 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-372 session=snbt3h35
2026-02-06 12:07:36 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-374 session=snbt3h35
2026-02-06 12:07:36 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-375 session=snbt3h35
2026-02-06 12:07:36 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:36 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:36 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:36 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:36 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 195 messages in conversation 8
2026-02-06 12:07:36 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:36 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=222
2026-02-06 12:07:36 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-374 session=snbt3h35
2026-02-06 12:07:36 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-376 session=snbt3h35
2026-02-06 12:07:36 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-377 session=snbt3h35
2026-02-06 12:07:36 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:36 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:36 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 196 messages in conversation 8
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=223
2026-02-06 12:07:37 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-376 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-378 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-379 session=snbt3h35
2026-02-06 12:07:37 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:37 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:37 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:37 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:37 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 197 messages in conversation 8
2026-02-06 12:07:37 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:37 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=224
2026-02-06 12:07:37 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-378 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-380 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-381 session=snbt3h35
2026-02-06 12:07:37 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:37 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:37 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:37 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 198 messages in conversation 8
2026-02-06 12:07:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=225
2026-02-06 12:07:37 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-380 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-382 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-383 session=snbt3h35
2026-02-06 12:07:37 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:37 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:37 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:37 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:37 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 199 messages in conversation 8
2026-02-06 12:07:37 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:37 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=226
2026-02-06 12:07:37 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-382 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-384 session=snbt3h35
2026-02-06 12:07:37 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-385 session=snbt3h35
2026-02-06 12:07:37 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:37 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 200 messages in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=227
2026-02-06 12:07:38 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-384 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-386 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-387 session=snbt3h35
2026-02-06 12:07:38 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:38 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 201 messages in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=228
2026-02-06 12:07:38 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-386 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-388 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-389 session=snbt3h35
2026-02-06 12:07:38 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:38 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 202 messages in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=229
2026-02-06 12:07:38 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-388 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-390 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-391 session=snbt3h35
2026-02-06 12:07:38 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:38 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 203 messages in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=230
2026-02-06 12:07:38 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-390 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-392 session=snbt3h35
2026-02-06 12:07:38 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-393 session=snbt3h35
2026-02-06 12:07:38 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:38 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 204 messages in conversation 8
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:38 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=231
2026-02-06 12:07:39 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-392 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-394 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-395 session=snbt3h35
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:39 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 205 messages in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=232
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=233
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-394 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-396 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-397 session=snbt3h35
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 207 messages in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=234
2026-02-06 12:07:39 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-396 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-398 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-399 session=snbt3h35
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 208 messages in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=235
2026-02-06 12:07:39 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-398 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-400 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-401 session=snbt3h35
2026-02-06 12:07:39 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:39 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 209 messages in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=236
2026-02-06 12:07:39 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-400 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-402 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-403 session=snbt3h35
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 210 messages in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=237
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-402 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-405 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-404 session=snbt3h35
2026-02-06 12:07:39 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 211 messages in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=238
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-404 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-406 session=snbt3h35
2026-02-06 12:07:39 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-407 session=snbt3h35
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:39 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:39 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 212 messages in conversation 8
2026-02-06 12:07:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=239
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-406 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-408 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-409 session=snbt3h35
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 213 messages in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=240
2026-02-06 12:07:40 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-408 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-410 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-411 session=snbt3h35
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 214 messages in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=241
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-410 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-412 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-413 session=snbt3h35
2026-02-06 12:07:40 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:40 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 215 messages in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=242
2026-02-06 12:07:40 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-412 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-414 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-415 session=snbt3h35
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 216 messages in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=243
2026-02-06 12:07:40 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=244
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-414 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-416 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-417 session=snbt3h35
2026-02-06 12:07:40 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:40 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 218 messages in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=245
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-416 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-418 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-419 session=snbt3h35
2026-02-06 12:07:40 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 219 messages in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=246
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-418 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-420 session=snbt3h35
2026-02-06 12:07:40 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-421 session=snbt3h35
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:40 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 220 messages in conversation 8
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=247
2026-02-06 12:07:41 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-420 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-422 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-423 session=snbt3h35
2026-02-06 12:07:41 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 221 messages in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=248
2026-02-06 12:07:41 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-422 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-424 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-425 session=snbt3h35
2026-02-06 12:07:41 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 222 messages in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=249
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=250
2026-02-06 12:07:41 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-424 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-426 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-427 session=snbt3h35
2026-02-06 12:07:41 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 224 messages in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=251
2026-02-06 12:07:41 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-426 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-428 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-429 session=snbt3h35
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:41 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 225 messages in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=252
2026-02-06 12:07:41 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-428 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-431 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-430 session=snbt3h35
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:41 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 226 messages in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:41 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=253
2026-02-06 12:07:41 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-430 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-432 session=snbt3h35
2026-02-06 12:07:41 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-433 session=snbt3h35
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:41 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 227 messages in conversation 8
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:41 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=254
2026-02-06 12:07:42 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-432 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-434 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-435 session=snbt3h35
2026-02-06 12:07:42 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 228 messages in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=255
2026-02-06 12:07:42 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-434 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-436 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-437 session=snbt3h35
2026-02-06 12:07:42 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:42 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 229 messages in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=256
2026-02-06 12:07:42 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-436 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-438 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-439 session=snbt3h35
2026-02-06 12:07:42 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:42 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 230 messages in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=257
2026-02-06 12:07:42 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-438 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-440 session=snbt3h35
2026-02-06 12:07:42 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-441 session=snbt3h35
2026-02-06 12:07:42 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 15, type: USER_HOST
2026-02-06 12:07:42 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:07:42 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 231 messages in conversation 8
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 15
2026-02-06 12:07:42 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=258
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 12:07:42 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session snbt3h35 with CloseStatus[code=1001, reason=null]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=snbt3h35]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:777)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:574)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=snbt3h35] closed with CloseStatus[code=1001, reason=null]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session snbt3h35
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: snbt3h35
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"timestamp":1770358962635,"status":"OFFLINE","userId":32}
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 12:07:42 [clientInboundChannel-24] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=snbt3h35
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5c155ccf]]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5c155ccf]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@5c155ccf]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 12:07:42 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 12:10:46 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 9128 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 12:10:46 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 12:10:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 12:10:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 12:10:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 12:10:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 93 ms. Found 9 JPA repository interfaces.
2026-02-06 12:10:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 12:10:48 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 12:10:48 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 12:10:48 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 12:10:48 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1830 ms
2026-02-06 12:10:48 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 12:10:49 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 12:10:49 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 12:10:49 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 12:10:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 12:10:49 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@72d964b0
2026-02-06 12:10:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 12:10:49 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 12:10:49 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 12:10:50 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 12:10:50 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 12:10:51 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 12:10:54 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 12:10:54 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 12:10:54 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 12:10:54 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 12:10:55 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 12:10:55 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 12:10:55 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 12:10:55 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 12:10:55 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 12:10:55 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e65e37b]
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e65e37b]
2026-02-06 12:10:55 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e65e37b]]
2026-02-06 12:10:55 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:10:55 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:10:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 12:10:56 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 12:10:56 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 9.713 seconds (process running for 10.273)
2026-02-06 12:11:34 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 12:11:34 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 12:11:34 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-06 12:11:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:11:43 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:11:43 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359203114
2026-02-06 12:11:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/187/nnzwzpdr/websocket
2026-02-06 12:11:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 12:11:43 [http-nio-8080-exec-6] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nnzwzpdr]
2026-02-06 12:11:43 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: nnzwzpdr
2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: nnzwzpdr
2026-02-06 12:11:43 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: nnzwzpdr
2026-02-06 12:11:43 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:11:43 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 12:11:43 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:11:43 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: nnzwzpdr
2026-02-06 12:11:43 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=nnzwzpdr
2026-02-06 12:11:43 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: nnzwzpdr
2026-02-06 12:11:43 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM1OTE5NCwiZXhwIjoxNzcwMzYyNzk0fQ.dtYZ6jMlAaQNUPv0vD6bbv2izq1xBuQTrCB6IE4s1_8], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359203425, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@2fa918fc, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@9c03c4d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nnzwzpdr}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@9c03c4d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nnzwzpdr}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:11:43 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usernnzwzpdr subscriptionId=sub-1 session=nnzwzpdr user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:11:43 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usernnzwzpdr subscriptionId=sub-0 session=nnzwzpdr user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:11:49 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 6
2026-02-06 12:11:49 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 6
2026-02-06 12:11:49 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_HOST conversations
2026-02-06 12:11:51 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:11:51 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:11:51 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 12:11:52 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=nnzwzpdr
2026-02-06 12:11:52 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=nnzwzpdr
2026-02-06 12:11:52 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=nnzwzpdr
2026-02-06 12:11:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nnzwzpdr] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:11:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nnzwzpdr
2026-02-06 12:11:52 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: nnzwzpdr
2026-02-06 12:11:52 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 12:11:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 12:11:52 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"userId":6,"timestamp":1770359212281,"status":"OFFLINE"}
2026-02-06 12:11:52 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nnzwzpdr
2026-02-06 12:11:52 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359203425, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@9c03c4d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nnzwzpdr}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@9c03c4d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nnzwzpdr}]
2026-02-06 12:11:53 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 12:11:55 [MessageBroker-2] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 21], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 6, active threads = 1, queued tasks = 1, completed tasks = 3]
2026-02-06 12:11:58 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [nnzwzpdr]
2026-02-06 12:12:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:12:05 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359225413
2026-02-06 12:12:05 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:12:05 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:12:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:12:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/221/mq3fmyce/websocket
2026-02-06 12:12:05 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 12:12:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mq3fmyce]
2026-02-06 12:12:05 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: mq3fmyce
2026-02-06 12:12:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: mq3fmyce
2026-02-06 12:12:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: mq3fmyce
2026-02-06 12:12:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 12:12:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 12:12:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:12:05 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: mq3fmyce
2026-02-06 12:12:05 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=mq3fmyce
2026-02-06 12:12:05 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: mq3fmyce
2026-02-06 12:12:05 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM1OTE5NCwiZXhwIjoxNzcwMzYyNzk0fQ.dtYZ6jMlAaQNUPv0vD6bbv2izq1xBuQTrCB6IE4s1_8], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359225529, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@3f5d2f4a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@319ac6d1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mq3fmyce}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@319ac6d1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mq3fmyce}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:12:05 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usermq3fmyce subscriptionId=sub-0 session=mq3fmyce user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:12:05 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usermq3fmyce subscriptionId=sub-1 session=mq3fmyce user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:12:05 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:12:05 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:12:05 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 6
2026-02-06 12:12:05 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 6 initiating conversation with user 34, type: USER_HOST
2026-02-06 12:12:05 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 6  user 34, type: USER_HOST
2026-02-06 12:12:05 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 6 and 34
2026-02-06 12:12:05 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=9
2026-02-06 12:12:05 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 6 to user 34
2026-02-06 12:12:05 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=259
2026-02-06 12:12:05 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-2 session=mq3fmyce
2026-02-06 12:12:05 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-3 session=mq3fmyce
2026-02-06 12:12:05 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 6
2026-02-06 12:12:05 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 6
2026-02-06 12:12:05 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 6
2026-02-06 12:12:05 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 6
2026-02-06 12:12:05 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 12:12:05 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 9
2026-02-06 12:12:05 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":6,"count":0}
2026-02-06 12:12:12 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 6
2026-02-06 12:12:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 6
2026-02-06 12:12:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_HOST conversations
2026-02-06 12:12:13 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:12:13 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:12:13 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 12:12:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=mq3fmyce
2026-02-06 12:12:38 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-4 session=mq3fmyce
2026-02-06 12:12:38 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-5 session=mq3fmyce
2026-02-06 12:12:38 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 6
2026-02-06 12:12:38 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 6
2026-02-06 12:12:38 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 6
2026-02-06 12:12:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 6
2026-02-06 12:12:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 9
2026-02-06 12:12:38 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 12:12:38 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":6,"count":0}
2026-02-06 12:13:38 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.InvalidCredentialsException: Invalid email or password!]
2026-02-06 12:13:38 [http-nio-8080-exec-4] ERROR c.e.e.s.JwtAuthenticationFilter - JWT token extraction failed: JWT strings must contain exactly 2 period characters. Found: 0
2026-02-06 12:13:38 [http-nio-8080-exec-4] WARN  o.s.web.servlet.PageNotFound - No mapping for POST /api/auth/refresh
2026-02-06 12:13:38 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.NoHandlerFoundException: No endpoint POST /api/auth/refresh.]
2026-02-06 12:14:07 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 12:14:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:14:07 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 12:14:07 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359347900
2026-02-06 12:14:07 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 34
2026-02-06 12:14:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:14:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/769/ssw0zpml/websocket
2026-02-06 12:14:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ssw0zpml]
2026-02-06 12:14:07 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ssw0zpml
2026-02-06 12:14:07 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ssw0zpml
2026-02-06 12:14:07 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ganesh@gmail.com - Session: ssw0zpml
2026-02-06 12:14:07 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ganesh@gmail.com
2026-02-06 12:14:07 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ganesh@gmail.com
2026-02-06 12:14:07 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:14:07 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ganesh@gmail.com (ID: 34), Session: ssw0zpml
2026-02-06 12:14:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ganesh@gmail.com session=ssw0zpml
2026-02-06 12:14:07 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ssw0zpml
2026-02-06 12:14:07 [clientOutboundChannel-8] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MzQsInN1YiI6ImdhbmVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTkzMzMsImV4cCI6MTc3MDM2MjkzM30.82lAaILlzAWzBz97G12WaxVZVByX9FXU0jmvkHDNAYY], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359347976, userId=34, username=ganesh@gmail.com}, simpHeartbeat=[J@7e943b08, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7053daaa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ssw0zpml}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7053daaa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ssw0zpml}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:14:07 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 12:14:07 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 12:14:07 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userssw0zpml subscriptionId=sub-0 session=ssw0zpml user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:14:08 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userssw0zpml subscriptionId=sub-1 session=ssw0zpml user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:14:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 34
2026-02-06 12:14:11 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-2 session=ssw0zpml
2026-02-06 12:14:11 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-3 session=ssw0zpml
2026-02-06 12:14:11 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 34
2026-02-06 12:14:11 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 34
2026-02-06 12:14:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 34
2026-02-06 12:14:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 34
2026-02-06 12:14:11 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 9
2026-02-06 12:14:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 9
2026-02-06 12:14:11 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":34,"count":1}
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:33 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:34 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:36 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:36 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:36 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:36 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:36 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:36 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:36 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:36 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ssw0zpml, lookupDestination='/chat.stopTyping'
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":false,"timestamp":1770359378068}
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:38 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=mq3fmyce, lookupDestination='/chat.typing'
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 12:14:40 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:42 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=mq3fmyce, lookupDestination='/chat.stopTyping'
2026-02-06 12:14:42 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 12:14:42 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":false,"timestamp":1770359382830}
2026-02-06 12:14:42 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:52 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:53 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:54 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:55 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:56 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:57 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:57 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:58 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:58 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:58 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:58 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:58 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:59 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:59 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:59 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:59 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:14:59 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:01 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ssw0zpml, lookupDestination='/chat.stopTyping'
2026-02-06 12:15:01 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 12:15:01 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":false,"timestamp":1770359401632}
2026-02-06 12:15:01 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:02 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:02 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:03 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:03 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:03 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:03 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:03 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:04 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:04 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:05 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ssw0zpml, lookupDestination='/chat.typing'
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":true,"username":"ganesh@gmail.com","t...(truncated)
2026-02-06 12:15:05 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:06 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=ssw0zpml, lookupDestination='/chat.sendMessage'
2026-02-06 12:15:06 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ssw0zpml, lookupDestination='/chat.stopTyping'
2026-02-06 12:15:06 [clientInboundChannel-5] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 12:15:06 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 12:15:06 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":false,"timestamp":1770359406213}
2026-02-06 12:15:06 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:06 [clientInboundChannel-4] INFO  c.e.e.controller.ChatController -  WebSocket message from ganesh@gmail.com (34) to 6
2026-02-06 12:15:06 [clientInboundChannel-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 34 to user 6
2026-02-06 12:15:06 [clientInboundChannel-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=260
2026-02-06 12:15:06 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/9 session=null payload={"id":260,"conversationId":9,"senderId":34,"senderName":"Ganesh Dahal","receiver...(truncated)
2026-02-06 12:15:06 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:06 [clientInboundChannel-4] INFO  c.e.e.controller.ChatController -  Message 260 sent successfully
2026-02-06 12:15:06 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=ssw0zpml payload={"id":260,"conversationId":9,"senderId":34,"senderName":"Ganesh Dahal","receiver...(truncated)
2026-02-06 12:15:06 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:15:06 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 12:15:06 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:15:06 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 12:15:06 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 12:15:06 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 34
2026-02-06 12:15:06 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 6
2026-02-06 12:15:06 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 6
2026-02-06 12:15:06 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 9
2026-02-06 12:15:06 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 34
2026-02-06 12:15:06 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 34
2026-02-06 12:15:07 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 12:15:07 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":6,"count":1}
2026-02-06 12:15:07 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":34,"count":0}
2026-02-06 12:15:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ssw0zpml, lookupDestination='/chat.stopTyping'
2026-02-06 12:15:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 12:15:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":34,"isTyping":false,"timestamp":1770359407779}
2026-02-06 12:15:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 12:15:26 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=mq3fmyce
2026-02-06 12:15:26 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/5 id=sub-6 session=mq3fmyce
2026-02-06 12:15:26 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/5 id=sub-7 session=mq3fmyce
2026-02-06 12:15:26 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 5 by user 6
2026-02-06 12:15:26 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 5 as read by user 6
2026-02-06 12:15:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 5 by user 6
2026-02-06 12:15:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 5 as read by user 6
2026-02-06 12:15:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 5
2026-02-06 12:15:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 5
2026-02-06 12:15:26 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/5 session=null payload={"conversationId":5,"readBy":6,"count":0}
2026-02-06 12:15:28 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=mq3fmyce
2026-02-06 12:15:28 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-8 session=mq3fmyce
2026-02-06 12:15:28 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-9 session=mq3fmyce
2026-02-06 12:15:28 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 6
2026-02-06 12:15:28 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 6
2026-02-06 12:15:28 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 6
2026-02-06 12:15:28 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 6
2026-02-06 12:15:28 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 9
2026-02-06 12:15:28 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 12:15:28 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":6,"count":0}
2026-02-06 12:15:35 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 12:15:35 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 12:15:35 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 34
2026-02-06 12:15:37 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=ssw0zpml
2026-02-06 12:15:37 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/7 id=sub-4 session=ssw0zpml
2026-02-06 12:15:37 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/7 id=sub-5 session=ssw0zpml
2026-02-06 12:15:37 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 7 as read by user 34
2026-02-06 12:15:37 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 7 by user 34
2026-02-06 12:15:37 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 7 as read by user 34
2026-02-06 12:15:37 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 7 by user 34
2026-02-06 12:15:37 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 7
2026-02-06 12:15:37 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 7
2026-02-06 12:15:37 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/7 session=null payload={"conversationId":7,"readBy":34,"count":0}
2026-02-06 12:15:38 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=ssw0zpml
2026-02-06 12:15:38 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-6 session=ssw0zpml
2026-02-06 12:15:38 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-7 session=ssw0zpml
2026-02-06 12:15:38 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 34
2026-02-06 12:15:38 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 34
2026-02-06 12:15:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 34
2026-02-06 12:15:38 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 34
2026-02-06 12:15:38 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 9
2026-02-06 12:15:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 12:15:38 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":34,"count":0}
2026-02-06 12:16:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ssw0zpml] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:16:54 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ssw0zpml
2026-02-06 12:16:54 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ganesh@gmail.com (ID: 34), Session: ssw0zpml
2026-02-06 12:16:54 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 34 went OFFLINE (last session closed)
2026-02-06 12:16:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 34 status to OFFLINE
2026-02-06 12:16:54 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/34 session=null payload={"userId":34,"timestamp":1770359514894,"status":"OFFLINE"}
2026-02-06 12:16:54 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ssw0zpml
2026-02-06 12:16:54 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359347976, userId=34, username=ganesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7053daaa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ssw0zpml}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7053daaa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ssw0zpml}]
2026-02-06 12:17:03 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ssw0zpml]
2026-02-06 12:17:56 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:17:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:17:56 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 12:19:03 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 6
2026-02-06 12:19:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 6
2026-02-06 12:19:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 12:19:05 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 12:19:05 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 12:19:05 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 12:19:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mq3fmyce] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:19:08 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mq3fmyce
2026-02-06 12:19:08 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: mq3fmyce
2026-02-06 12:19:08 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 12:19:08 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 12:19:08 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"userId":6,"timestamp":1770359648658,"status":"OFFLINE"}
2026-02-06 12:19:08 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mq3fmyce
2026-02-06 12:19:08 [clientOutboundChannel-16] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359225529, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@319ac6d1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mq3fmyce}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@319ac6d1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mq3fmyce}]
2026-02-06 12:19:18 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:19:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:19:18 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359658147
2026-02-06 12:19:18 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:19:18 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 32
2026-02-06 12:19:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:19:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/554/oi5x2ydz/websocket
2026-02-06 12:19:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=oi5x2ydz]
2026-02-06 12:19:18 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [mq3fmyce]
2026-02-06 12:19:18 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: oi5x2ydz
2026-02-06 12:19:18 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: oi5x2ydz
2026-02-06 12:19:18 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: oi5x2ydz
2026-02-06 12:19:18 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 12:19:18 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 12:19:18 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:19:18 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:19:18 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: oi5x2ydz
2026-02-06 12:19:18 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: oi5x2ydz
2026-02-06 12:19:18 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=oi5x2ydz
2026-02-06 12:19:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:19:18 [clientOutboundChannel-17] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzU5NjU1LCJleHAiOjE3NzAzNjMyNTV9.3Sn4D5RV9zvSgLP4rRSnwDotiKA9fS4Knwr6uBAGlNE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359658211, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@5ab621b2, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5471c494, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=oi5x2ydz}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5471c494, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=oi5x2ydz}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:19:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 32
2026-02-06 12:19:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useroi5x2ydz subscriptionId=sub-0 session=oi5x2ydz user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:19:18 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useroi5x2ydz subscriptionId=sub-1 session=oi5x2ydz user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:19:20 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-2 session=oi5x2ydz
2026-02-06 12:19:20 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-3 session=oi5x2ydz
2026-02-06 12:19:20 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 12:19:20 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 12:19:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 12:19:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 12:19:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 12:19:20 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 12:19:20 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 232 messages in conversation 8
2026-02-06 12:19:29 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 12:19:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 12:19:29 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 USER_ADMIN conversations
2026-02-06 12:19:30 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 12:19:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 12:19:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 32
2026-02-06 12:19:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=oi5x2ydz] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:19:35 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session oi5x2ydz
2026-02-06 12:19:35 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: oi5x2ydz
2026-02-06 12:19:35 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 12:19:35 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 12:19:35 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"userId":32,"timestamp":1770359675265,"status":"OFFLINE"}
2026-02-06 12:19:35 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=oi5x2ydz
2026-02-06 12:19:35 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359658211, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5471c494, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=oi5x2ydz}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5471c494, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=oi5x2ydz}]
2026-02-06 12:19:43 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [oi5x2ydz]
2026-02-06 12:19:48 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 12:19:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:19:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359688720
2026-02-06 12:19:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 12:19:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 1
2026-02-06 12:19:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:19:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/440/qnrif1zg/websocket
2026-02-06 12:19:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qnrif1zg]
2026-02-06 12:19:48 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: qnrif1zg
2026-02-06 12:19:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: qnrif1zg
2026-02-06 12:19:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: qnrif1zg
2026-02-06 12:19:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 12:19:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 12:19:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:19:48 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: qnrif1zg
2026-02-06 12:19:48 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=qnrif1zg
2026-02-06 12:19:48 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: qnrif1zg
2026-02-06 12:19:48 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 12:19:48 [clientOutboundChannel-15] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM1OTY4MCwiZXhwIjoxNzcwMzYzMjgwfQ.wfpAP5Alfl0rZMSCpYVsRM1HhY5cOwr5VME5MIGilyw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359688779, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@675e54f8, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6999a663, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=qnrif1zg}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6999a663, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=qnrif1zg}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:19:48 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 12:19:48 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userqnrif1zg subscriptionId=sub-0 session=qnrif1zg user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:19:48 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userqnrif1zg subscriptionId=sub-1 session=qnrif1zg user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:19:48 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 1
2026-02-06 12:19:55 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 1
2026-02-06 12:19:55 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 1
2026-02-06 12:19:55 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 USER_ADMIN conversations
2026-02-06 12:19:58 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 12:19:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching HOST_ADMIN conversations for user 1
2026-02-06 12:19:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 HOST_ADMIN conversations
2026-02-06 12:20:00 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 12:20:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 12:20:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 1
2026-02-06 12:20:08 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'hari'
2026-02-06 12:20:08 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'hari'
2026-02-06 12:20:10 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'ha'
2026-02-06 12:20:10 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'ha'
2026-02-06 12:20:12 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'dev'
2026-02-06 12:20:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'dev'
2026-02-06 12:20:13 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'de'
2026-02-06 12:20:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'de'
2026-02-06 12:20:15 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Admin 1 searching users with term: 'jo'
2026-02-06 12:20:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 1 searching users with term: 'jo'
2026-02-06 12:20:25 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-2 session=qnrif1zg
2026-02-06 12:20:25 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-3 session=qnrif1zg
2026-02-06 12:20:25 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 1
2026-02-06 12:20:25 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 1
2026-02-06 12:20:25 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 1
2026-02-06 12:20:25 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 1
2026-02-06 12:20:25 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 12:20:25 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 12:20:25 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":1,"count":0}
2026-02-06 12:21:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qnrif1zg] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:21:28 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qnrif1zg
2026-02-06 12:21:28 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: qnrif1zg
2026-02-06 12:21:28 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 12:21:28 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 12:21:28 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"userId":1,"timestamp":1770359788952,"status":"OFFLINE"}
2026-02-06 12:21:28 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qnrif1zg
2026-02-06 12:21:28 [clientOutboundChannel-22] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359688779, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6999a663, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=qnrif1zg}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6999a663, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=qnrif1zg}]
2026-02-06 12:21:36 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:21:36 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:21:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:21:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359796510
2026-02-06 12:21:36 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 12:21:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:21:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/374/iwaoxaym/websocket
2026-02-06 12:21:36 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iwaoxaym]
2026-02-06 12:21:36 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: iwaoxaym
2026-02-06 12:21:36 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: iwaoxaym
2026-02-06 12:21:36 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:21:36 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: iwaoxaym
2026-02-06 12:21:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:21:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 12:21:36 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 12:21:36 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 12:21:36 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:21:36 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: iwaoxaym
2026-02-06 12:21:36 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: iwaoxaym
2026-02-06 12:21:36 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=iwaoxaym
2026-02-06 12:21:36 [clientOutboundChannel-23] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTk3OTQsImV4cCI6MTc3MDM2MzM5NH0.xju_yponPapVcjrtUrc4jWR34bRez-74l2Ou5iP9Ngo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359796574, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@483aca1, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@a445241, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iwaoxaym}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@a445241, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iwaoxaym}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:21:36 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useriwaoxaym subscriptionId=sub-0 session=iwaoxaym user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:21:36 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useriwaoxaym subscriptionId=sub-1 session=iwaoxaym user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:21:38 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [qnrif1zg]
2026-02-06 12:21:45 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-2 session=iwaoxaym
2026-02-06 12:21:45 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-3 session=iwaoxaym
2026-02-06 12:21:45 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 12:21:45 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 12:21:45 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 12:21:45 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 12:21:45 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 12:21:45 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 12:21:45 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 12:22:36 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=iwaoxaym
2026-02-06 12:22:36 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-4 session=iwaoxaym
2026-02-06 12:22:36 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-5 session=iwaoxaym
2026-02-06 12:22:36 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 12:22:36 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 12:22:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 12:22:36 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 12:22:36 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 12:22:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 12:22:36 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 12:22:41 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:22:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:22:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 12:23:48 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=iwaoxaym
2026-02-06 12:23:48 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=iwaoxaym
2026-02-06 12:23:48 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=iwaoxaym
2026-02-06 12:23:48 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=iwaoxaym
2026-02-06 12:23:48 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=iwaoxaym
2026-02-06 12:23:48 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-6 session=iwaoxaym
2026-02-06 12:23:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iwaoxaym] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:23:48 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iwaoxaym
2026-02-06 12:23:48 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: iwaoxaym
2026-02-06 12:23:48 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 12:23:48 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 12:23:48 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"userId":31,"timestamp":1770359928323,"status":"OFFLINE"}
2026-02-06 12:23:48 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iwaoxaym
2026-02-06 12:23:48 [clientOutboundChannel-29] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359796574, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@a445241, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iwaoxaym}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@a445241, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iwaoxaym}]
2026-02-06 12:23:48 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 12:23:58 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [iwaoxaym]
2026-02-06 12:23:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:23:59 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359939905
2026-02-06 12:23:59 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:23:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:23:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 12:23:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:23:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/262/mborgiad/websocket
2026-02-06 12:23:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mborgiad]
2026-02-06 12:23:59 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: mborgiad
2026-02-06 12:23:59 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: mborgiad
2026-02-06 12:23:59 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: mborgiad
2026-02-06 12:23:59 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 12:23:59 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:23:59 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 12:23:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:23:59 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:24:00 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: mborgiad
2026-02-06 12:24:00 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=mborgiad
2026-02-06 12:24:00 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: mborgiad
2026-02-06 12:24:00 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 31
2026-02-06 12:24:00 [clientOutboundChannel-26] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTk3OTQsImV4cCI6MTc3MDM2MzM5NH0.xju_yponPapVcjrtUrc4jWR34bRez-74l2Ou5iP9Ngo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359939999, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@34391b11, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3afee3e6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mborgiad}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3afee3e6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mborgiad}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:24:00 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usermborgiad subscriptionId=sub-0 session=mborgiad user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:24:00 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usermborgiad subscriptionId=sub-1 session=mborgiad user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:24:00 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 18, type: USER_HOST
2026-02-06 12:24:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 18, type: USER_HOST
2026-02-06 12:24:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 31 and 18
2026-02-06 12:24:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=10
2026-02-06 12:24:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 18
2026-02-06 12:24:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=261
2026-02-06 12:24:00 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-2 session=mborgiad
2026-02-06 12:24:00 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-3 session=mborgiad
2026-02-06 12:24:00 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:00 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:24:00 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:24:00 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:00 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 10
2026-02-06 12:24:00 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:24:00 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:24:04 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=mborgiad
2026-02-06 12:24:04 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=mborgiad
2026-02-06 12:24:04 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=mborgiad
2026-02-06 12:24:04 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=mborgiad
2026-02-06 12:24:04 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=mborgiad
2026-02-06 12:24:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mborgiad] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:24:04 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mborgiad
2026-02-06 12:24:04 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: mborgiad
2026-02-06 12:24:04 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 12:24:04 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 12:24:04 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"userId":31,"timestamp":1770359944323,"status":"OFFLINE"}
2026-02-06 12:24:04 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mborgiad
2026-02-06 12:24:04 [clientOutboundChannel-28] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359939999, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3afee3e6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mborgiad}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3afee3e6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mborgiad}]
2026-02-06 12:24:04 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 12:24:13 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [mborgiad]
2026-02-06 12:24:17 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 12:24:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:24:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770359970058
2026-02-06 12:24:30 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:24:30 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:24:30 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:24:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:24:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/984/nsyaamop/websocket
2026-02-06 12:24:30 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=nsyaamop]
2026-02-06 12:24:30 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: nsyaamop
2026-02-06 12:24:30 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: nsyaamop
2026-02-06 12:24:30 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: nsyaamop
2026-02-06 12:24:30 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 12:24:30 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 12:24:30 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:24:30 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: nsyaamop
2026-02-06 12:24:30 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: nsyaamop
2026-02-06 12:24:30 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=nsyaamop
2026-02-06 12:24:30 [clientOutboundChannel-29] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTk3OTQsImV4cCI6MTc3MDM2MzM5NH0.xju_yponPapVcjrtUrc4jWR34bRez-74l2Ou5iP9Ngo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770359970149, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@36ffd92d, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@38383182, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nsyaamop}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@38383182, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nsyaamop}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:24:30 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:24:30 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:24:30 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usernsyaamop subscriptionId=sub-0 session=nsyaamop user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:24:30 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usernsyaamop subscriptionId=sub-1 session=nsyaamop user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:24:30 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:24:30 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 18, type: USER_HOST
2026-02-06 12:24:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 18, type: USER_HOST
2026-02-06 12:24:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 18
2026-02-06 12:24:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=262
2026-02-06 12:24:30 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-2 session=nsyaamop
2026-02-06 12:24:30 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-3 session=nsyaamop
2026-02-06 12:24:30 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:24:30 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:30 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:24:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:30 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:24:30 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 10
2026-02-06 12:24:30 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:24:38 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=nsyaamop
2026-02-06 12:24:38 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-4 session=nsyaamop
2026-02-06 12:24:38 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-5 session=nsyaamop
2026-02-06 12:24:38 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:38 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:24:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:24:38 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:24:38 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 10
2026-02-06 12:24:38 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:24:42 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=nsyaamop
2026-02-06 12:24:42 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-6 session=nsyaamop
2026-02-06 12:24:42 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-7 session=nsyaamop
2026-02-06 12:24:42 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 12:24:42 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 12:24:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 12:24:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 12:24:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 12:24:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 12:24:42 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 12:24:44 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=nsyaamop
2026-02-06 12:24:44 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-8 session=nsyaamop
2026-02-06 12:24:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-9 session=nsyaamop
2026-02-06 12:24:44 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:24:44 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:44 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:24:44 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:44 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:24:44 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 10
2026-02-06 12:24:44 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:24:47 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:24:47 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:24:47 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:24:56 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-8 session=nsyaamop
2026-02-06 12:24:56 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-10 session=nsyaamop
2026-02-06 12:24:56 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-11 session=nsyaamop
2026-02-06 12:24:56 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 12:24:56 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 12:24:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 12:24:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 12:24:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 12:24:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 12:24:56 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 12:24:59 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-10 session=nsyaamop
2026-02-06 12:24:59 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-12 session=nsyaamop
2026-02-06 12:24:59 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-13 session=nsyaamop
2026-02-06 12:24:59 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:24:59 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:24:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:24:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 10
2026-02-06 12:24:59 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:24:59 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:26:53 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-7 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-9 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-11 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-12 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-13 session=nsyaamop
2026-02-06 12:26:53 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-14 session=nsyaamop
2026-02-06 12:26:53 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=nsyaamop] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:26:53 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session nsyaamop
2026-02-06 12:26:53 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: nsyaamop
2026-02-06 12:26:53 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 12:26:53 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 12:26:53 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"userId":31,"timestamp":1770360113952,"status":"OFFLINE"}
2026-02-06 12:26:53 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=nsyaamop
2026-02-06 12:26:53 [clientOutboundChannel-32] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770359970149, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@38383182, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nsyaamop}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@38383182, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=nsyaamop}]
2026-02-06 12:27:03 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [nsyaamop]
2026-02-06 12:27:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:27:15 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:27:15 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770360135784
2026-02-06 12:27:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:27:15 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:27:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:27:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/339/d1pbj0f3/websocket
2026-02-06 12:27:15 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=d1pbj0f3]
2026-02-06 12:27:15 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: d1pbj0f3
2026-02-06 12:27:15 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: d1pbj0f3
2026-02-06 12:27:15 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: d1pbj0f3
2026-02-06 12:27:15 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 12:27:15 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 12:27:15 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:27:15 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: d1pbj0f3
2026-02-06 12:27:15 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=d1pbj0f3
2026-02-06 12:27:15 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: d1pbj0f3
2026-02-06 12:27:15 [clientOutboundChannel-33] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTk3OTQsImV4cCI6MTc3MDM2MzM5NH0.xju_yponPapVcjrtUrc4jWR34bRez-74l2Ou5iP9Ngo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770360135839, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@2b4ca671, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d1pbj0f3}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d1pbj0f3}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:27:15 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:27:15 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userd1pbj0f3 subscriptionId=sub-0 session=d1pbj0f3 user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:27:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:27:15 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userd1pbj0f3 subscriptionId=sub-1 session=d1pbj0f3 user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:27:15 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:27:15 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 18, type: USER_HOST
2026-02-06 12:27:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 18, type: USER_HOST
2026-02-06 12:27:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 18
2026-02-06 12:27:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=263
2026-02-06 12:27:16 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-2 session=d1pbj0f3
2026-02-06 12:27:16 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-3 session=d1pbj0f3
2026-02-06 12:27:16 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:27:16 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:27:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:27:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:27:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 10
2026-02-06 12:27:16 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:27:16 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:27:20 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:27:20 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:27:20 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:27:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=d1pbj0f3
2026-02-06 12:27:40 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-4 session=d1pbj0f3
2026-02-06 12:27:40 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-5 session=d1pbj0f3
2026-02-06 12:27:40 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 12:27:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 12:27:40 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 12:27:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 12:27:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 12:27:40 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 12:27:40 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 12:28:06 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=d1pbj0f3
2026-02-06 12:28:06 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=d1pbj0f3
2026-02-06 12:28:06 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=d1pbj0f3
2026-02-06 12:28:06 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=d1pbj0f3
2026-02-06 12:28:06 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-6 session=d1pbj0f3
2026-02-06 12:28:06 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=d1pbj0f3
2026-02-06 12:28:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=d1pbj0f3] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:28:06 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session d1pbj0f3
2026-02-06 12:28:06 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: d1pbj0f3
2026-02-06 12:28:06 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 12:28:06 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 12:28:06 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"userId":31,"timestamp":1770360186375,"status":"OFFLINE"}
2026-02-06 12:28:06 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=d1pbj0f3
2026-02-06 12:28:06 [clientOutboundChannel-38] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770360135839, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d1pbj0f3}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@258b4d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d1pbj0f3}]
2026-02-06 12:28:13 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [d1pbj0f3]
2026-02-06 12:28:13 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:28:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:28:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:28:13 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770360193487
2026-02-06 12:28:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:28:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:28:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/007/30wu1mhr/websocket
2026-02-06 12:28:13 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=30wu1mhr]
2026-02-06 12:28:13 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 30wu1mhr
2026-02-06 12:28:13 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 30wu1mhr
2026-02-06 12:28:13 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: 30wu1mhr
2026-02-06 12:28:13 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 12:28:13 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 12:28:13 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:28:13 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: 30wu1mhr
2026-02-06 12:28:13 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 30wu1mhr
2026-02-06 12:28:13 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=30wu1mhr
2026-02-06 12:28:13 [clientOutboundChannel-33] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTk3OTQsImV4cCI6MTc3MDM2MzM5NH0.xju_yponPapVcjrtUrc4jWR34bRez-74l2Ou5iP9Ngo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770360193551, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@64b64753, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a071a9a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=30wu1mhr}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a071a9a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=30wu1mhr}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:28:13 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:28:13 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:28:13 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user30wu1mhr subscriptionId=sub-0 session=30wu1mhr user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:28:13 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user30wu1mhr subscriptionId=sub-1 session=30wu1mhr user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:28:13 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:28:13 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 18, type: USER_HOST
2026-02-06 12:28:13 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 18, type: USER_HOST
2026-02-06 12:28:13 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 18
2026-02-06 12:28:13 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=264
2026-02-06 12:28:13 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-2 session=30wu1mhr
2026-02-06 12:28:13 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-3 session=30wu1mhr
2026-02-06 12:28:13 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:28:13 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:28:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:28:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:28:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:28:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 10
2026-02-06 12:28:13 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:28:16 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:28:16 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:28:16 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:28:18 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=30wu1mhr
2026-02-06 12:28:18 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=30wu1mhr
2026-02-06 12:28:18 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=30wu1mhr
2026-02-06 12:28:18 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=30wu1mhr
2026-02-06 12:28:18 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=30wu1mhr
2026-02-06 12:28:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=30wu1mhr] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:28:18 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 30wu1mhr
2026-02-06 12:28:18 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: 30wu1mhr
2026-02-06 12:28:18 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 12:28:18 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 12:28:18 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"userId":31,"timestamp":1770360198512,"status":"OFFLINE"}
2026-02-06 12:28:18 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=30wu1mhr
2026-02-06 12:28:18 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770360193551, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a071a9a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=30wu1mhr}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@2a071a9a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=30wu1mhr}]
2026-02-06 12:28:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:28:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770360199277
2026-02-06 12:28:19 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:28:19 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:28:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@131e28f8
2026-02-06 12:28:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/186/2jbqekxq/websocket
2026-02-06 12:28:19 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:28:19 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=2jbqekxq]
2026-02-06 12:28:19 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 2jbqekxq
2026-02-06 12:28:19 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 2jbqekxq
2026-02-06 12:28:19 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: 2jbqekxq
2026-02-06 12:28:19 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 12:28:19 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 12:28:19 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:28:19 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: 2jbqekxq
2026-02-06 12:28:19 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=2jbqekxq
2026-02-06 12:28:19 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 2jbqekxq
2026-02-06 12:28:19 [clientOutboundChannel-38] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNTk3OTQsImV4cCI6MTc3MDM2MzM5NH0.xju_yponPapVcjrtUrc4jWR34bRez-74l2Ou5iP9Ngo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770360199361, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@1ed868d, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f2a78c0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2jbqekxq}], simpHeartbeat=[J@75c7753f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f2a78c0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2jbqekxq}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:28:19 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user2jbqekxq subscriptionId=sub-0 session=2jbqekxq user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:28:19 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user2jbqekxq subscriptionId=sub-1 session=2jbqekxq user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:28:19 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:28:19 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:28:19 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:28:19 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 18, type: USER_HOST
2026-02-06 12:28:19 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 18, type: USER_HOST
2026-02-06 12:28:19 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 18
2026-02-06 12:28:19 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=265
2026-02-06 12:28:19 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-2 session=2jbqekxq
2026-02-06 12:28:19 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-3 session=2jbqekxq
2026-02-06 12:28:19 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 12:28:19 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 12:28:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 12:28:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 12:28:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 10
2026-02-06 12:28:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 12:28:19 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 12:28:23 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:28:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:28:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:28:28 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [30wu1mhr]
2026-02-06 12:28:57 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=2jbqekxq
2026-02-06 12:28:57 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=2jbqekxq
2026-02-06 12:28:57 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=2jbqekxq
2026-02-06 12:28:57 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=2jbqekxq
2026-02-06 12:28:57 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=2jbqekxq
2026-02-06 12:28:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=2jbqekxq] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:28:57 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 2jbqekxq
2026-02-06 12:28:57 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: 2jbqekxq
2026-02-06 12:28:57 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 12:28:57 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 12:28:57 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"userId":31,"timestamp":1770360237293,"status":"OFFLINE"}
2026-02-06 12:28:57 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=2jbqekxq
2026-02-06 12:28:57 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770360199361, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f2a78c0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2jbqekxq}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f2a78c0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=2jbqekxq}]
2026-02-06 12:28:58 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 12:29:03 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [2jbqekxq]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 12:29:18 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 12:29:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 12:29:18 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e65e37b]]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e65e37b]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7e65e37b]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 12:29:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:29:18 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 12:29:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 12:29:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 12:41:56 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 1968 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 12:41:56 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 12:41:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 12:41:56 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 12:41:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 12:41:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 291 ms. Found 9 JPA repository interfaces.
2026-02-06 12:42:01 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 12:42:01 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 12:42:01 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 12:42:01 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 12:42:01 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 4817 ms
2026-02-06 12:42:02 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 12:42:02 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 12:42:02 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 12:42:03 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 12:42:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 12:42:03 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@33eb97de
2026-02-06 12:42:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 12:42:03 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 12:42:03 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 12:42:06 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 12:42:06 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 12:42:07 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 12:42:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 12:42:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 12:42:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 12:42:14 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 12:42:14 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 12:42:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 12:42:14 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 12:42:14 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 12:42:15 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 12:42:15 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 12:42:15 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2a598a4b]
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2a598a4b]
2026-02-06 12:42:15 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2a598a4b]]
2026-02-06 12:42:15 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:42:15 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 12:42:15 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 12:42:15 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 12:42:15 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 19.877 seconds (process running for 20.827)
2026-02-06 12:42:19 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 12:42:19 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 12:42:19 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-06 12:42:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:42:21 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 12:42:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 12:42:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770361041720
2026-02-06 12:42:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:42:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/079/s330xzch/websocket
2026-02-06 12:42:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 12:42:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=s330xzch]
2026-02-06 12:42:21 [http-nio-8080-exec-8] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 12:42:21 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: s330xzch
2026-02-06 12:42:21 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: s330xzch
2026-02-06 12:42:21 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: s330xzch
2026-02-06 12:42:21 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 12:42:21 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 12:42:21 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:42:21 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: s330xzch
2026-02-06 12:42:21 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=s330xzch
2026-02-06 12:42:21 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: s330xzch
2026-02-06 12:42:21 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjEwMzksImV4cCI6MTc3MDM2NDYzOX0.lah0dJX4LksGUn30lFGvsVJXiM492ZpWliYzQSHYzEc], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770361041956, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@1e0d80f6, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f49251c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=s330xzch}], simpHeartbeat=[J@7e75e34e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f49251c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=s330xzch}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:42:27 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Admin 31 searching users with term: ''
2026-02-06 12:42:27 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 31 searching users with term: ''
2026-02-06 12:42:27 [http-nio-8080-exec-2] ERROR c.e.e.controller.ChatController -  Unauthorized admin access: User is not an admin
2026-02-06 12:42:42 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-0 session=s330xzch
2026-02-06 12:42:42 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-1 session=s330xzch
2026-02-06 12:42:42 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 12:42:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 12:42:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 12:42:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=s330xzch] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:42:44 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session s330xzch
2026-02-06 12:42:44 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: s330xzch
2026-02-06 12:42:44 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 12:42:44 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 12:42:44 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770361064694}
2026-02-06 12:42:44 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=s330xzch
2026-02-06 12:42:44 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770361041956, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f49251c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=s330xzch}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6f49251c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=s330xzch}]
2026-02-06 12:42:51 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [s330xzch]
2026-02-06 12:42:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:42:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770361078229
2026-02-06 12:42:58 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 21 (page 0, size 50)
2026-02-06 12:42:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:42:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/790/sd0dvzqu/websocket
2026-02-06 12:42:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 21
2026-02-06 12:42:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 21
2026-02-06 12:42:58 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sd0dvzqu]
2026-02-06 12:42:58 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: sd0dvzqu
2026-02-06 12:42:58 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: sd0dvzqu
2026-02-06 12:42:58 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayan@gmail.com - Session: sd0dvzqu
2026-02-06 12:42:58 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayan@gmail.com
2026-02-06 12:42:58 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayan@gmail.com
2026-02-06 12:42:58 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:42:58 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayan@gmail.com (ID: 21), Session: sd0dvzqu
2026-02-06 12:42:58 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayan@gmail.com session=sd0dvzqu
2026-02-06 12:42:58 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: sd0dvzqu
2026-02-06 12:42:58 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjEsInN1YiI6Im5heWFuQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM2MTA3NiwiZXhwIjoxNzcwMzY0Njc2fQ.Llo6ahYNlSMbU9Wn1t_qC0kZi0hku7YaR29aeodzb3c], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770361078322, userId=21, username=nayan@gmail.com}, simpHeartbeat=[J@5098c1fb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5e5f2598, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sd0dvzqu}], simpHeartbeat=[J@7e75e34e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5e5f2598, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sd0dvzqu}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:43:00 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Admin 21 searching users with term: ''
2026-02-06 12:43:00 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 21 searching users with term: ''
2026-02-06 12:43:00 [http-nio-8080-exec-10] ERROR c.e.e.controller.ChatController -  Unauthorized admin access: User is not an admin
2026-02-06 12:43:15 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 15], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 15, active threads = 1, queued tasks = 1, completed tasks = 11]
2026-02-06 12:43:25 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Admin 21 searching users with term: ''
2026-02-06 12:43:25 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Admin 21 searching users with term: ''
2026-02-06 12:43:25 [http-nio-8080-exec-4] ERROR c.e.e.controller.ChatController -  Unauthorized admin access: User is not an admin
2026-02-06 12:46:21 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-0 session=sd0dvzqu
2026-02-06 12:46:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sd0dvzqu] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:46:21 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sd0dvzqu
2026-02-06 12:46:21 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayan@gmail.com (ID: 21), Session: sd0dvzqu
2026-02-06 12:46:21 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 21 went OFFLINE (last session closed)
2026-02-06 12:46:21 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 21 status to OFFLINE
2026-02-06 12:46:21 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/21 session=null payload={"status":"OFFLINE","userId":21,"timestamp":1770361281951}
2026-02-06 12:46:21 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sd0dvzqu
2026-02-06 12:46:21 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770361078322, userId=21, username=nayan@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5e5f2598, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sd0dvzqu}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5e5f2598, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sd0dvzqu}]
2026-02-06 12:46:22 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 12:46:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:46:30 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770361290016
2026-02-06 12:46:30 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 21 (page 0, size 50)
2026-02-06 12:46:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 21
2026-02-06 12:46:30 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 21
2026-02-06 12:46:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:46:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/254/4kabmxxg/websocket
2026-02-06 12:46:30 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4kabmxxg]
2026-02-06 12:46:30 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 4kabmxxg
2026-02-06 12:46:30 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 4kabmxxg
2026-02-06 12:46:30 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayan@gmail.com - Session: 4kabmxxg
2026-02-06 12:46:30 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayan@gmail.com
2026-02-06 12:46:30 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayan@gmail.com
2026-02-06 12:46:30 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:46:30 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayan@gmail.com (ID: 21), Session: 4kabmxxg
2026-02-06 12:46:30 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayan@gmail.com session=4kabmxxg
2026-02-06 12:46:30 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 4kabmxxg
2026-02-06 12:46:30 [clientOutboundChannel-9] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjEsInN1YiI6Im5heWFuQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM2MTA3NiwiZXhwIjoxNzcwMzY0Njc2fQ.Llo6ahYNlSMbU9Wn1t_qC0kZi0hku7YaR29aeodzb3c], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770361290123, userId=21, username=nayan@gmail.com}, simpHeartbeat=[J@6d6bc6e0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63ac253d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4kabmxxg}], simpHeartbeat=[J@7e75e34e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63ac253d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4kabmxxg}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:46:30 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 21 initiating conversation with user null, type: USER_HOST
2026-02-06 12:46:30 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 21  user null, type: USER_HOST
2026-02-06 12:46:30 [http-nio-8080-exec-6] ERROR c.e.e.controller.ChatController -  Invalid request: Participant ID is required
2026-02-06 12:46:31 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [sd0dvzqu]
2026-02-06 12:48:52 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-0 session=4kabmxxg
2026-02-06 12:48:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4kabmxxg] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:48:52 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4kabmxxg
2026-02-06 12:48:52 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayan@gmail.com (ID: 21), Session: 4kabmxxg
2026-02-06 12:48:52 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 21 went OFFLINE (last session closed)
2026-02-06 12:48:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 21 status to OFFLINE
2026-02-06 12:48:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:48:52 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770361432022
2026-02-06 12:48:52 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 21 (page 0, size 50)
2026-02-06 12:48:52 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 21
2026-02-06 12:48:52 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/21 session=null payload={"status":"OFFLINE","userId":21,"timestamp":1770361432042}
2026-02-06 12:48:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:48:52 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4kabmxxg
2026-02-06 12:48:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/250/jhekpvtn/websocket
2026-02-06 12:48:52 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 21
2026-02-06 12:48:52 [clientOutboundChannel-18] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770361290123, userId=21, username=nayan@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63ac253d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4kabmxxg}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@63ac253d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4kabmxxg}]
2026-02-06 12:48:52 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jhekpvtn]
2026-02-06 12:48:52 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: jhekpvtn
2026-02-06 12:48:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: jhekpvtn
2026-02-06 12:48:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayan@gmail.com - Session: jhekpvtn
2026-02-06 12:48:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayan@gmail.com
2026-02-06 12:48:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayan@gmail.com
2026-02-06 12:48:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:48:52 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayan@gmail.com (ID: 21), Session: jhekpvtn
2026-02-06 12:48:52 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: jhekpvtn
2026-02-06 12:48:52 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayan@gmail.com session=jhekpvtn
2026-02-06 12:48:52 [clientOutboundChannel-15] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjEsInN1YiI6Im5heWFuQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM2MTA3NiwiZXhwIjoxNzcwMzY0Njc2fQ.Llo6ahYNlSMbU9Wn1t_qC0kZi0hku7YaR29aeodzb3c], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770361432082, userId=21, username=nayan@gmail.com}, simpHeartbeat=[J@2c668ac5, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@22a16139, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jhekpvtn}], simpHeartbeat=[J@7e75e34e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@22a16139, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jhekpvtn}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:48:52 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 21 initiating conversation with user null, type: USER_HOST
2026-02-06 12:48:52 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 21  user null, type: USER_HOST
2026-02-06 12:48:52 [http-nio-8080-exec-4] ERROR c.e.e.controller.ChatController -  Invalid request: Participant ID is required
2026-02-06 12:48:58 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-0 session=jhekpvtn
2026-02-06 12:48:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jhekpvtn] closed with CloseStatus[code=1000, reason=null]
2026-02-06 12:48:59 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jhekpvtn
2026-02-06 12:48:59 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayan@gmail.com (ID: 21), Session: jhekpvtn
2026-02-06 12:48:59 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 21 went OFFLINE (last session closed)
2026-02-06 12:48:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 21 status to OFFLINE
2026-02-06 12:48:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:48:59 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770361439013
2026-02-06 12:48:59 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 21 (page 0, size 50)
2026-02-06 12:48:59 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/21 session=null payload={"status":"OFFLINE","userId":21,"timestamp":1770361439048}
2026-02-06 12:48:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1741459c
2026-02-06 12:48:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 21
2026-02-06 12:48:59 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jhekpvtn
2026-02-06 12:48:59 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770361432082, userId=21, username=nayan@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@22a16139, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jhekpvtn}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@22a16139, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=jhekpvtn}]
2026-02-06 12:48:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/644/femqap0b/websocket
2026-02-06 12:48:59 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 21
2026-02-06 12:48:59 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=femqap0b]
2026-02-06 12:48:59 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: femqap0b
2026-02-06 12:48:59 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: femqap0b
2026-02-06 12:48:59 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayan@gmail.com - Session: femqap0b
2026-02-06 12:48:59 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayan@gmail.com
2026-02-06 12:48:59 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 21 (page 0, size 50)
2026-02-06 12:48:59 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayan@gmail.com
2026-02-06 12:48:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 21
2026-02-06 12:48:59 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 12:48:59 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayan@gmail.com (ID: 21), Session: femqap0b
2026-02-06 12:48:59 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayan@gmail.com session=femqap0b
2026-02-06 12:48:59 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: femqap0b
2026-02-06 12:48:59 [clientOutboundChannel-18] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjEsInN1YiI6Im5heWFuQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM2MTA3NiwiZXhwIjoxNzcwMzY0Njc2fQ.Llo6ahYNlSMbU9Wn1t_qC0kZi0hku7YaR29aeodzb3c], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770361439105, userId=21, username=nayan@gmail.com}, simpHeartbeat=[J@2010121, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cc6ff11, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=femqap0b}], simpHeartbeat=[J@7e75e34e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cc6ff11, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=femqap0b}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 12:48:59 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 conversations for user 21
2026-02-06 12:48:59 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userfemqap0b subscriptionId=sub-0 session=femqap0b user=nayan@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:48:59 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userfemqap0b subscriptionId=sub-1 session=femqap0b user=nayan@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:48:59 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  User 21 initiating conversation with user 24, type: USER_HOST
2026-02-06 12:48:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 21  user 24, type: USER_HOST
2026-02-06 12:48:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 21 and 24
2026-02-06 12:48:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=11
2026-02-06 12:48:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 21 to user 24
2026-02-06 12:48:59 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=266
2026-02-06 12:48:59 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/11 id=sub-2 session=femqap0b
2026-02-06 12:48:59 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/11 id=sub-3 session=femqap0b
2026-02-06 12:48:59 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 11 as read by user 21
2026-02-06 12:48:59 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 11 by user 21
2026-02-06 12:48:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 11 by user 21
2026-02-06 12:48:59 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 11 as read by user 21
2026-02-06 12:48:59 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 11
2026-02-06 12:48:59 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 11
2026-02-06 12:48:59 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/11 session=null payload={"conversationId":11,"readBy":21,"count":0}
2026-02-06 12:49:01 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4kabmxxg]
2026-02-06 12:49:02 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userfemqap0b subscriptionId=sub-4 session=femqap0b user=nayan@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:49:02 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userfemqap0b subscriptionId=sub-5 session=femqap0b user=nayan@gmail.com attributes[4] payload=byte[0]
2026-02-06 12:49:06 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [jhekpvtn]
2026-02-06 12:58:30 [clientOutboundChannel-39] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session femqap0b with CloseStatus[code=1002, reason=null]
2026-02-06 12:58:30 [clientOutboundChannel-39] DEBUG o.s.w.s.a.NativeWebSocketSession - Closing StandardWebSocketSession[id=ff534766-3719-127f-5df7-f974f9217a94, uri=ws://localhost:8080/ws/644/femqap0b/websocket]
2026-02-06 12:58:30 [clientOutboundChannel-39] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=femqap0b] closed with CloseStatus[code=1002, reason=null]
2026-02-06 12:58:30 [clientOutboundChannel-39] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session femqap0b
2026-02-06 12:58:30 [clientOutboundChannel-39] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayan@gmail.com (ID: 21), Session: femqap0b
2026-02-06 12:58:30 [clientOutboundChannel-39] INFO  c.e.e.config.WebSocketEventListener -  User 21 went OFFLINE (last session closed)
2026-02-06 12:58:30 [clientOutboundChannel-39] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 21 status to OFFLINE
2026-02-06 12:58:31 [clientOutboundChannel-39] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/21 session=null payload={"status":"OFFLINE","userId":21,"timestamp":1770362011018}
2026-02-06 12:58:31 [clientInboundChannel-26] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=femqap0b
2026-02-06 12:58:31 [clientOutboundChannel-37] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770361439105, userId=21, username=nayan@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cc6ff11, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=femqap0b}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cc6ff11, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=femqap0b}]
2026-02-06 12:58:36 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [femqap0b]
2026-02-06 13:05:45 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-06 13:05:45 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 13:05:45 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 13:05:45 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 13:05:45 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 13:05:45 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 13:05:45 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2a598a4b]]
2026-02-06 13:05:45 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2a598a4b]
2026-02-06 13:05:45 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2a598a4b]
2026-02-06 13:05:45 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 13:05:45 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:05:45 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:05:45 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 13:05:45 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 13:05:45 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 13:05:45 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 1968 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 13:05:45 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 13:05:48 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 13:05:48 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 198 ms. Found 9 JPA repository interfaces.
2026-02-06 13:05:49 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 13:05:49 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 13:05:49 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 13:05:49 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 13:05:49 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 3428 ms
2026-02-06 13:05:49 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 13:05:49 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 13:05:49 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 13:05:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2026-02-06 13:05:49 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@51fb779d
2026-02-06 13:05:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2026-02-06 13:05:49 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 13:05:49 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 13:05:51 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 13:05:51 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 13:05:52 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 13:05:52 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 13:05:52 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 13:05:52 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 13:05:52 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 13:05:52 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 13:05:52 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 13:05:52 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 13:05:52 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 13:05:52 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@20756ea4]
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@20756ea4]
2026-02-06 13:05:52 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@20756ea4]]
2026-02-06 13:05:52 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:05:52 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:05:52 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 13:05:52 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 13:05:52 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 7.148 seconds (process running for 1438.003)
2026-02-06 13:05:52 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-06 13:05:57 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 6 class path changes (0 additions, 0 deletions, 6 modifications)
2026-02-06 13:05:57 [Thread-12] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 13:05:57 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 13:05:57 [Thread-12] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 13:05:57 [Thread-12] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 13:05:57 [Thread-12] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 13:05:57 [Thread-12] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@20756ea4]]
2026-02-06 13:05:57 [Thread-12] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@20756ea4]
2026-02-06 13:05:57 [Thread-12] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@20756ea4]
2026-02-06 13:05:57 [Thread-12] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 13:05:57 [Thread-12] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:05:57 [Thread-12] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:05:57 [Thread-12] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 13:05:57 [Thread-12] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2026-02-06 13:05:57 [Thread-12] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2026-02-06 13:05:57 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 1968 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 13:05:57 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 13:05:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 13:05:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 317 ms. Found 9 JPA repository interfaces.
2026-02-06 13:06:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 13:06:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 13:06:00 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 13:06:00 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 13:06:00 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2690 ms
2026-02-06 13:06:00 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 13:06:00 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 13:06:00 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 13:06:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2026-02-06 13:06:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@77c0ba99
2026-02-06 13:06:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2026-02-06 13:06:00 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 13:06:00 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 13:06:00 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 13:06:01 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 13:06:01 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 13:06:01 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 13:06:01 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 13:06:01 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 13:06:02 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 13:06:02 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 13:06:02 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 13:06:02 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 13:06:02 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 13:06:03 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 13:06:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 13:06:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 13:06:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 13:06:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d5ccbae]
2026-02-06 13:06:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d5ccbae]
2026-02-06 13:06:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d5ccbae]]
2026-02-06 13:06:03 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 13:06:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:06:03 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:06:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 13:06:03 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 13:06:03 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 5.683 seconds (process running for 1448.236)
2026-02-06 13:06:03 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-06 13:06:04 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 13:06:04 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 13:06:04 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2026-02-06 13:06:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:06:09 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362469026
2026-02-06 13:06:09 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 21 (page 0, size 50)
2026-02-06 13:06:09 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 21
2026-02-06 13:06:09 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 21
2026-02-06 13:06:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:06:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/244/1f50p2yk/websocket
2026-02-06 13:06:09 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=1f50p2yk]
2026-02-06 13:06:09 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 1f50p2yk
2026-02-06 13:06:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 1f50p2yk
2026-02-06 13:06:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayan@gmail.com - Session: 1f50p2yk
2026-02-06 13:06:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayan@gmail.com
2026-02-06 13:06:09 [http-nio-8080-exec-3] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 13:06:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayan@gmail.com
2026-02-06 13:06:09 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:06:09 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayan@gmail.com (ID: 21), Session: 1f50p2yk
2026-02-06 13:06:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayan@gmail.com session=1f50p2yk
2026-02-06 13:06:09 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 1f50p2yk
2026-02-06 13:06:09 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjEsInN1YiI6Im5heWFuQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM2MTA3NiwiZXhwIjoxNzcwMzY0Njc2fQ.Llo6ahYNlSMbU9Wn1t_qC0kZi0hku7YaR29aeodzb3c], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362469113, userId=21, username=nayan@gmail.com}, simpHeartbeat=[J@581efffa, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@56d91a89, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1f50p2yk}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@56d91a89, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1f50p2yk}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:06:09 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user1f50p2yk subscriptionId=sub-0 session=1f50p2yk user=nayan@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:06:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user1f50p2yk subscriptionId=sub-1 session=1f50p2yk user=nayan@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:06:09 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 21 (page 0, size 50)
2026-02-06 13:06:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 21
2026-02-06 13:06:09 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 21
2026-02-06 13:06:09 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 21 initiating conversation with user 24, type: USER_HOST
2026-02-06 13:06:09 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 21  user 24, type: USER_HOST
2026-02-06 13:06:09 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 21 to user 24
2026-02-06 13:06:09 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=267
2026-02-06 13:06:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/11 id=sub-2 session=1f50p2yk
2026-02-06 13:06:09 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/11 id=sub-3 session=1f50p2yk
2026-02-06 13:06:09 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 11 as read by user 21
2026-02-06 13:06:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 11 as read by user 21
2026-02-06 13:06:09 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 11 by user 21
2026-02-06 13:06:09 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 11 by user 21
2026-02-06 13:06:09 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 11
2026-02-06 13:06:09 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 11
2026-02-06 13:06:09 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/11 session=null payload={"conversationId":11,"readBy":21,"count":0}
2026-02-06 13:06:26 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=1f50p2yk
2026-02-06 13:06:26 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=1f50p2yk
2026-02-06 13:06:26 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=1f50p2yk
2026-02-06 13:06:26 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=1f50p2yk
2026-02-06 13:06:26 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=1f50p2yk
2026-02-06 13:06:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=1f50p2yk] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:06:26 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 1f50p2yk
2026-02-06 13:06:26 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayan@gmail.com (ID: 21), Session: 1f50p2yk
2026-02-06 13:06:26 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 21 went OFFLINE (last session closed)
2026-02-06 13:06:26 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 21 status to OFFLINE
2026-02-06 13:06:26 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/21 session=null payload={"status":"OFFLINE","userId":21,"timestamp":1770362486410}
2026-02-06 13:06:26 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=1f50p2yk
2026-02-06 13:06:26 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362469113, userId=21, username=nayan@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@56d91a89, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1f50p2yk}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@56d91a89, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=1f50p2yk}]
2026-02-06 13:06:34 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [1f50p2yk]
2026-02-06 13:06:37 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:06:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:06:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:06:37 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362497017
2026-02-06 13:06:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 32
2026-02-06 13:06:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:06:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/298/gkxk0x5d/websocket
2026-02-06 13:06:37 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gkxk0x5d]
2026-02-06 13:06:37 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: gkxk0x5d
2026-02-06 13:06:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: gkxk0x5d
2026-02-06 13:06:37 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:06:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: gkxk0x5d
2026-02-06 13:06:37 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:06:37 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 32
2026-02-06 13:06:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:06:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:06:37 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:06:37 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: gkxk0x5d
2026-02-06 13:06:37 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=gkxk0x5d
2026-02-06 13:06:37 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: gkxk0x5d
2026-02-06 13:06:37 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyNDk1LCJleHAiOjE3NzAzNjYwOTV9.EXnL4207rDSVJchnGi9ppOI8Yxv9e5mu7IizfmkuIOE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362497117, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@56557344, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@589297fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gkxk0x5d}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@589297fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gkxk0x5d}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:06:37 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usergkxk0x5d subscriptionId=sub-0 session=gkxk0x5d user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:06:37 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usergkxk0x5d subscriptionId=sub-1 session=gkxk0x5d user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:06:39 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Admin 32 searching users with term: ''
2026-02-06 13:06:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  User 32 searching users with term: '', roleFilter: ADMIN
2026-02-06 13:06:39 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  User/Host 32 searching for admins for support
2026-02-06 13:06:40 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 1, type: USER_ADMIN
2026-02-06 13:06:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 1, type: USER_ADMIN
2026-02-06 13:06:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_ADMIN conversation between users 32 and 1
2026-02-06 13:06:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=12
2026-02-06 13:06:40 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/12 id=sub-2 session=gkxk0x5d
2026-02-06 13:06:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/12 id=sub-3 session=gkxk0x5d
2026-02-06 13:06:40 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 32
2026-02-06 13:06:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 32
2026-02-06 13:06:40 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 12 by user 32
2026-02-06 13:06:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 12 by user 32
2026-02-06 13:06:40 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 12
2026-02-06 13:06:40 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":32,"count":0}
2026-02-06 13:06:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 12
2026-02-06 13:07:03 [MessageBroker-10] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 51], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4], sockJsScheduler[pool size = 15, active threads = 1, queued tasks = 1, completed tasks = 11]
2026-02-06 13:07:32 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 13:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 13:07:32 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 13:07:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:07:32 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362552435
2026-02-06 13:07:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:07:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/935/jdvews1f/websocket
2026-02-06 13:07:32 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jdvews1f]
2026-02-06 13:07:32 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: jdvews1f
2026-02-06 13:07:32 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: jdvews1f
2026-02-06 13:07:32 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: jdvews1f
2026-02-06 13:07:32 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 13:07:32 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 13:07:32 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:07:32 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: jdvews1f
2026-02-06 13:07:32 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: jdvews1f
2026-02-06 13:07:32 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=jdvews1f
2026-02-06 13:07:32 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM2MjU0NiwiZXhwIjoxNzcwMzY2MTQ2fQ.FSjL2DMu0k68MaVvo5PKZL9AdL52SlgaA4l8brDb5Bg], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362552563, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@553bd167, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5bfc25b0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=jdvews1f}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5bfc25b0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=jdvews1f}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:07:32 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 13:07:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 13:07:32 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 13:07:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userjdvews1f subscriptionId=sub-0 session=jdvews1f user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:07:32 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userjdvews1f subscriptionId=sub-1 session=jdvews1f user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:07:34 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=gkxk0x5d
2026-02-06 13:07:34 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/12 id=sub-4 session=gkxk0x5d
2026-02-06 13:07:34 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/12 id=sub-5 session=gkxk0x5d
2026-02-06 13:07:34 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 32
2026-02-06 13:07:34 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 12 by user 32
2026-02-06 13:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 32
2026-02-06 13:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 12 by user 32
2026-02-06 13:07:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 0 messages in conversation 12
2026-02-06 13:07:34 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 12
2026-02-06 13:07:34 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":32,"count":0}
2026-02-06 13:07:37 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:37 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:37 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:37 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:37 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:37 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:37 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:37 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:37 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:37 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:37 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:37 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:38 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:38 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:39 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=gkxk0x5d, lookupDestination='/chat.typing'
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:07:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:42 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=gkxk0x5d, lookupDestination='/chat.stopTyping'
2026-02-06 13:07:42 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=gkxk0x5d, lookupDestination='/chat.sendMessage'
2026-02-06 13:07:42 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 13:07:42 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 13:07:42 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":false,"timestamp":1770362562176}
2026-02-06 13:07:42 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:42 [clientInboundChannel-2] INFO  c.e.e.controller.ChatController -  WebSocket message from ritulsingh079@gmail.com (32) to 1
2026-02-06 13:07:42 [clientInboundChannel-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 1
2026-02-06 13:07:42 [clientInboundChannel-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=268
2026-02-06 13:07:42 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/12 session=null payload={"id":268,"conversationId":12,"senderId":32,"senderName":"Rits Singh","receiverI...(truncated)
2026-02-06 13:07:42 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:42 [clientInboundChannel-2] INFO  c.e.e.controller.ChatController -  Message 268 sent successfully
2026-02-06 13:07:42 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=gkxk0x5d payload={"id":268,"conversationId":12,"senderId":32,"senderName":"Rits Singh","receiverI...(truncated)
2026-02-06 13:07:42 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:07:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:07:42 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:07:42 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 32
2026-02-06 13:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 32
2026-02-06 13:07:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 12
2026-02-06 13:07:42 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":32,"count":0}
2026-02-06 13:07:43 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=gkxk0x5d, lookupDestination='/chat.stopTyping'
2026-02-06 13:07:43 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 13:07:43 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":32,"isTyping":false,"timestamp":1770362563870}
2026-02-06 13:07:43 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:07:56 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 13:07:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 13:07:56 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 13:08:03 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/12 id=sub-2 session=jdvews1f
2026-02-06 13:08:03 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/12 id=sub-3 session=jdvews1f
2026-02-06 13:08:03 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 1
2026-02-06 13:08:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 1
2026-02-06 13:08:03 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 12 by user 1
2026-02-06 13:08:03 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 12 by user 1
2026-02-06 13:08:03 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 12
2026-02-06 13:08:03 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 12
2026-02-06 13:08:03 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":1,"count":1}
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:06 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:07 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:08 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:09 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:09 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:10 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=jdvews1f, lookupDestination='/chat.stopTyping'
2026-02-06 13:08:12 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 13:08:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":false,"timestamp":1770362592684}
2026-02-06 13:08:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:13 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:13 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:14 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:16 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:16 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=jdvews1f, lookupDestination='/chat.typing'
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":true,"username":"admin123@gmail.com",...(truncated)
2026-02-06 13:08:16 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:17 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=jdvews1f, lookupDestination='/chat.sendMessage'
2026-02-06 13:08:17 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=jdvews1f, lookupDestination='/chat.stopTyping'
2026-02-06 13:08:17 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 13:08:17 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 13:08:17 [clientInboundChannel-2] INFO  c.e.e.controller.ChatController -  WebSocket message from admin123@gmail.com (1) to 32
2026-02-06 13:08:17 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":false,"timestamp":1770362597300}
2026-02-06 13:08:17 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:17 [clientInboundChannel-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 1 to user 32
2026-02-06 13:08:17 [clientInboundChannel-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=269
2026-02-06 13:08:17 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/12 session=null payload={"id":269,"conversationId":12,"senderId":1,"senderName":"Admin User","receiverId...(truncated)
2026-02-06 13:08:17 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:17 [clientInboundChannel-2] INFO  c.e.e.controller.ChatController -  Message 269 sent successfully
2026-02-06 13:08:17 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=jdvews1f payload={"id":269,"conversationId":12,"senderId":1,"senderName":"Admin User","receiverId...(truncated)
2026-02-06 13:08:17 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:08:17 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:08:17 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:08:17 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 13:08:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 13:08:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 13:08:17 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 32
2026-02-06 13:08:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 32
2026-02-06 13:08:17 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 1
2026-02-06 13:08:17 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 1
2026-02-06 13:08:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 12
2026-02-06 13:08:17 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 12
2026-02-06 13:08:17 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":1,"count":0}
2026-02-06 13:08:17 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":32,"count":1}
2026-02-06 13:08:18 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=jdvews1f, lookupDestination='/chat.stopTyping'
2026-02-06 13:08:18 [clientInboundChannel-1] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 13:08:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/12 session=null payload={"conversationId":12,"userId":1,"isTyping":false,"timestamp":1770362598539}
2026-02-06 13:08:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 2 sessions.
2026-02-06 13:08:31 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 13:08:31 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 13:08:31 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 13:08:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=jdvews1f
2026-02-06 13:08:41 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-4 session=jdvews1f
2026-02-06 13:08:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-5 session=jdvews1f
2026-02-06 13:08:41 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 1
2026-02-06 13:08:41 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 1
2026-02-06 13:08:42 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 1
2026-02-06 13:08:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 1
2026-02-06 13:08:42 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 13:08:42 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 13:08:42 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":1,"count":0}
2026-02-06 13:08:54 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=jdvews1f
2026-02-06 13:08:54 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-6 session=jdvews1f
2026-02-06 13:08:54 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-7 session=jdvews1f
2026-02-06 13:08:54 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 1
2026-02-06 13:08:54 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 1
2026-02-06 13:08:54 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 1
2026-02-06 13:08:54 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 1
2026-02-06 13:08:54 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 13:08:54 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 13:08:54 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":1,"count":0}
2026-02-06 13:09:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jdvews1f] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:09:02 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jdvews1f
2026-02-06 13:09:02 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: jdvews1f
2026-02-06 13:09:02 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 13:09:02 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 13:09:02 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","userId":1,"timestamp":1770362642430}
2026-02-06 13:09:02 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jdvews1f
2026-02-06 13:09:02 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362552563, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5bfc25b0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=jdvews1f}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5bfc25b0, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=jdvews1f}]
2026-02-06 13:09:09 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [jdvews1f]
2026-02-06 13:09:13 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:09:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:09:13 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:09:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gkxk0x5d] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:09:26 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gkxk0x5d
2026-02-06 13:09:26 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: gkxk0x5d
2026-02-06 13:09:26 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:09:26 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:09:26 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362666508}
2026-02-06 13:09:26 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gkxk0x5d
2026-02-06 13:09:26 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362497117, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@589297fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gkxk0x5d}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@589297fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gkxk0x5d}]
2026-02-06 13:09:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:09:32 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362672170
2026-02-06 13:09:32 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:09:32 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:09:32 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:09:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:09:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/467/brmrzfwe/websocket
2026-02-06 13:09:32 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=brmrzfwe]
2026-02-06 13:09:32 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: brmrzfwe
2026-02-06 13:09:32 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: brmrzfwe
2026-02-06 13:09:32 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: brmrzfwe
2026-02-06 13:09:32 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:09:32 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:09:32 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:09:32 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: brmrzfwe
2026-02-06 13:09:32 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: brmrzfwe
2026-02-06 13:09:32 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=brmrzfwe
2026-02-06 13:09:32 [clientOutboundChannel-5] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyNjY5LCJleHAiOjE3NzAzNjYyNjl9.RRRbsf9jOPW_txCbNtXIka-c7nhLTyDu_tsUS8BQK2U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362672229, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@c087ae9, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4eff2e86, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=brmrzfwe}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4eff2e86, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=brmrzfwe}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:09:32 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userbrmrzfwe subscriptionId=sub-0 session=brmrzfwe user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:09:32 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userbrmrzfwe subscriptionId=sub-1 session=brmrzfwe user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:09:32 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:09:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:09:32 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:09:34 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [gkxk0x5d]
2026-02-06 13:09:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/12 id=sub-2 session=brmrzfwe
2026-02-06 13:09:34 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/12 id=sub-3 session=brmrzfwe
2026-02-06 13:09:34 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 12 by user 32
2026-02-06 13:09:34 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 32
2026-02-06 13:09:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 32
2026-02-06 13:09:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 12 by user 32
2026-02-06 13:09:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 12
2026-02-06 13:09:34 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 12
2026-02-06 13:09:34 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":32,"count":0}
2026-02-06 13:09:47 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 13:09:47 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 13:09:47 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_HOST conversations
2026-02-06 13:09:48 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 13:09:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 13:09:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 13:09:49 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching USER_ADMIN conversations for user 32
2026-02-06 13:09:49 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_ADMIN conversations for user 32
2026-02-06 13:09:49 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 USER_ADMIN conversations
2026-02-06 13:09:51 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:09:51 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:09:51 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:09:55 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=brmrzfwe
2026-02-06 13:09:55 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=brmrzfwe
2026-02-06 13:09:55 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=brmrzfwe
2026-02-06 13:09:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=brmrzfwe
2026-02-06 13:09:55 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=brmrzfwe
2026-02-06 13:09:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=brmrzfwe] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:09:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session brmrzfwe
2026-02-06 13:09:55 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: brmrzfwe
2026-02-06 13:09:55 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:09:55 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:09:55 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362695209}
2026-02-06 13:09:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=brmrzfwe
2026-02-06 13:09:55 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362672229, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4eff2e86, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=brmrzfwe}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4eff2e86, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=brmrzfwe}]
2026-02-06 13:09:55 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 13:10:04 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [brmrzfwe]
2026-02-06 13:10:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:10:12 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362712741
2026-02-06 13:10:12 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:10:12 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:10:12 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:10:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:10:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/121/gb50kqww/websocket
2026-02-06 13:10:12 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=gb50kqww]
2026-02-06 13:10:12 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: gb50kqww
2026-02-06 13:10:12 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: gb50kqww
2026-02-06 13:10:12 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: gb50kqww
2026-02-06 13:10:12 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:10:12 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:10:12 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:10:12 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:10:12 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: gb50kqww
2026-02-06 13:10:12 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: gb50kqww
2026-02-06 13:10:12 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=gb50kqww
2026-02-06 13:10:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:10:12 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyNjY5LCJleHAiOjE3NzAzNjYyNjl9.RRRbsf9jOPW_txCbNtXIka-c7nhLTyDu_tsUS8BQK2U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362712846, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@14d574e0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4486057d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gb50kqww}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4486057d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gb50kqww}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:10:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usergb50kqww subscriptionId=sub-0 session=gb50kqww user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:10:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 32
2026-02-06 13:10:12 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usergb50kqww subscriptionId=sub-1 session=gb50kqww user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:10:12 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 29, type: USER_HOST
2026-02-06 13:10:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 29, type: USER_HOST
2026-02-06 13:10:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 32 and 29
2026-02-06 13:10:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=13
2026-02-06 13:10:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 29
2026-02-06 13:10:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=270
2026-02-06 13:10:13 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-2 session=gb50kqww
2026-02-06 13:10:13 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-3 session=gb50kqww
2026-02-06 13:10:13 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 32
2026-02-06 13:10:13 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 32
2026-02-06 13:10:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 32
2026-02-06 13:10:13 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 32
2026-02-06 13:10:13 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 13
2026-02-06 13:10:13 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 13
2026-02-06 13:10:13 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":32,"count":0}
2026-02-06 13:10:23 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=gb50kqww
2026-02-06 13:10:23 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=gb50kqww
2026-02-06 13:10:23 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=gb50kqww
2026-02-06 13:10:23 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=gb50kqww
2026-02-06 13:10:23 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=gb50kqww
2026-02-06 13:10:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=gb50kqww] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:10:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session gb50kqww
2026-02-06 13:10:23 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: gb50kqww
2026-02-06 13:10:23 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:10:23 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:10:23 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362723065}
2026-02-06 13:10:23 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=gb50kqww
2026-02-06 13:10:23 [clientOutboundChannel-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362712846, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4486057d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gb50kqww}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4486057d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=gb50kqww}]
2026-02-06 13:10:27 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 13:10:29 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [gb50kqww]
2026-02-06 13:11:16 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 13:11:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362777720
2026-02-06 13:11:17 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:17 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/794/mkwcmahr/websocket
2026-02-06 13:11:17 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=mkwcmahr]
2026-02-06 13:11:17 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: mkwcmahr
2026-02-06 13:11:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: mkwcmahr
2026-02-06 13:11:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: mkwcmahr
2026-02-06 13:11:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:11:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:11:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:11:17 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: mkwcmahr
2026-02-06 13:11:17 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=mkwcmahr
2026-02-06 13:11:17 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: mkwcmahr
2026-02-06 13:11:17 [clientOutboundChannel-10] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyNjY5LCJleHAiOjE3NzAzNjYyNjl9.RRRbsf9jOPW_txCbNtXIka-c7nhLTyDu_tsUS8BQK2U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362777793, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@754815a0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7b8fe579, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mkwcmahr}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7b8fe579, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mkwcmahr}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:11:17 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usermkwcmahr subscriptionId=sub-0 session=mkwcmahr user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:17 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usermkwcmahr subscriptionId=sub-1 session=mkwcmahr user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:17 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:17 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 29, type: USER_HOST
2026-02-06 13:11:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 29, type: USER_HOST
2026-02-06 13:11:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 29
2026-02-06 13:11:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=271
2026-02-06 13:11:17 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-2 session=mkwcmahr
2026-02-06 13:11:17 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-3 session=mkwcmahr
2026-02-06 13:11:18 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 32
2026-02-06 13:11:18 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:18 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 32
2026-02-06 13:11:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:18 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 13
2026-02-06 13:11:18 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 13
2026-02-06 13:11:18 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":32,"count":0}
2026-02-06 13:11:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=mkwcmahr
2026-02-06 13:11:18 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=mkwcmahr
2026-02-06 13:11:18 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=mkwcmahr
2026-02-06 13:11:18 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=mkwcmahr
2026-02-06 13:11:18 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=mkwcmahr
2026-02-06 13:11:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=mkwcmahr] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:11:18 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session mkwcmahr
2026-02-06 13:11:18 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: mkwcmahr
2026-02-06 13:11:18 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:11:18 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:11:18 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362778899}
2026-02-06 13:11:18 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=mkwcmahr
2026-02-06 13:11:18 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362777793, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7b8fe579, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mkwcmahr}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7b8fe579, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=mkwcmahr}]
2026-02-06 13:11:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:19 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362779869
2026-02-06 13:11:19 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/052/k1pkgqib/websocket
2026-02-06 13:11:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=k1pkgqib]
2026-02-06 13:11:19 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: k1pkgqib
2026-02-06 13:11:19 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: k1pkgqib
2026-02-06 13:11:19 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: k1pkgqib
2026-02-06 13:11:19 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:11:19 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:11:19 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:11:19 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: k1pkgqib
2026-02-06 13:11:19 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: k1pkgqib
2026-02-06 13:11:19 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=k1pkgqib
2026-02-06 13:11:19 [clientOutboundChannel-7] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyNjY5LCJleHAiOjE3NzAzNjYyNjl9.RRRbsf9jOPW_txCbNtXIka-c7nhLTyDu_tsUS8BQK2U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362779939, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@204379a0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4cf8c390, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k1pkgqib}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4cf8c390, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k1pkgqib}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:11:19 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userk1pkgqib subscriptionId=sub-0 session=k1pkgqib user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:19 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userk1pkgqib subscriptionId=sub-1 session=k1pkgqib user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:19 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:20 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 29, type: USER_HOST
2026-02-06 13:11:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 29, type: USER_HOST
2026-02-06 13:11:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 29
2026-02-06 13:11:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=272
2026-02-06 13:11:20 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-2 session=k1pkgqib
2026-02-06 13:11:20 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-3 session=k1pkgqib
2026-02-06 13:11:20 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 32
2026-02-06 13:11:20 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 32
2026-02-06 13:11:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 13
2026-02-06 13:11:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 13
2026-02-06 13:11:20 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":32,"count":0}
2026-02-06 13:11:24 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [mkwcmahr]
2026-02-06 13:11:24 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:34 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=k1pkgqib
2026-02-06 13:11:34 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=k1pkgqib
2026-02-06 13:11:34 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=k1pkgqib
2026-02-06 13:11:34 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=k1pkgqib
2026-02-06 13:11:34 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=k1pkgqib
2026-02-06 13:11:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=k1pkgqib] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:11:34 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session k1pkgqib
2026-02-06 13:11:34 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: k1pkgqib
2026-02-06 13:11:34 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:11:34 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:11:34 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362794480}
2026-02-06 13:11:34 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=k1pkgqib
2026-02-06 13:11:34 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362779939, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4cf8c390, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k1pkgqib}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4cf8c390, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k1pkgqib}]
2026-02-06 13:11:35 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:35 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:35 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:35 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362795931
2026-02-06 13:11:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/628/4zyx3ow3/websocket
2026-02-06 13:11:35 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=4zyx3ow3]
2026-02-06 13:11:35 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 4zyx3ow3
2026-02-06 13:11:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 4zyx3ow3
2026-02-06 13:11:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 4zyx3ow3
2026-02-06 13:11:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:11:36 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:11:36 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:11:36 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 4zyx3ow3
2026-02-06 13:11:36 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=4zyx3ow3
2026-02-06 13:11:36 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 4zyx3ow3
2026-02-06 13:11:36 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:36 [clientOutboundChannel-5] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyNjY5LCJleHAiOjE3NzAzNjYyNjl9.RRRbsf9jOPW_txCbNtXIka-c7nhLTyDu_tsUS8BQK2U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362796002, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@8664a46, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@47f6b691, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4zyx3ow3}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@47f6b691, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4zyx3ow3}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:11:36 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:36 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user4zyx3ow3 subscriptionId=sub-0 session=4zyx3ow3 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:36 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user4zyx3ow3 subscriptionId=sub-1 session=4zyx3ow3 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:36 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:36 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 29, type: USER_HOST
2026-02-06 13:11:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 29, type: USER_HOST
2026-02-06 13:11:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 29
2026-02-06 13:11:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=273
2026-02-06 13:11:36 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-2 session=4zyx3ow3
2026-02-06 13:11:36 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-3 session=4zyx3ow3
2026-02-06 13:11:36 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:36 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 32
2026-02-06 13:11:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:36 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 32
2026-02-06 13:11:36 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 13
2026-02-06 13:11:36 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 13
2026-02-06 13:11:36 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":32,"count":0}
2026-02-06 13:11:44 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [k1pkgqib]
2026-02-06 13:11:44 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:44 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:44 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:47 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=4zyx3ow3
2026-02-06 13:11:47 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=4zyx3ow3
2026-02-06 13:11:47 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=4zyx3ow3
2026-02-06 13:11:47 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=4zyx3ow3
2026-02-06 13:11:47 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=4zyx3ow3
2026-02-06 13:11:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=4zyx3ow3] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:11:47 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 4zyx3ow3
2026-02-06 13:11:47 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 4zyx3ow3
2026-02-06 13:11:47 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:11:47 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:11:47 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362807559}
2026-02-06 13:11:47 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=4zyx3ow3
2026-02-06 13:11:47 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362796002, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@47f6b691, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4zyx3ow3}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@47f6b691, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=4zyx3ow3}]
2026-02-06 13:11:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:48 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362808544
2026-02-06 13:11:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:11:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/064/5dr5fkvy/websocket
2026-02-06 13:11:48 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:48 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:48 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5dr5fkvy]
2026-02-06 13:11:48 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:48 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5dr5fkvy
2026-02-06 13:11:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 5dr5fkvy
2026-02-06 13:11:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 5dr5fkvy
2026-02-06 13:11:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:11:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:11:48 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:11:48 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 5dr5fkvy
2026-02-06 13:11:48 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=5dr5fkvy
2026-02-06 13:11:48 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 5dr5fkvy
2026-02-06 13:11:48 [clientOutboundChannel-11] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyNjY5LCJleHAiOjE3NzAzNjYyNjl9.RRRbsf9jOPW_txCbNtXIka-c7nhLTyDu_tsUS8BQK2U], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362808619, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@59547eb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@b52a929, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5dr5fkvy}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@b52a929, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5dr5fkvy}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:11:48 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user5dr5fkvy subscriptionId=sub-0 session=5dr5fkvy user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:48 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user5dr5fkvy subscriptionId=sub-1 session=5dr5fkvy user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:11:48 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:48 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:48 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:48 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 29, type: USER_HOST
2026-02-06 13:11:48 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 29, type: USER_HOST
2026-02-06 13:11:48 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 29
2026-02-06 13:11:48 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=274
2026-02-06 13:11:48 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-2 session=5dr5fkvy
2026-02-06 13:11:48 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-3 session=5dr5fkvy
2026-02-06 13:11:48 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 32
2026-02-06 13:11:48 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:48 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 32
2026-02-06 13:11:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 32
2026-02-06 13:11:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 13
2026-02-06 13:11:48 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 13
2026-02-06 13:11:48 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":32,"count":0}
2026-02-06 13:11:53 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:11:53 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:11:53 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:11:54 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [4zyx3ow3]
2026-02-06 13:12:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5dr5fkvy] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:12:04 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5dr5fkvy
2026-02-06 13:12:04 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 5dr5fkvy
2026-02-06 13:12:04 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:12:04 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:12:04 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362824813}
2026-02-06 13:12:04 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5dr5fkvy
2026-02-06 13:12:04 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362808619, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@b52a929, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5dr5fkvy}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@b52a929, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5dr5fkvy}]
2026-02-06 13:12:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:12:11 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362831943
2026-02-06 13:12:11 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 29 (page 0, size 50)
2026-02-06 13:12:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 29
2026-02-06 13:12:11 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 29
2026-02-06 13:12:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:12:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/898/z13yy1pp/websocket
2026-02-06 13:12:11 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=z13yy1pp]
2026-02-06 13:12:11 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: z13yy1pp
2026-02-06 13:12:11 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: z13yy1pp
2026-02-06 13:12:11 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: abc@gmail.com - Session: z13yy1pp
2026-02-06 13:12:11 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: abc@gmail.com
2026-02-06 13:12:12 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: abc@gmail.com
2026-02-06 13:12:12 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:12:12 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: abc@gmail.com (ID: 29), Session: z13yy1pp
2026-02-06 13:12:12 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=abc@gmail.com session=z13yy1pp
2026-02-06 13:12:12 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: z13yy1pp
2026-02-06 13:12:12 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 29 (page 0, size 50)
2026-02-06 13:12:12 [clientOutboundChannel-7] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjksInN1YiI6ImFiY0BnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjI4MzAsImV4cCI6MTc3MDM2NjQzMH0.R7Q-nJS49DTEHRNGFVNVkQHor9hg_yF57K-IhNsoUqU], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362832004, userId=29, username=abc@gmail.com}, simpHeartbeat=[J@5240449e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6975b90f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=z13yy1pp}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6975b90f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=z13yy1pp}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:12:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 29
2026-02-06 13:12:12 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userz13yy1pp subscriptionId=sub-0 session=z13yy1pp user=abc@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:12:12 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userz13yy1pp subscriptionId=sub-1 session=z13yy1pp user=abc@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:12:12 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 29
2026-02-06 13:12:13 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 29 (page 0, size 50)
2026-02-06 13:12:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 29
2026-02-06 13:12:13 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 29
2026-02-06 13:12:14 [MessageBroker-16] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5dr5fkvy]
2026-02-06 13:12:15 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-2 session=z13yy1pp
2026-02-06 13:12:15 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-3 session=z13yy1pp
2026-02-06 13:12:15 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 29
2026-02-06 13:12:15 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 29
2026-02-06 13:12:15 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 29
2026-02-06 13:12:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 29
2026-02-06 13:12:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 13
2026-02-06 13:12:15 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 5 messages as read in conversation 13
2026-02-06 13:12:15 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":29,"count":5}
2026-02-06 13:12:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=z13yy1pp
2026-02-06 13:12:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=z13yy1pp
2026-02-06 13:12:24 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=z13yy1pp
2026-02-06 13:12:24 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=z13yy1pp
2026-02-06 13:12:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=z13yy1pp
2026-02-06 13:12:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=z13yy1pp] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:12:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session z13yy1pp
2026-02-06 13:12:24 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: abc@gmail.com (ID: 29), Session: z13yy1pp
2026-02-06 13:12:24 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 29 went OFFLINE (last session closed)
2026-02-06 13:12:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 29 status to OFFLINE
2026-02-06 13:12:24 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/29 session=null payload={"status":"OFFLINE","userId":29,"timestamp":1770362844720}
2026-02-06 13:12:24 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=z13yy1pp
2026-02-06 13:12:24 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362832004, userId=29, username=abc@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6975b90f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=z13yy1pp}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6975b90f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=z13yy1pp}]
2026-02-06 13:12:34 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [z13yy1pp]
2026-02-06 13:13:26 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:13:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:13:26 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:13:26 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362906249
2026-02-06 13:13:26 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:13:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:13:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/887/re2wnzea/websocket
2026-02-06 13:13:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=re2wnzea]
2026-02-06 13:13:26 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: re2wnzea
2026-02-06 13:13:26 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: re2wnzea
2026-02-06 13:13:26 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: re2wnzea
2026-02-06 13:13:26 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:13:26 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:13:26 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:13:26 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: re2wnzea
2026-02-06 13:13:26 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: re2wnzea
2026-02-06 13:13:26 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=re2wnzea
2026-02-06 13:13:26 [clientOutboundChannel-12] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyODc2LCJleHAiOjE3NzAzNjY0NzZ9.soYXLzSZKjSppaU1SZ-8OeG-zN9vUg6tovdRDdbvf0k], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362906320, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@13e289a8, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d2575a4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=re2wnzea}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d2575a4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=re2wnzea}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:13:26 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userre2wnzea subscriptionId=sub-0 session=re2wnzea user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:13:26 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userre2wnzea subscriptionId=sub-1 session=re2wnzea user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:13:26 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:13:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:13:26 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:13:30 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:13:30 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:13:30 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:13:32 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-2 session=re2wnzea
2026-02-06 13:13:32 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-3 session=re2wnzea
2026-02-06 13:13:32 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 32
2026-02-06 13:13:32 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 32
2026-02-06 13:13:32 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 32
2026-02-06 13:13:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 32
2026-02-06 13:13:32 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 13
2026-02-06 13:13:32 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 13
2026-02-06 13:13:32 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":32,"count":0}
2026-02-06 13:13:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=re2wnzea
2026-02-06 13:13:41 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=re2wnzea
2026-02-06 13:13:41 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=re2wnzea
2026-02-06 13:13:41 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=re2wnzea
2026-02-06 13:13:41 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=re2wnzea
2026-02-06 13:13:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=re2wnzea] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:13:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session re2wnzea
2026-02-06 13:13:41 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: re2wnzea
2026-02-06 13:13:41 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:13:41 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:13:41 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362921902}
2026-02-06 13:13:41 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=re2wnzea
2026-02-06 13:13:41 [clientOutboundChannel-14] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362906320, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d2575a4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=re2wnzea}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d2575a4, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=re2wnzea}]
2026-02-06 13:13:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:13:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770362924209
2026-02-06 13:13:44 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:13:44 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:13:44 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:13:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@66831259
2026-02-06 13:13:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/674/3zvop03w/websocket
2026-02-06 13:13:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=3zvop03w]
2026-02-06 13:13:44 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 3zvop03w
2026-02-06 13:13:44 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 3zvop03w
2026-02-06 13:13:44 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 3zvop03w
2026-02-06 13:13:44 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:13:44 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:13:44 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:13:44 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 3zvop03w
2026-02-06 13:13:44 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=3zvop03w
2026-02-06 13:13:44 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 3zvop03w
2026-02-06 13:13:44 [clientOutboundChannel-15] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYyODc2LCJleHAiOjE3NzAzNjY0NzZ9.soYXLzSZKjSppaU1SZ-8OeG-zN9vUg6tovdRDdbvf0k], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770362924306, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@5b887388, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@554f8689, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3zvop03w}], simpHeartbeat=[J@52e6948a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@554f8689, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3zvop03w}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387) ~[spring-context-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387) ~[spring-websocket-6.2.11.jar:6.2.11]
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152) ~[spring-messaging-6.2.11.jar:6.2.11]
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144) ~[na:na]
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642) ~[na:na]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]
2026-02-06 13:13:44 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user3zvop03w subscriptionId=sub-0 session=3zvop03w user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:13:44 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user3zvop03w subscriptionId=sub-1 session=3zvop03w user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:13:44 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:13:44 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:13:44 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:13:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=3zvop03w] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:13:48 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 3zvop03w
2026-02-06 13:13:48 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 3zvop03w
2026-02-06 13:13:48 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:13:48 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:13:48 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770362928276}
2026-02-06 13:13:48 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=3zvop03w
2026-02-06 13:13:48 [clientOutboundChannel-12] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770362924306, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@554f8689, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3zvop03w}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@554f8689, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=3zvop03w}]
2026-02-06 13:13:49 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [re2wnzea]
2026-02-06 13:13:54 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [3zvop03w]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 13:14:09 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 13:14:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 13:14:09 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d5ccbae]]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d5ccbae]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@7d5ccbae]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 13:14:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:14:09 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 13:14:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2026-02-06 13:14:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2026-02-06 13:24:15 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 23364 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 13:24:15 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 13:24:15 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 13:24:15 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 13:24:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 13:24:17 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 131 ms. Found 9 JPA repository interfaces.
2026-02-06 13:24:18 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 13:24:18 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 13:24:18 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 13:24:18 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 13:24:18 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2445 ms
2026-02-06 13:24:18 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 13:24:18 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 13:24:18 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 13:24:18 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 13:24:18 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 13:24:19 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7ac52942
2026-02-06 13:24:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 13:24:19 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 13:24:19 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 13:24:20 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 13:24:20 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 13:24:21 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 13:24:24 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 13:24:24 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 13:24:24 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 13:24:24 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 13:24:25 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 13:24:25 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 13:24:25 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 13:24:25 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 13:24:25 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 13:24:25 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@52a10a95]
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@52a10a95]
2026-02-06 13:24:25 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@52a10a95]]
2026-02-06 13:24:25 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:24:25 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:24:25 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 13:24:25 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 13:24:25 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 10.84 seconds (process running for 11.689)
2026-02-06 13:24:25 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Found 1 expired reservations
2026-02-06 13:24:25 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Expired reservation ID: 47
2026-02-06 13:24:36 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 13:24:36 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 13:24:36 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-06 13:25:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:17 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363617065
2026-02-06 13:25:17 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/416/hrkagbpj/websocket
2026-02-06 13:25:17 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:25:17 [http-nio-8080-exec-4] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=hrkagbpj]
2026-02-06 13:25:17 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:17 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:25:17 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: hrkagbpj
2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: hrkagbpj
2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: hrkagbpj
2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:25:17 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:25:17 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: hrkagbpj
2026-02-06 13:25:17 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=hrkagbpj
2026-02-06 13:25:17 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: hrkagbpj
2026-02-06 13:25:17 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363617299, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@a17d311, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@867f168, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hrkagbpj}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@867f168, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hrkagbpj}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:25:17 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userhrkagbpj subscriptionId=sub-1 session=hrkagbpj user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:17 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userhrkagbpj subscriptionId=sub-0 session=hrkagbpj user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:21 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Admin 32 searching users with term: ''
2026-02-06 13:25:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  User 32 searching users with term: '', roleFilter: ADMIN
2026-02-06 13:25:21 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  User/Host 32 searching for admins for support
2026-02-06 13:25:22 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/12 id=sub-2 session=hrkagbpj
2026-02-06 13:25:22 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/12 id=sub-3 session=hrkagbpj
2026-02-06 13:25:22 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 12 as read by user 32
2026-02-06 13:25:22 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 12 by user 32
2026-02-06 13:25:22 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 12 as read by user 32
2026-02-06 13:25:22 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 12 by user 32
2026-02-06 13:25:22 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 12
2026-02-06 13:25:22 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 12
2026-02-06 13:25:22 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/12 session=null payload={"conversationId":12,"readBy":32,"count":0}
2026-02-06 13:25:25 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 15], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 5, active threads = 1, queued tasks = 1, completed tasks = 2]
2026-02-06 13:25:27 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 13:25:27 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 13:25:27 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 USER_HOST conversations
2026-02-06 13:25:28 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:28 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:28 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:25:30 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 32
2026-02-06 13:25:30 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 32
2026-02-06 13:25:30 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 USER_HOST conversations
2026-02-06 13:25:30 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=hrkagbpj
2026-02-06 13:25:30 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-4 session=hrkagbpj
2026-02-06 13:25:30 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-5 session=hrkagbpj
2026-02-06 13:25:30 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 32
2026-02-06 13:25:30 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 32
2026-02-06 13:25:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 32
2026-02-06 13:25:30 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 32
2026-02-06 13:25:30 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 13:25:30 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":32,"count":0}
2026-02-06 13:25:30 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 232 messages in conversation 8
2026-02-06 13:25:37 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=hrkagbpj
2026-02-06 13:25:37 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=hrkagbpj
2026-02-06 13:25:37 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=hrkagbpj
2026-02-06 13:25:37 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=hrkagbpj
2026-02-06 13:25:37 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=hrkagbpj
2026-02-06 13:25:37 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-6 session=hrkagbpj
2026-02-06 13:25:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=hrkagbpj] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:25:37 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session hrkagbpj
2026-02-06 13:25:37 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: hrkagbpj
2026-02-06 13:25:37 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:25:37 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:25:37 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363637729,"userId":32}
2026-02-06 13:25:37 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=hrkagbpj
2026-02-06 13:25:37 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770363617299, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@867f168, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hrkagbpj}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@867f168, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=hrkagbpj}]
2026-02-06 13:25:39 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 13:25:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:46 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363646498
2026-02-06 13:25:46 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:46 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:46 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:25:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/986/k3tpnba2/websocket
2026-02-06 13:25:46 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=k3tpnba2]
2026-02-06 13:25:46 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: k3tpnba2
2026-02-06 13:25:46 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: k3tpnba2
2026-02-06 13:25:46 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: k3tpnba2
2026-02-06 13:25:46 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:25:46 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:25:46 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:25:46 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: k3tpnba2
2026-02-06 13:25:46 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: k3tpnba2
2026-02-06 13:25:46 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=k3tpnba2
2026-02-06 13:25:46 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363646565, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@4bd748bc, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4510bfb6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k3tpnba2}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4510bfb6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k3tpnba2}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:25:46 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userk3tpnba2 subscriptionId=sub-0 session=k3tpnba2 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:46 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userk3tpnba2 subscriptionId=sub-1 session=k3tpnba2 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:46 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:46 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:46 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 32
2026-02-06 13:25:46 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 23, type: USER_HOST
2026-02-06 13:25:46 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 23, type: USER_HOST
2026-02-06 13:25:46 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 32 and 23
2026-02-06 13:25:46 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=14
2026-02-06 13:25:46 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 23
2026-02-06 13:25:46 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=275
2026-02-06 13:25:46 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=k3tpnba2
2026-02-06 13:25:46 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=k3tpnba2
2026-02-06 13:25:46 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:25:46 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:25:46 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:25:46 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:25:46 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:25:46 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:25:46 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 14
2026-02-06 13:25:47 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [hrkagbpj]
2026-02-06 13:25:51 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=k3tpnba2
2026-02-06 13:25:51 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=k3tpnba2
2026-02-06 13:25:51 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=k3tpnba2
2026-02-06 13:25:51 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=k3tpnba2
2026-02-06 13:25:51 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=k3tpnba2
2026-02-06 13:25:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=k3tpnba2] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:25:51 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session k3tpnba2
2026-02-06 13:25:51 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: k3tpnba2
2026-02-06 13:25:51 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:25:51 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:25:51 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363651066,"userId":32}
2026-02-06 13:25:51 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=k3tpnba2
2026-02-06 13:25:51 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770363646565, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4510bfb6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k3tpnba2}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4510bfb6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k3tpnba2}]
2026-02-06 13:25:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:52 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363652048
2026-02-06 13:25:52 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:52 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/146/fkg34jdv/websocket
2026-02-06 13:25:52 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:25:52 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fkg34jdv]
2026-02-06 13:25:52 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: fkg34jdv
2026-02-06 13:25:52 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: fkg34jdv
2026-02-06 13:25:52 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: fkg34jdv
2026-02-06 13:25:52 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:25:52 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:25:52 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:25:52 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: fkg34jdv
2026-02-06 13:25:52 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=fkg34jdv
2026-02-06 13:25:52 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: fkg34jdv
2026-02-06 13:25:52 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363652105, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@3d4785f0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@33806c28, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=fkg34jdv}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@33806c28, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=fkg34jdv}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:25:52 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userfkg34jdv subscriptionId=sub-0 session=fkg34jdv user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:52 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userfkg34jdv subscriptionId=sub-1 session=fkg34jdv user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:52 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:52 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:52 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:25:52 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 23, type: USER_HOST
2026-02-06 13:25:52 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 23, type: USER_HOST
2026-02-06 13:25:52 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 23
2026-02-06 13:25:52 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=276
2026-02-06 13:25:52 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=fkg34jdv
2026-02-06 13:25:52 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=fkg34jdv
2026-02-06 13:25:52 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:25:52 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:25:52 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:25:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:25:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 14
2026-02-06 13:25:52 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:25:52 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:25:54 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=fkg34jdv
2026-02-06 13:25:54 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=fkg34jdv
2026-02-06 13:25:54 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=fkg34jdv
2026-02-06 13:25:54 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=fkg34jdv
2026-02-06 13:25:54 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=fkg34jdv
2026-02-06 13:25:54 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fkg34jdv] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:25:54 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fkg34jdv
2026-02-06 13:25:54 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: fkg34jdv
2026-02-06 13:25:54 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:25:54 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:25:54 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363654339,"userId":32}
2026-02-06 13:25:54 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fkg34jdv
2026-02-06 13:25:54 [clientOutboundChannel-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770363652105, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@33806c28, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=fkg34jdv}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@33806c28, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=fkg34jdv}]
2026-02-06 13:25:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:55 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363655252
2026-02-06 13:25:55 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:25:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/757/5zpd4wbk/websocket
2026-02-06 13:25:55 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:25:55 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5zpd4wbk]
2026-02-06 13:25:55 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5zpd4wbk
2026-02-06 13:25:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 5zpd4wbk
2026-02-06 13:25:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 5zpd4wbk
2026-02-06 13:25:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:25:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:25:55 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:25:55 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 5zpd4wbk
2026-02-06 13:25:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=5zpd4wbk
2026-02-06 13:25:55 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 5zpd4wbk
2026-02-06 13:25:55 [clientOutboundChannel-2] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363655309, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@1351d047, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d962c5d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5zpd4wbk}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d962c5d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5zpd4wbk}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:25:55 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user5zpd4wbk subscriptionId=sub-0 session=5zpd4wbk user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user5zpd4wbk subscriptionId=sub-1 session=5zpd4wbk user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:25:55 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:25:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:25:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:25:55 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 23, type: USER_HOST
2026-02-06 13:25:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 23, type: USER_HOST
2026-02-06 13:25:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 23
2026-02-06 13:25:55 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=277
2026-02-06 13:25:55 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=5zpd4wbk
2026-02-06 13:25:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=5zpd4wbk
2026-02-06 13:25:55 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:25:55 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:25:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:25:55 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:25:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:25:55 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 14
2026-02-06 13:25:55 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:25:57 [MessageBroker-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [k3tpnba2]
2026-02-06 13:25:57 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=5zpd4wbk
2026-02-06 13:25:57 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=5zpd4wbk
2026-02-06 13:25:57 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=5zpd4wbk
2026-02-06 13:25:58 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=5zpd4wbk
2026-02-06 13:25:58 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=5zpd4wbk
2026-02-06 13:25:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5zpd4wbk] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:25:58 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5zpd4wbk
2026-02-06 13:25:58 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 5zpd4wbk
2026-02-06 13:25:58 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:25:58 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:25:58 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363658044,"userId":32}
2026-02-06 13:25:58 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5zpd4wbk
2026-02-06 13:25:58 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770363655309, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d962c5d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5zpd4wbk}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1d962c5d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=5zpd4wbk}]
2026-02-06 13:26:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:26:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363660666
2026-02-06 13:26:00 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:00 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:26:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/683/ncskjny5/websocket
2026-02-06 13:26:00 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:00 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ncskjny5]
2026-02-06 13:26:00 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ncskjny5
2026-02-06 13:26:00 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ncskjny5
2026-02-06 13:26:00 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: ncskjny5
2026-02-06 13:26:00 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:26:00 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:26:00 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:26:00 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: ncskjny5
2026-02-06 13:26:00 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=ncskjny5
2026-02-06 13:26:00 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ncskjny5
2026-02-06 13:26:00 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363660717, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@4930f350, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@16d180fd, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ncskjny5}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@16d180fd, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ncskjny5}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:26:00 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userncskjny5 subscriptionId=sub-0 session=ncskjny5 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:26:00 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userncskjny5 subscriptionId=sub-1 session=ncskjny5 user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:26:00 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:00 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:00 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:00 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 23, type: USER_HOST
2026-02-06 13:26:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 23, type: USER_HOST
2026-02-06 13:26:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 23
2026-02-06 13:26:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=278
2026-02-06 13:26:00 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=ncskjny5
2026-02-06 13:26:00 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=ncskjny5
2026-02-06 13:26:00 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:00 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:26:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:00 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:26:00 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 14
2026-02-06 13:26:00 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:26:00 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:26:02 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [fkg34jdv]
2026-02-06 13:26:02 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:02 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:02 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:03 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:03 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:03 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:03 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:03 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:03 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:03 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:03 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:03 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:07 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5zpd4wbk]
2026-02-06 13:26:10 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:10 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:10 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:12 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=ncskjny5
2026-02-06 13:26:12 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/13 id=sub-4 session=ncskjny5
2026-02-06 13:26:12 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/13 id=sub-5 session=ncskjny5
2026-02-06 13:26:12 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 13 as read by user 32
2026-02-06 13:26:12 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 13 by user 32
2026-02-06 13:26:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 13 as read by user 32
2026-02-06 13:26:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 13 by user 32
2026-02-06 13:26:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 13
2026-02-06 13:26:12 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 13
2026-02-06 13:26:12 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/13 session=null payload={"conversationId":13,"readBy":32,"count":0}
2026-02-06 13:26:16 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=ncskjny5
2026-02-06 13:26:16 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-6 session=ncskjny5
2026-02-06 13:26:16 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-7 session=ncskjny5
2026-02-06 13:26:16 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:26:16 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:26:16 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:16 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 14
2026-02-06 13:26:16 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:26:16 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:27 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:27 [clientInboundChannel-2] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:27 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:27 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:28 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=ncskjny5, lookupDestination='/chat.typing'
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":true,"username":"ritulsingh079@gmail...(truncated)
2026-02-06 13:26:28 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:30 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=ncskjny5, lookupDestination='/chat.stopTyping'
2026-02-06 13:26:30 [clientInboundChannel-3] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 13:26:30 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/14 session=null payload={"conversationId":14,"userId":32,"isTyping":false,"timestamp":1770363690599}
2026-02-06 13:26:30 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 13:26:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=ncskjny5
2026-02-06 13:26:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=ncskjny5
2026-02-06 13:26:40 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=ncskjny5
2026-02-06 13:26:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=ncskjny5
2026-02-06 13:26:40 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=ncskjny5
2026-02-06 13:26:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-7 session=ncskjny5
2026-02-06 13:26:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-8 session=ncskjny5
2026-02-06 13:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ncskjny5] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:26:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ncskjny5
2026-02-06 13:26:40 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: ncskjny5
2026-02-06 13:26:40 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:26:40 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:26:41 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363700999,"userId":32}
2026-02-06 13:26:41 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ncskjny5
2026-02-06 13:26:41 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770363660717, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@16d180fd, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ncskjny5}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@16d180fd, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ncskjny5}]
2026-02-06 13:26:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:26:42 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363702153
2026-02-06 13:26:42 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:42 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:26:42 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/437/e42smk3a/websocket
2026-02-06 13:26:42 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=e42smk3a]
2026-02-06 13:26:42 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: e42smk3a
2026-02-06 13:26:42 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: e42smk3a
2026-02-06 13:26:42 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: e42smk3a
2026-02-06 13:26:42 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:26:42 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:26:42 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:26:42 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: e42smk3a
2026-02-06 13:26:42 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: e42smk3a
2026-02-06 13:26:42 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=e42smk3a
2026-02-06 13:26:42 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363702220, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@3d39f5cd, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6558517e, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=e42smk3a}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6558517e, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=e42smk3a}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:26:42 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usere42smk3a subscriptionId=sub-0 session=e42smk3a user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:26:42 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usere42smk3a subscriptionId=sub-1 session=e42smk3a user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:26:42 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:42 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:42 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 23, type: USER_HOST
2026-02-06 13:26:42 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 23, type: USER_HOST
2026-02-06 13:26:42 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 23
2026-02-06 13:26:42 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=279
2026-02-06 13:26:42 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=e42smk3a
2026-02-06 13:26:42 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=e42smk3a
2026-02-06 13:26:42 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:26:42 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:26:42 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:42 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 14
2026-02-06 13:26:42 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:26:42 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:26:47 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ncskjny5]
2026-02-06 13:26:55 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=e42smk3a
2026-02-06 13:26:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=e42smk3a
2026-02-06 13:26:55 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=e42smk3a
2026-02-06 13:26:55 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=e42smk3a
2026-02-06 13:26:55 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=e42smk3a
2026-02-06 13:26:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=e42smk3a] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:26:55 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session e42smk3a
2026-02-06 13:26:55 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: e42smk3a
2026-02-06 13:26:55 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:26:55 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:26:55 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363715369,"userId":32}
2026-02-06 13:26:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=e42smk3a
2026-02-06 13:26:55 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770363702220, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6558517e, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=e42smk3a}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6558517e, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=e42smk3a}]
2026-02-06 13:26:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:26:56 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363716412
2026-02-06 13:26:56 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:26:56 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/871/52j3fc1r/websocket
2026-02-06 13:26:56 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=52j3fc1r]
2026-02-06 13:26:56 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 52j3fc1r
2026-02-06 13:26:56 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 52j3fc1r
2026-02-06 13:26:56 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 52j3fc1r
2026-02-06 13:26:56 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:26:56 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:26:56 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:26:56 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 52j3fc1r
2026-02-06 13:26:56 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=52j3fc1r
2026-02-06 13:26:56 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 52j3fc1r
2026-02-06 13:26:56 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363716456, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@604c5261, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@294905ce, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=52j3fc1r}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@294905ce, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=52j3fc1r}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:26:56 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user52j3fc1r subscriptionId=sub-0 session=52j3fc1r user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:26:56 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user52j3fc1r subscriptionId=sub-1 session=52j3fc1r user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:26:56 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:26:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:26:56 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:26:56 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 23, type: USER_HOST
2026-02-06 13:26:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 23, type: USER_HOST
2026-02-06 13:26:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 23
2026-02-06 13:26:56 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=280
2026-02-06 13:26:56 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=52j3fc1r
2026-02-06 13:26:56 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=52j3fc1r
2026-02-06 13:26:56 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:26:56 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:26:56 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:26:56 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 6 messages in conversation 14
2026-02-06 13:26:56 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:26:56 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:27:02 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [e42smk3a]
2026-02-06 13:27:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=52j3fc1r
2026-02-06 13:27:06 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=52j3fc1r
2026-02-06 13:27:06 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=52j3fc1r
2026-02-06 13:27:06 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=52j3fc1r
2026-02-06 13:27:06 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=52j3fc1r
2026-02-06 13:27:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=52j3fc1r] closed with CloseStatus[code=1000, reason=null]
2026-02-06 13:27:06 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 52j3fc1r
2026-02-06 13:27:06 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 52j3fc1r
2026-02-06 13:27:06 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:27:06 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:27:06 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363726385,"userId":32}
2026-02-06 13:27:06 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=52j3fc1r
2026-02-06 13:27:06 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770363716456, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@294905ce, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=52j3fc1r}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@294905ce, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=52j3fc1r}]
2026-02-06 13:27:06 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 13:27:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:27:07 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770363727927
2026-02-06 13:27:07 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:27:07 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:27:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@28b4dc2b
2026-02-06 13:27:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/327/0zeezb4a/websocket
2026-02-06 13:27:07 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:27:07 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0zeezb4a]
2026-02-06 13:27:07 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 0zeezb4a
2026-02-06 13:27:07 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 0zeezb4a
2026-02-06 13:27:07 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: 0zeezb4a
2026-02-06 13:27:08 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 13:27:08 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 13:27:08 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 13:27:08 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: 0zeezb4a
2026-02-06 13:27:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=0zeezb4a
2026-02-06 13:27:08 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 0zeezb4a
2026-02-06 13:27:08 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzYzNjE1LCJleHAiOjE3NzAzNjcyMTV9.3EU5VoXpwNiLC1huQ3G1LNvBV7hUlmJSXZ30Evms-sE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770363728012, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@16dc676f, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@149fcb69, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0zeezb4a}], simpHeartbeat=[J@70be2c47, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@149fcb69, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0zeezb4a}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 13:27:08 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user0zeezb4a subscriptionId=sub-0 session=0zeezb4a user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:27:08 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user0zeezb4a subscriptionId=sub-1 session=0zeezb4a user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 13:27:08 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:27:08 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:27:08 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:27:08 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 32 initiating conversation with user 23, type: USER_HOST
2026-02-06 13:27:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 32  user 23, type: USER_HOST
2026-02-06 13:27:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 32 to user 23
2026-02-06 13:27:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=281
2026-02-06 13:27:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=0zeezb4a
2026-02-06 13:27:08 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=0zeezb4a
2026-02-06 13:27:08 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 13:27:08 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 13:27:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 13:27:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 13:27:08 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 13:27:08 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 13:27:08 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 7 messages in conversation 14
2026-02-06 13:27:12 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [52j3fc1r]
2026-02-06 13:27:13 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 13:27:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 13:27:13 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 13:27:27 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session 0zeezb4a with CloseStatus[code=1001, reason=null]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=0zeezb4a]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:777)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:574)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.SpringApplicationShutdownHook.closeAndWait(SpringApplicationShutdownHook.java:147)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationShutdownHook.run(SpringApplicationShutdownHook.java:116)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 24 common frames omitted
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0zeezb4a] closed with CloseStatus[code=1001, reason=null]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0zeezb4a
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: 0zeezb4a
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","timestamp":1770363747386,"userId":32}
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 13:27:27 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0zeezb4a
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@52a10a95]]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@52a10a95]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@52a10a95]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 13:27:27 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 14:07:33 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 23412 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 14:07:33 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 14:07:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 14:07:33 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 14:07:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 14:07:34 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 96 ms. Found 9 JPA repository interfaces.
2026-02-06 14:07:35 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 14:07:35 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 14:07:35 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 14:07:35 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 14:07:35 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2285 ms
2026-02-06 14:07:35 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 14:07:35 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 14:07:35 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 14:07:35 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 14:07:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 14:07:36 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@61b139e6
2026-02-06 14:07:36 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 14:07:36 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 14:07:36 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 14:07:37 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 14:07:37 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:07:38 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 14:07:42 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 14:07:42 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 14:07:42 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 14:07:42 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 14:07:42 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 14:07:42 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 14:07:42 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 14:07:42 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 14:07:43 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 14:07:43 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:07:43 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@38306b3e]
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@38306b3e]
2026-02-06 14:07:43 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@38306b3e]]
2026-02-06 14:07:43 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:07:43 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:07:43 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 14:07:43 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 14:07:43 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 11.161 seconds (process running for 11.937)
2026-02-06 14:07:56 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 14:07:56 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 14:07:56 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-06 14:07:59 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:08:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:08:02 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366182936
2026-02-06 14:08:02 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 14:08:02 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 14:08:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:08:02 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/083/k0jj0jfo/websocket
2026-02-06 14:08:02 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 14:08:03 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=k0jj0jfo]
2026-02-06 14:08:03 [http-nio-8080-exec-7] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 14:08:03 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: k0jj0jfo
2026-02-06 14:08:03 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: k0jj0jfo
2026-02-06 14:08:03 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: k0jj0jfo
2026-02-06 14:08:03 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 14:08:03 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 14:08:03 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 14:08:03 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 14:08:03 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 14:08:03 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:08:03 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: k0jj0jfo
2026-02-06 14:08:03 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=k0jj0jfo
2026-02-06 14:08:03 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: k0jj0jfo
2026-02-06 14:08:03 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzY2MTc2LCJleHAiOjE3NzAzNjk3NzZ9.a-kc0yaVJZb2YAAA8q6GppgKFYLzhOoa9j7xIlTD7mA], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366183144, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@7df61ceb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@d6c795a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k0jj0jfo}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@d6c795a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k0jj0jfo}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:08:03 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userk0jj0jfo subscriptionId=sub-1 session=k0jj0jfo user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:08:03 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userk0jj0jfo subscriptionId=sub-0 session=k0jj0jfo user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:08:08 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=k0jj0jfo
2026-02-06 14:08:08 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=k0jj0jfo
2026-02-06 14:08:08 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 32
2026-02-06 14:08:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 32
2026-02-06 14:08:08 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 32
2026-02-06 14:08:08 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 32
2026-02-06 14:08:08 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 7 messages in conversation 14
2026-02-06 14:08:08 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 14
2026-02-06 14:08:08 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":32,"count":0}
2026-02-06 14:08:22 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Admin 32 searching users with term: ''
2026-02-06 14:08:22 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  User 32 searching users with term: '', roleFilter: ADMIN
2026-02-06 14:08:22 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  User/Host 32 searching for admins for support
2026-02-06 14:08:25 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=k0jj0jfo
2026-02-06 14:08:25 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=k0jj0jfo
2026-02-06 14:08:25 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=k0jj0jfo
2026-02-06 14:08:25 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=k0jj0jfo
2026-02-06 14:08:25 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=k0jj0jfo
2026-02-06 14:08:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=k0jj0jfo] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:08:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session k0jj0jfo
2026-02-06 14:08:25 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: k0jj0jfo
2026-02-06 14:08:25 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 14:08:25 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 14:08:25 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770366205993}
2026-02-06 14:08:25 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=k0jj0jfo
2026-02-06 14:08:25 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366183144, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@d6c795a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k0jj0jfo}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@d6c795a, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=k0jj0jfo}]
2026-02-06 14:08:26 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:08:28 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:08:32 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [k0jj0jfo]
2026-02-06 14:08:43 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 33], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 12, active threads = 1, queued tasks = 1, completed tasks = 9]
2026-02-06 14:09:35 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 34 bookings: Total=2, RESERVED=1, PAYMENT_PENDING=0, CONFIRMED=0
2026-02-06 14:09:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:09:50 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366290852
2026-02-06 14:09:50 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 14:09:50 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 14:09:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:09:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/166/n4o22guk/websocket
2026-02-06 14:09:50 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 14:09:50 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n4o22guk]
2026-02-06 14:09:50 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: n4o22guk
2026-02-06 14:09:50 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: n4o22guk
2026-02-06 14:09:50 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: n4o22guk
2026-02-06 14:09:50 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 14:09:50 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 14:09:50 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:09:50 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: n4o22guk
2026-02-06 14:09:50 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: n4o22guk
2026-02-06 14:09:50 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=n4o22guk
2026-02-06 14:09:50 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzY2Mjg5LCJleHAiOjE3NzAzNjk4ODl9.Kg5fLQtHsdk9TMxVPdqZUy2tHVFmNPrgOFN3xBC-QTY], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366290969, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@58ad6b69, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@566a8e0c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n4o22guk}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@566a8e0c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n4o22guk}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:09:50 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usern4o22guk subscriptionId=sub-0 session=n4o22guk user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:09:50 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usern4o22guk subscriptionId=sub-1 session=n4o22guk user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:09:51 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 14:09:51 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 14:09:51 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 14:10:00 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=n4o22guk
2026-02-06 14:10:00 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=n4o22guk
2026-02-06 14:10:00 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=n4o22guk
2026-02-06 14:10:00 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n4o22guk] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:10:00 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n4o22guk
2026-02-06 14:10:00 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: n4o22guk
2026-02-06 14:10:00 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 14:10:00 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 14:10:00 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770366300663}
2026-02-06 14:10:00 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=n4o22guk
2026-02-06 14:10:00 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366290969, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@566a8e0c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n4o22guk}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@566a8e0c, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n4o22guk}]
2026-02-06 14:10:07 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [n4o22guk]
2026-02-06 14:10:18 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 32 initiating payment for reservation 48
2026-02-06 14:10:18 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #48 current status: RESERVED (host: 34)
2026-02-06 14:10:18 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment #24 initiated for booking #48
2026-02-06 14:10:18 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #48 status: RESERVED  PAYMENT_PENDING (host: 34)
2026-02-06 14:10:18 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment amount: NPR 77.00
2026-02-06 14:10:20 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 32 processing payment 24
2026-02-06 14:10:23 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment 24 successful for booking #48
2026-02-06 14:10:23 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #48 status: PAYMENT_PENDING  CONFIRMED (host: 34)
2026-02-06 14:10:23 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Transaction ID: TXN-C3D7A185-3A5A-4B79
2026-02-06 14:10:23 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Notifications sent to user 32 and host 34
2026-02-06 14:10:46 [http-nio-8080-exec-10] ERROR c.e.e.serviceImpl.EmailServiceImpl - Failed to send receipt email to ritulsingh079@gmail.com: Failed messages: jakarta.mail.MessagingException: Exception reading response;
  nested exception is:
	java.net.SocketTimeoutException: Read timed out
2026-02-06 14:11:04 [http-nio-8080-exec-10] ERROR c.e.e.serviceImpl.EmailServiceImpl - Failed to send booking confirmation email to ritulsingh079@gmail.com: Failed messages: jakarta.mail.MessagingException: Exception reading response;
  nested exception is:
	java.net.SocketTimeoutException: Read timed out
2026-02-06 14:11:32 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 34 bookings: Total=2, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=1
2026-02-06 14:12:33 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 14:12:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 14:12:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:12:33 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366453581
2026-02-06 14:12:33 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 14:12:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:12:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/834/sgftk0bk/websocket
2026-02-06 14:12:33 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=sgftk0bk]
2026-02-06 14:12:33 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: sgftk0bk
2026-02-06 14:12:33 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: sgftk0bk
2026-02-06 14:12:33 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ritulsingh079@gmail.com - Session: sgftk0bk
2026-02-06 14:12:33 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ritulsingh079@gmail.com
2026-02-06 14:12:33 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ritulsingh079@gmail.com
2026-02-06 14:12:33 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:12:33 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ritulsingh079@gmail.com (ID: 32), Session: sgftk0bk
2026-02-06 14:12:33 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ritulsingh079@gmail.com session=sgftk0bk
2026-02-06 14:12:33 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: sgftk0bk
2026-02-06 14:12:33 [clientOutboundChannel-7] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzIsInN1YiI6InJpdHVsc2luZ2gwNzlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzY2NDE0LCJleHAiOjE3NzAzNzAwMTR9.TuUVHa9a_elgRwCs2YhaLc-aQ_BRftPSDB45-U5lEsA], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366453650, userId=32, username=ritulsingh079@gmail.com}, simpHeartbeat=[J@45f5e7b5, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4b32017b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sgftk0bk}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4b32017b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sgftk0bk}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:12:33 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usersgftk0bk subscriptionId=sub-0 session=sgftk0bk user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:12:33 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usersgftk0bk subscriptionId=sub-1 session=sgftk0bk user=ritulsingh079@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:12:33 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 32 (page 0, size 50)
2026-02-06 14:12:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 32
2026-02-06 14:12:33 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 32
2026-02-06 14:12:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=sgftk0bk] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:12:40 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session sgftk0bk
2026-02-06 14:12:40 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ritulsingh079@gmail.com (ID: 32), Session: sgftk0bk
2026-02-06 14:12:40 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 32 went OFFLINE (last session closed)
2026-02-06 14:12:40 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 32 status to OFFLINE
2026-02-06 14:12:40 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/32 session=null payload={"status":"OFFLINE","userId":32,"timestamp":1770366460822}
2026-02-06 14:12:40 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=sgftk0bk
2026-02-06 14:12:40 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366453650, userId=32, username=ritulsingh079@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4b32017b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sgftk0bk}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4b32017b, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=sgftk0bk}]
2026-02-06 14:12:47 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [sgftk0bk]
2026-02-06 14:12:49 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:13:29 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 31 initiating payment for reservation 49
2026-02-06 14:13:29 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #49 current status: RESERVED (host: 24)
2026-02-06 14:13:29 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment #25 initiated for booking #49
2026-02-06 14:13:29 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #49 status: RESERVED  PAYMENT_PENDING (host: 24)
2026-02-06 14:13:29 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment amount: NPR 38.12
2026-02-06 14:13:59 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=5, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 14:14:32 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 31 initiating payment for reservation 49
2026-02-06 14:14:32 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #49 current status: PAYMENT_PENDING (host: 24)
2026-02-06 14:14:32 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Returning existing PENDING payment 25 for booking 49
2026-02-06 14:14:34 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 31 processing payment 25
2026-02-06 14:14:36 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment 25 successful for booking #49
2026-02-06 14:14:36 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #49 status: PAYMENT_PENDING  CONFIRMED (host: 24)
2026-02-06 14:14:36 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Transaction ID: TXN-2F317F39-EF96-4850
2026-02-06 14:14:36 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Notifications sent to user 31 and host 24
2026-02-06 14:14:41 [http-nio-8080-exec-8] ERROR c.e.e.serviceImpl.EmailServiceImpl - Failed to send receipt email to nayanchy2004@gmail.com: Mail server connection failed. Failed messages: com.sun.mail.util.MailConnectException: Couldn't connect to host, port: smtp.gmail.com, 587; timeout 5000;
  nested exception is:
	java.net.SocketTimeoutException: Connect timed out
2026-02-06 14:15:00 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.EmailServiceImpl - Booking confirmation email sent to nayanchy2004@gmail.com
2026-02-06 14:15:36 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:15:36 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:15:36 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 14:15:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:15:36 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366636541
2026-02-06 14:15:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:15:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/107/j4k1paaj/websocket
2026-02-06 14:15:36 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=j4k1paaj]
2026-02-06 14:15:36 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: j4k1paaj
2026-02-06 14:15:36 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: j4k1paaj
2026-02-06 14:15:36 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:15:36 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:15:36 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: j4k1paaj
2026-02-06 14:15:36 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 14:15:36 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:15:36 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:15:36 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:15:36 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: j4k1paaj
2026-02-06 14:15:36 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=j4k1paaj
2026-02-06 14:15:36 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: j4k1paaj
2026-02-06 14:15:36 [clientOutboundChannel-9] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366636637, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@4cb647e7, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4271b001, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=j4k1paaj}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4271b001, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=j4k1paaj}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:15:36 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userj4k1paaj subscriptionId=sub-0 session=j4k1paaj user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:15:36 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userj4k1paaj subscriptionId=sub-1 session=j4k1paaj user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:15:47 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=j4k1paaj
2026-02-06 14:15:47 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=j4k1paaj
2026-02-06 14:15:47 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=j4k1paaj
2026-02-06 14:15:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=j4k1paaj] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:15:47 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session j4k1paaj
2026-02-06 14:15:47 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: j4k1paaj
2026-02-06 14:15:47 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:15:47 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:15:47 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770366647100}
2026-02-06 14:15:47 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=j4k1paaj
2026-02-06 14:15:47 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366636637, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4271b001, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=j4k1paaj}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4271b001, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=j4k1paaj}]
2026-02-06 14:15:47 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:15:52 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [j4k1paaj]
2026-02-06 14:15:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:15:54 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366654086
2026-02-06 14:15:54 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:15:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:15:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/573/wv1ufypc/websocket
2026-02-06 14:15:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:15:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 14:15:54 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wv1ufypc]
2026-02-06 14:15:54 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: wv1ufypc
2026-02-06 14:15:54 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: wv1ufypc
2026-02-06 14:15:54 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:15:54 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: wv1ufypc
2026-02-06 14:15:54 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:15:54 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 31
2026-02-06 14:15:54 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:15:54 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:15:54 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:15:54 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: wv1ufypc
2026-02-06 14:15:54 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: wv1ufypc
2026-02-06 14:15:54 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=wv1ufypc
2026-02-06 14:15:54 [clientOutboundChannel-12] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366654172, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@38b40dd5, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3673e4b3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wv1ufypc}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3673e4b3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wv1ufypc}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:15:54 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userwv1ufypc subscriptionId=sub-0 session=wv1ufypc user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:15:54 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userwv1ufypc subscriptionId=sub-1 session=wv1ufypc user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:15:54 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 24, type: USER_HOST
2026-02-06 14:15:54 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 24, type: USER_HOST
2026-02-06 14:15:54 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 31 and 24
2026-02-06 14:15:54 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=15
2026-02-06 14:15:54 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 24
2026-02-06 14:15:54 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=282
2026-02-06 14:15:54 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/15 id=sub-2 session=wv1ufypc
2026-02-06 14:15:54 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/15 id=sub-3 session=wv1ufypc
2026-02-06 14:15:54 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Marking conversation 15 as read by user 31
2026-02-06 14:15:54 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 15 by user 31
2026-02-06 14:15:54 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 15 as read by user 31
2026-02-06 14:15:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 15 by user 31
2026-02-06 14:15:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 15
2026-02-06 14:15:54 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 15
2026-02-06 14:15:54 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/15 session=null payload={"conversationId":15,"readBy":31,"count":0}
2026-02-06 14:16:00 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=wv1ufypc
2026-02-06 14:16:00 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=wv1ufypc
2026-02-06 14:16:00 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=wv1ufypc
2026-02-06 14:16:00 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=wv1ufypc
2026-02-06 14:16:00 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=wv1ufypc
2026-02-06 14:16:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wv1ufypc] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:16:00 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wv1ufypc
2026-02-06 14:16:00 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: wv1ufypc
2026-02-06 14:16:00 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:16:00 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:16:00 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770366660674}
2026-02-06 14:16:00 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wv1ufypc
2026-02-06 14:16:00 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366654172, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3673e4b3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wv1ufypc}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3673e4b3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wv1ufypc}]
2026-02-06 14:16:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:16:01 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366661784
2026-02-06 14:16:01 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:16:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:16:01 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:16:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/321/d3x3vlnz/websocket
2026-02-06 14:16:01 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:16:01 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=d3x3vlnz]
2026-02-06 14:16:01 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: d3x3vlnz
2026-02-06 14:16:01 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: d3x3vlnz
2026-02-06 14:16:01 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: d3x3vlnz
2026-02-06 14:16:01 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:16:01 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:16:01 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:16:01 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: d3x3vlnz
2026-02-06 14:16:01 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=d3x3vlnz
2026-02-06 14:16:01 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: d3x3vlnz
2026-02-06 14:16:01 [clientOutboundChannel-11] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366661843, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@e2d8bb3, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ea6406, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d3x3vlnz}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ea6406, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d3x3vlnz}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:16:01 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:16:01 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userd3x3vlnz subscriptionId=sub-0 session=d3x3vlnz user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:16:01 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userd3x3vlnz subscriptionId=sub-1 session=d3x3vlnz user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:16:01 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:16:01 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:16:01 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 24, type: USER_HOST
2026-02-06 14:16:01 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 24, type: USER_HOST
2026-02-06 14:16:01 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 24
2026-02-06 14:16:01 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=283
2026-02-06 14:16:01 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/15 id=sub-2 session=d3x3vlnz
2026-02-06 14:16:01 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/15 id=sub-3 session=d3x3vlnz
2026-02-06 14:16:02 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 15 as read by user 31
2026-02-06 14:16:02 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 15 by user 31
2026-02-06 14:16:02 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 15 as read by user 31
2026-02-06 14:16:02 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 15 by user 31
2026-02-06 14:16:02 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 15
2026-02-06 14:16:02 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 15
2026-02-06 14:16:02 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/15 session=null payload={"conversationId":15,"readBy":31,"count":0}
2026-02-06 14:16:07 [MessageBroker-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wv1ufypc]
2026-02-06 14:17:00 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=d3x3vlnz
2026-02-06 14:17:00 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=d3x3vlnz
2026-02-06 14:17:00 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=d3x3vlnz
2026-02-06 14:17:00 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=d3x3vlnz
2026-02-06 14:17:00 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=d3x3vlnz
2026-02-06 14:17:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=d3x3vlnz] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:17:00 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session d3x3vlnz
2026-02-06 14:17:00 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: d3x3vlnz
2026-02-06 14:17:00 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:17:00 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:17:00 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770366720366}
2026-02-06 14:17:00 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=d3x3vlnz
2026-02-06 14:17:00 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366661843, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ea6406, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d3x3vlnz}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@ea6406, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=d3x3vlnz}]
2026-02-06 14:17:00 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:17:01 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:17:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:17:01 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366721461
2026-02-06 14:17:01 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:17:01 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:17:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:17:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/502/qfgjjhiv/websocket
2026-02-06 14:17:01 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=qfgjjhiv]
2026-02-06 14:17:01 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: qfgjjhiv
2026-02-06 14:17:01 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: qfgjjhiv
2026-02-06 14:17:01 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: qfgjjhiv
2026-02-06 14:17:01 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:17:01 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:17:01 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:17:01 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: qfgjjhiv
2026-02-06 14:17:01 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=qfgjjhiv
2026-02-06 14:17:01 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: qfgjjhiv
2026-02-06 14:17:01 [clientOutboundChannel-12] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366721531, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@6f8c9f11, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4673b82f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qfgjjhiv}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4673b82f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qfgjjhiv}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:17:01 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:17:01 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:17:01 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userqfgjjhiv subscriptionId=sub-0 session=qfgjjhiv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:17:01 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userqfgjjhiv subscriptionId=sub-1 session=qfgjjhiv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:17:01 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:17:01 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 24, type: USER_HOST
2026-02-06 14:17:01 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 24, type: USER_HOST
2026-02-06 14:17:01 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 24
2026-02-06 14:17:01 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=284
2026-02-06 14:17:01 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/15 id=sub-2 session=qfgjjhiv
2026-02-06 14:17:01 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/15 id=sub-3 session=qfgjjhiv
2026-02-06 14:17:01 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 15 as read by user 31
2026-02-06 14:17:01 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 15 by user 31
2026-02-06 14:17:01 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 15 as read by user 31
2026-02-06 14:17:01 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 15 by user 31
2026-02-06 14:17:01 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 15
2026-02-06 14:17:01 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 15
2026-02-06 14:17:01 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/15 session=null payload={"conversationId":15,"readBy":31,"count":0}
2026-02-06 14:17:05 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:17:05 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:17:05 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:17:07 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [d3x3vlnz]
2026-02-06 14:17:12 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:17:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:17:12 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:17:24 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=qfgjjhiv
2026-02-06 14:17:24 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=qfgjjhiv
2026-02-06 14:17:24 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=qfgjjhiv
2026-02-06 14:17:24 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=qfgjjhiv
2026-02-06 14:17:24 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=qfgjjhiv
2026-02-06 14:17:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=qfgjjhiv] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:17:24 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session qfgjjhiv
2026-02-06 14:17:24 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: qfgjjhiv
2026-02-06 14:17:24 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:17:24 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:17:24 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770366744582}
2026-02-06 14:17:24 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=qfgjjhiv
2026-02-06 14:17:24 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366721531, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4673b82f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qfgjjhiv}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4673b82f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=qfgjjhiv}]
2026-02-06 14:17:24 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:17:32 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [qfgjjhiv]
2026-02-06 14:18:18 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:18:29 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:20:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:20:24 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770366924217
2026-02-06 14:20:24 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:20:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:20:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:20:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:20:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/320/duzfoolg/websocket
2026-02-06 14:20:24 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=duzfoolg]
2026-02-06 14:20:24 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: duzfoolg
2026-02-06 14:20:24 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: duzfoolg
2026-02-06 14:20:24 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: duzfoolg
2026-02-06 14:20:24 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:20:24 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:20:24 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:20:24 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: duzfoolg
2026-02-06 14:20:24 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: duzfoolg
2026-02-06 14:20:24 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=duzfoolg
2026-02-06 14:20:24 [clientOutboundChannel-13] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770366924288, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@144fdb9, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f8313e1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=duzfoolg}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f8313e1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=duzfoolg}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:20:24 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userduzfoolg subscriptionId=sub-0 session=duzfoolg user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:20:24 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userduzfoolg subscriptionId=sub-1 session=duzfoolg user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:20:24 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:20:24 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:20:24 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:20:24 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 24, type: USER_HOST
2026-02-06 14:20:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 24, type: USER_HOST
2026-02-06 14:20:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 24
2026-02-06 14:20:24 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=285
2026-02-06 14:20:24 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/15 id=sub-2 session=duzfoolg
2026-02-06 14:20:24 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/15 id=sub-3 session=duzfoolg
2026-02-06 14:20:24 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 15 as read by user 31
2026-02-06 14:20:24 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 15 by user 31
2026-02-06 14:20:24 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 15 as read by user 31
2026-02-06 14:20:24 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 15 by user 31
2026-02-06 14:20:24 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 messages in conversation 15
2026-02-06 14:20:24 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 15
2026-02-06 14:20:24 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/15 session=null payload={"conversationId":15,"readBy":31,"count":0}
2026-02-06 14:20:45 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:20:45 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:20:45 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:21:50 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=duzfoolg
2026-02-06 14:21:50 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=duzfoolg
2026-02-06 14:21:50 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=duzfoolg
2026-02-06 14:21:50 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=duzfoolg
2026-02-06 14:21:50 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=duzfoolg
2026-02-06 14:21:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=duzfoolg] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:21:50 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session duzfoolg
2026-02-06 14:21:50 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: duzfoolg
2026-02-06 14:21:50 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:21:50 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:21:50 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770367010214}
2026-02-06 14:21:50 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=duzfoolg
2026-02-06 14:21:50 [clientOutboundChannel-17] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770366924288, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f8313e1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=duzfoolg}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@f8313e1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=duzfoolg}]
2026-02-06 14:21:51 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:21:51 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:21:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:21:51 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770367011048
2026-02-06 14:21:51 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:21:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:21:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/494/w03qezhn/websocket
2026-02-06 14:21:51 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=w03qezhn]
2026-02-06 14:21:51 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: w03qezhn
2026-02-06 14:21:51 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: w03qezhn
2026-02-06 14:21:51 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: w03qezhn
2026-02-06 14:21:51 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:21:51 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:21:51 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:21:51 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: w03qezhn
2026-02-06 14:21:51 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: w03qezhn
2026-02-06 14:21:51 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=w03qezhn
2026-02-06 14:21:51 [clientOutboundChannel-14] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770367011106, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@1eb6c9f0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@10712456, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=w03qezhn}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@10712456, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=w03qezhn}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:21:51 [clientInboundChannel-21] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userw03qezhn subscriptionId=sub-0 session=w03qezhn user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:21:51 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userw03qezhn subscriptionId=sub-1 session=w03qezhn user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:21:51 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:21:51 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:21:51 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:21:51 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 24, type: USER_HOST
2026-02-06 14:21:51 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 24, type: USER_HOST
2026-02-06 14:21:51 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 24
2026-02-06 14:21:51 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=286
2026-02-06 14:21:51 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/15 id=sub-2 session=w03qezhn
2026-02-06 14:21:51 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/15 id=sub-3 session=w03qezhn
2026-02-06 14:21:51 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 15 by user 31
2026-02-06 14:21:51 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 15 by user 31
2026-02-06 14:21:51 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 15 as read by user 31
2026-02-06 14:21:51 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 15 as read by user 31
2026-02-06 14:21:51 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 15
2026-02-06 14:21:51 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 15
2026-02-06 14:21:51 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/15 session=null payload={"conversationId":15,"readBy":31,"count":0}
2026-02-06 14:21:57 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [duzfoolg]
2026-02-06 14:23:15 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=w03qezhn
2026-02-06 14:23:15 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=w03qezhn
2026-02-06 14:23:15 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=w03qezhn
2026-02-06 14:23:15 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=w03qezhn
2026-02-06 14:23:15 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=w03qezhn
2026-02-06 14:23:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=w03qezhn] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:23:15 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session w03qezhn
2026-02-06 14:23:15 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: w03qezhn
2026-02-06 14:23:15 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:23:15 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:23:15 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770367095757}
2026-02-06 14:23:15 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=w03qezhn
2026-02-06 14:23:15 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770367011106, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@10712456, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=w03qezhn}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@10712456, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=w03qezhn}]
2026-02-06 14:23:19 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:23:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:23:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:23:19 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770367099087
2026-02-06 14:23:19 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:23:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:23:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/722/wxlm3wgv/websocket
2026-02-06 14:23:19 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=wxlm3wgv]
2026-02-06 14:23:19 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: wxlm3wgv
2026-02-06 14:23:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: wxlm3wgv
2026-02-06 14:23:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: wxlm3wgv
2026-02-06 14:23:19 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:23:19 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:23:19 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:23:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:23:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:23:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:23:19 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: wxlm3wgv
2026-02-06 14:23:19 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=wxlm3wgv
2026-02-06 14:23:19 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: wxlm3wgv
2026-02-06 14:23:19 [clientOutboundChannel-16] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770367099155, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@54210701, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5ae6e3f5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxlm3wgv}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5ae6e3f5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxlm3wgv}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:23:19 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userwxlm3wgv subscriptionId=sub-0 session=wxlm3wgv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:23:19 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userwxlm3wgv subscriptionId=sub-1 session=wxlm3wgv user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:23:20 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=wxlm3wgv
2026-02-06 14:23:20 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=wxlm3wgv
2026-02-06 14:23:20 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=wxlm3wgv
2026-02-06 14:23:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=wxlm3wgv] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:23:20 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session wxlm3wgv
2026-02-06 14:23:20 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: wxlm3wgv
2026-02-06 14:23:20 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:23:20 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:23:20 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770367100413}
2026-02-06 14:23:20 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=wxlm3wgv
2026-02-06 14:23:20 [clientOutboundChannel-19] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770367099155, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5ae6e3f5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxlm3wgv}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@5ae6e3f5, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=wxlm3wgv}]
2026-02-06 14:23:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:23:21 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770367101295
2026-02-06 14:23:21 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:23:21 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:23:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@108cad57
2026-02-06 14:23:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/540/dbe1i1sk/websocket
2026-02-06 14:23:21 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:23:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dbe1i1sk]
2026-02-06 14:23:21 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: dbe1i1sk
2026-02-06 14:23:21 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: dbe1i1sk
2026-02-06 14:23:21 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: dbe1i1sk
2026-02-06 14:23:21 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:23:21 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:23:21 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:23:21 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: dbe1i1sk
2026-02-06 14:23:21 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=dbe1i1sk
2026-02-06 14:23:21 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: dbe1i1sk
2026-02-06 14:23:21 [clientOutboundChannel-15] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770367101367, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@62f56a39, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6c329817, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dbe1i1sk}], simpHeartbeat=[J@3cd5bcd4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6c329817, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dbe1i1sk}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:23:21 [clientInboundChannel-23] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userdbe1i1sk subscriptionId=sub-0 session=dbe1i1sk user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:23:21 [clientInboundChannel-22] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userdbe1i1sk subscriptionId=sub-1 session=dbe1i1sk user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:23:21 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:23:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:23:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:23:22 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [w03qezhn]
2026-02-06 14:23:24 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:23:24 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:23:24 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:23:27 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [wxlm3wgv]
2026-02-06 14:36:54 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-06 14:36:54 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 14:36:54 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Closing SockJS session dbe1i1sk with CloseStatus[code=1001, reason=null]
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - Transport error in WebSocketServerSockJsSession[id=dbe1i1sk]
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsSession.sendCloseMessage(WsSession.java:777)
	at org.apache.tomcat.websocket.WsSession.doClose(WsSession.java:574)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:324)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.devtools.restart.Restarter.stop(Restarter.java:308)
	at org.springframework.boot.devtools.restart.Restarter.lambda$restart$1(Restarter.java:250)
	at org.springframework.boot.devtools.restart.Restarter$LeakSafeThread.run(Restarter.java:612)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 23 common frames omitted
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.w.s.s.t.s.WebSocketServerSockJsSession - Failure while sending SockJS close frame
java.io.IOException: java.nio.channels.ClosedChannelException
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:326)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:266)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlock(WsRemoteEndpointImplBase.java:250)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendPartialString(WsRemoteEndpointImplBase.java:223)
	at org.apache.tomcat.websocket.WsRemoteEndpointBasic.sendText(WsRemoteEndpointBasic.java:48)
	at org.springframework.web.socket.adapter.standard.StandardWebSocketSession.sendTextMessage(StandardWebSocketSession.java:217)
	at org.springframework.web.socket.adapter.AbstractWebSocketSession.sendMessage(AbstractWebSocketSession.java:108)
	at org.springframework.web.socket.sockjs.transport.session.WebSocketServerSockJsSession.writeFrameInternal(WebSocketServerSockJsSession.java:228)
	at org.springframework.web.socket.sockjs.transport.session.AbstractSockJsSession.close(AbstractSockJsSession.java:188)
	at org.springframework.web.socket.handler.WebSocketSessionDecorator.close(WebSocketSessionDecorator.java:164)
	at org.springframework.web.socket.handler.ConcurrentWebSocketSessionDecorator.close(ConcurrentWebSocketSessionDecorator.java:279)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:308)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.stop(SubProtocolWebSocketHandler.java:321)
	at org.springframework.context.support.DefaultLifecycleProcessor.doStop(DefaultLifecycleProcessor.java:463)
	at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.stop(DefaultLifecycleProcessor.java:618)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.context.support.DefaultLifecycleProcessor.stopBeans(DefaultLifecycleProcessor.java:432)
	at org.springframework.context.support.DefaultLifecycleProcessor.onClose(DefaultLifecycleProcessor.java:323)
	at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1172)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.doClose(ServletWebServerApplicationContext.java:179)
	at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:1126)
	at org.springframework.boot.devtools.restart.Restarter.stop(Restarter.java:308)
	at org.springframework.boot.devtools.restart.Restarter.lambda$restart$1(Restarter.java:250)
	at org.springframework.boot.devtools.restart.Restarter$LeakSafeThread.run(Restarter.java:612)
Caused by: java.nio.channels.ClosedChannelException: null
	at org.apache.tomcat.util.net.NioChannel$1.write(NioChannel.java:282)
	at org.apache.tomcat.util.net.NioEndpoint$NioSocketWrapper$NioOperationState.run(NioEndpoint.java:1672)
	at org.apache.tomcat.util.net.SocketWrapperBase$OperationState.start(SocketWrapperBase.java:987)
	at org.apache.tomcat.util.net.SocketWrapperBase.vectoredOperation(SocketWrapperBase.java:1358)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1287)
	at org.apache.tomcat.util.net.SocketWrapperBase.write(SocketWrapperBase.java:1262)
	at org.apache.tomcat.websocket.server.WsRemoteEndpointImplServer.doWrite(WsRemoteEndpointImplServer.java:173)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.writeMessagePart(WsRemoteEndpointImplBase.java:521)
	at org.apache.tomcat.websocket.WsRemoteEndpointImplBase.sendMessageBlockInternal(WsRemoteEndpointImplBase.java:313)
	... 23 common frames omitted
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dbe1i1sk] closed with CloseStatus[code=1001, reason=null]
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dbe1i1sk
2026-02-06 14:36:54 [Thread-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: dbe1i1sk
2026-02-06 14:36:54 [Thread-5] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:36:54 [Thread-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","userId":31,"timestamp":1770367914720}
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:36:54 [clientInboundChannel-45] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dbe1i1sk
2026-02-06 14:36:54 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 14:36:54 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@38306b3e]]
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@38306b3e]
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@38306b3e]
2026-02-06 14:36:54 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:36:54 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:36:54 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:36:54 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 14:36:54 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 14:36:55 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 23412 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 14:36:55 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 14:36:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 14:36:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75 ms. Found 9 JPA repository interfaces.
2026-02-06 14:36:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 14:36:56 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 14:36:56 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 14:36:56 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 14:36:56 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1397 ms
2026-02-06 14:36:56 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 14:36:56 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 14:36:56 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 14:36:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2026-02-06 14:36:56 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@511eeec
2026-02-06 14:36:56 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2026-02-06 14:36:56 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 14:36:56 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 14:36:57 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 14:36:57 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:36:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 14:36:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 14:36:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 14:36:58 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 14:36:58 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 14:36:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 14:36:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 14:36:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 14:36:58 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:36:58 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@37e36346]
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@37e36346]
2026-02-06 14:36:58 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@37e36346]]
2026-02-06 14:36:58 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:36:58 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:36:58 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 14:36:58 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 14:36:58 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 3.712 seconds (process running for 1767.379)
2026-02-06 14:36:58 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-06 14:37:09 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 14:37:09 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 14:37:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:37:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:37:09 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 14:37:09 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@37e36346]]
2026-02-06 14:37:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@37e36346]
2026-02-06 14:37:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@37e36346]
2026-02-06 14:37:09 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 14:37:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:37:09 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:37:09 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:37:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2026-02-06 14:37:09 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2026-02-06 14:39:54 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 23668 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 14:39:54 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 14:39:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 14:39:54 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 14:39:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 14:39:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 126 ms. Found 9 JPA repository interfaces.
2026-02-06 14:39:57 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 14:39:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 14:39:57 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 14:39:57 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 14:39:57 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2676 ms
2026-02-06 14:39:57 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 14:39:57 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 14:39:57 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 14:39:58 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 14:39:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 14:39:58 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@25fbbf57
2026-02-06 14:39:58 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 14:39:58 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 14:39:58 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 14:39:59 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 14:40:00 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:40:00 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 14:40:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 14:40:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 14:40:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 14:40:04 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 14:40:04 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 14:40:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 14:40:04 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 14:40:04 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 14:40:05 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 14:40:05 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:40:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e57b8bb]
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e57b8bb]
2026-02-06 14:40:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e57b8bb]]
2026-02-06 14:40:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:40:05 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:40:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 14:40:05 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 14:40:05 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 11.532 seconds (process running for 12.137)
2026-02-06 14:40:17 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 14:40:17 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 14:40:17 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-06 14:40:18 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:19 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:40:19 [http-nio-8080-exec-3] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 14:40:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:22 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770368122638
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/388/uhwsld2w/websocket
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=uhwsld2w]
2026-02-06 14:40:22 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: uhwsld2w
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: uhwsld2w
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: uhwsld2w
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:40:22 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:40:22 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: uhwsld2w
2026-02-06 14:40:22 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=uhwsld2w
2026-02-06 14:40:22 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: uhwsld2w
2026-02-06 14:40:22 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770368122959, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@65f4d593, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6265533, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=uhwsld2w}], simpHeartbeat=[J@78ee2e3a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6265533, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=uhwsld2w}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:40:23 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useruhwsld2w subscriptionId=sub-0 session=uhwsld2w user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:23 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useruhwsld2w subscriptionId=sub-1 session=uhwsld2w user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:24 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=uhwsld2w
2026-02-06 14:40:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=uhwsld2w
2026-02-06 14:40:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=uhwsld2w
2026-02-06 14:40:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=uhwsld2w] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:40:24 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session uhwsld2w
2026-02-06 14:40:24 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: uhwsld2w
2026-02-06 14:40:24 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:40:24 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:40:24 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770368124444,"userId":31}
2026-02-06 14:40:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=uhwsld2w
2026-02-06 14:40:24 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770368122959, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6265533, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=uhwsld2w}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6265533, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=uhwsld2w}]
2026-02-06 14:40:24 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:40:32 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [uhwsld2w]
2026-02-06 14:40:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:35 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770368135281
2026-02-06 14:40:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:35 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/186/dowfuinz/websocket
2026-02-06 14:40:35 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:35 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=dowfuinz]
2026-02-06 14:40:35 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:40:35 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: dowfuinz
2026-02-06 14:40:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: dowfuinz
2026-02-06 14:40:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: dowfuinz
2026-02-06 14:40:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:40:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:40:35 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:40:35 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: dowfuinz
2026-02-06 14:40:35 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=dowfuinz
2026-02-06 14:40:35 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: dowfuinz
2026-02-06 14:40:35 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770368135395, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@7968f26e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@77af1333, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dowfuinz}], simpHeartbeat=[J@78ee2e3a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@77af1333, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dowfuinz}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:40:35 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userdowfuinz subscriptionId=sub-0 session=dowfuinz user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:35 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userdowfuinz subscriptionId=sub-1 session=dowfuinz user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:35 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:35 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 31
2026-02-06 14:40:35 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 23, type: USER_HOST
2026-02-06 14:40:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 23, type: USER_HOST
2026-02-06 14:40:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Creating new USER_HOST conversation between users 31 and 23
2026-02-06 14:40:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation created: ID=16
2026-02-06 14:40:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending initial message to new conversation
2026-02-06 14:40:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 31 to user 23
2026-02-06 14:40:35 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=287
2026-02-06 14:40:35 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/16 id=sub-2 session=dowfuinz
2026-02-06 14:40:35 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/16 id=sub-3 session=dowfuinz
2026-02-06 14:40:35 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 16 by user 31
2026-02-06 14:40:35 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Marking conversation 16 as read by user 31
2026-02-06 14:40:35 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 16 as read by user 31
2026-02-06 14:40:35 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 16 by user 31
2026-02-06 14:40:35 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 16
2026-02-06 14:40:35 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 16
2026-02-06 14:40:35 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/16 session=null payload={"conversationId":16,"readBy":31,"count":0}
2026-02-06 14:40:39 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=dowfuinz
2026-02-06 14:40:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=dowfuinz
2026-02-06 14:40:39 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=dowfuinz
2026-02-06 14:40:39 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=dowfuinz
2026-02-06 14:40:39 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=dowfuinz
2026-02-06 14:40:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=dowfuinz] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:40:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session dowfuinz
2026-02-06 14:40:39 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: dowfuinz
2026-02-06 14:40:39 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:40:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:40:39 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770368139330,"userId":31}
2026-02-06 14:40:39 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=dowfuinz
2026-02-06 14:40:39 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770368135395, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@77af1333, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dowfuinz}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@77af1333, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=dowfuinz}]
2026-02-06 14:40:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:40 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770368140298
2026-02-06 14:40:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:40 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/963/onrvkmg2/websocket
2026-02-06 14:40:40 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:40 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=onrvkmg2]
2026-02-06 14:40:40 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 14:40:40 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: onrvkmg2
2026-02-06 14:40:40 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: onrvkmg2
2026-02-06 14:40:40 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: onrvkmg2
2026-02-06 14:40:40 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:40:40 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:40:40 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:40:40 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: onrvkmg2
2026-02-06 14:40:40 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=onrvkmg2
2026-02-06 14:40:40 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: onrvkmg2
2026-02-06 14:40:40 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770368140400, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@49ddfc98, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@471a0bd3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=onrvkmg2}], simpHeartbeat=[J@78ee2e3a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@471a0bd3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=onrvkmg2}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:40:40 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useronrvkmg2 subscriptionId=sub-0 session=onrvkmg2 user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:40 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useronrvkmg2 subscriptionId=sub-1 session=onrvkmg2 user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:40 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:40 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:40 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 14:40:40 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 23, type: USER_HOST
2026-02-06 14:40:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 23, type: USER_HOST
2026-02-06 14:40:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation already exists, skipping initial message
2026-02-06 14:40:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/16 id=sub-2 session=onrvkmg2
2026-02-06 14:40:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/16 id=sub-3 session=onrvkmg2
2026-02-06 14:40:40 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 16 as read by user 31
2026-02-06 14:40:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 16 by user 31
2026-02-06 14:40:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 16 as read by user 31
2026-02-06 14:40:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 16 by user 31
2026-02-06 14:40:40 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 16
2026-02-06 14:40:40 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 16
2026-02-06 14:40:40 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/16 session=null payload={"conversationId":16,"readBy":31,"count":0}
2026-02-06 14:40:45 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:45 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:45 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 14:40:46 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=onrvkmg2
2026-02-06 14:40:46 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=onrvkmg2
2026-02-06 14:40:46 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=onrvkmg2
2026-02-06 14:40:46 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=onrvkmg2
2026-02-06 14:40:46 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=onrvkmg2
2026-02-06 14:40:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=onrvkmg2] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:40:46 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session onrvkmg2
2026-02-06 14:40:46 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: onrvkmg2
2026-02-06 14:40:46 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:40:46 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:40:46 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770368146354,"userId":31}
2026-02-06 14:40:46 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=onrvkmg2
2026-02-06 14:40:46 [clientOutboundChannel-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770368140400, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@471a0bd3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=onrvkmg2}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@471a0bd3, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=onrvkmg2}]
2026-02-06 14:40:47 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [dowfuinz]
2026-02-06 14:40:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:48 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770368148478
2026-02-06 14:40:48 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:48 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@14c08da3
2026-02-06 14:40:48 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:48 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/180/xvvdn32x/websocket
2026-02-06 14:40:48 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xvvdn32x]
2026-02-06 14:40:48 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: xvvdn32x
2026-02-06 14:40:48 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 14:40:48 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: xvvdn32x
2026-02-06 14:40:48 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: xvvdn32x
2026-02-06 14:40:48 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 14:40:48 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 14:40:48 [http-nio-8080-exec-4] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:40:48 [http-nio-8080-exec-4] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: xvvdn32x
2026-02-06 14:40:48 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=xvvdn32x
2026-02-06 14:40:48 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: xvvdn32x
2026-02-06 14:40:48 [clientOutboundChannel-2] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjY1NTUsImV4cCI6MTc3MDM3MDE1NX0.mGcEtdj53BxbyJnCpLJlEp5arA5AqhGEXFuhy5i8iPw], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770368148572, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@756c7430, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7bab84ed, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xvvdn32x}], simpHeartbeat=[J@78ee2e3a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7bab84ed, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xvvdn32x}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:40:48 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxvvdn32x subscriptionId=sub-0 session=xvvdn32x user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:48 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxvvdn32x subscriptionId=sub-1 session=xvvdn32x user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:40:48 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 14:40:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 14:40:48 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 14:40:48 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 23, type: USER_HOST
2026-02-06 14:40:48 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 23, type: USER_HOST
2026-02-06 14:40:48 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation already exists, skipping initial message
2026-02-06 14:40:48 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/16 id=sub-2 session=xvvdn32x
2026-02-06 14:40:48 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/16 id=sub-3 session=xvvdn32x
2026-02-06 14:40:48 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 16 by user 31
2026-02-06 14:40:48 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 16 as read by user 31
2026-02-06 14:40:48 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 16 by user 31
2026-02-06 14:40:48 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 16 as read by user 31
2026-02-06 14:40:48 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 16
2026-02-06 14:40:48 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 16
2026-02-06 14:40:48 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/16 session=null payload={"conversationId":16,"readBy":31,"count":0}
2026-02-06 14:40:52 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [onrvkmg2]
2026-02-06 14:40:54 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Admin 31 searching users with term: ''
2026-02-06 14:40:54 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  User 31 searching users with term: '', roleFilter: ADMIN
2026-02-06 14:40:54 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  User/Host 31 searching for admins for support
2026-02-06 14:40:55 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=xvvdn32x
2026-02-06 14:40:55 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/6 id=sub-4 session=xvvdn32x
2026-02-06 14:40:55 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/6 id=sub-5 session=xvvdn32x
2026-02-06 14:40:55 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 6 as read by user 31
2026-02-06 14:40:55 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 6 by user 31
2026-02-06 14:40:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 6 as read by user 31
2026-02-06 14:40:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 6 by user 31
2026-02-06 14:40:55 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 6
2026-02-06 14:40:55 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 6
2026-02-06 14:40:55 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/6 session=null payload={"conversationId":6,"readBy":31,"count":0}
2026-02-06 14:41:00 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=xvvdn32x
2026-02-06 14:41:00 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=xvvdn32x
2026-02-06 14:41:00 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=xvvdn32x
2026-02-06 14:41:00 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=xvvdn32x
2026-02-06 14:41:00 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-6 session=xvvdn32x
2026-02-06 14:41:00 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=xvvdn32x
2026-02-06 14:41:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xvvdn32x] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:41:00 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xvvdn32x
2026-02-06 14:41:00 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: xvvdn32x
2026-02-06 14:41:00 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 14:41:00 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 14:41:00 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770368160165,"userId":31}
2026-02-06 14:41:00 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xvvdn32x
2026-02-06 14:41:00 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770368148572, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7bab84ed, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xvvdn32x}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@7bab84ed, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xvvdn32x}]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 14:41:03 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 14:41:03 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 14:41:03 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e57b8bb]]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e57b8bb]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@2e57b8bb]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 14:41:03 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:41:03 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:41:03 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 14:41:03 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 14:42:31 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 6544 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 14:42:31 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 14:42:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 14:42:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 14:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 14:42:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 9 JPA repository interfaces.
2026-02-06 14:42:33 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 14:42:33 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 14:42:33 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 14:42:33 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 14:42:33 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1883 ms
2026-02-06 14:42:33 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 14:42:33 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 14:42:33 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 14:42:33 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 14:42:33 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 14:42:34 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7a28260b
2026-02-06 14:42:34 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 14:42:34 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 14:42:34 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 14:42:35 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 14:42:35 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:42:35 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 14:42:39 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 14:42:39 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 14:42:39 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 14:42:39 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 14:42:39 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 14:42:39 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 14:42:39 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 14:42:39 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 14:42:40 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 14:42:40 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:42:40 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1984f4d1]
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1984f4d1]
2026-02-06 14:42:40 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1984f4d1]]
2026-02-06 14:42:40 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:42:40 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:42:40 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 14:42:40 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 14:42:40 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 9.589 seconds (process running for 10.139)
2026-02-06 14:43:40 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 14:43:41 [http-nio-8080-exec-3] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 14:43:41 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 14:43:41 [http-nio-8080-exec-3] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-06 14:43:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6426b2b6
2026-02-06 14:43:43 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 14:43:43 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770368323929
2026-02-06 14:43:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 14:43:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6426b2b6
2026-02-06 14:43:43 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/857/iytijrjv/websocket
2026-02-06 14:43:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 14:43:44 [http-nio-8080-exec-6] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 14:43:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iytijrjv]
2026-02-06 14:43:44 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 14:43:44 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: iytijrjv
2026-02-06 14:43:44 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 14:43:44 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: iytijrjv
2026-02-06 14:43:44 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 14:43:44 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: iytijrjv
2026-02-06 14:43:44 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 14:43:44 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 14:43:44 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:43:44 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: iytijrjv
2026-02-06 14:43:44 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=iytijrjv
2026-02-06 14:43:44 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: iytijrjv
2026-02-06 14:43:44 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM2ODMyMSwiZXhwIjoxNzcwMzcxOTIxfQ.uopfgLMghDXQxhGOFOW6cVWIKvcwQa6wruAgINadzb4], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770368324268, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@6fe36281, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@359716f2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=iytijrjv}], simpHeartbeat=[J@6fd3602e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@359716f2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=iytijrjv}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:43:44 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useriytijrjv subscriptionId=sub-0 session=iytijrjv user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:43:44 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useriytijrjv subscriptionId=sub-1 session=iytijrjv user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:44:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iytijrjv] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:44:41 [http-nio-8080-exec-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iytijrjv
2026-02-06 14:44:41 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: iytijrjv
2026-02-06 14:44:41 [http-nio-8080-exec-4] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 14:44:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 14:44:41 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"timestamp":1770368381430,"status":"OFFLINE","userId":1}
2026-02-06 14:44:41 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iytijrjv
2026-02-06 14:44:41 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770368324268, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@359716f2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=iytijrjv}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@359716f2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=iytijrjv}]
2026-02-06 14:44:48 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [iytijrjv]
2026-02-06 14:47:46 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-06 14:47:46 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 14:47:46 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 14:47:46 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:47:46 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:47:46 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 14:47:46 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1984f4d1]]
2026-02-06 14:47:46 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1984f4d1]
2026-02-06 14:47:46 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1984f4d1]
2026-02-06 14:47:46 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 14:47:46 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:47:46 [Thread-5] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:47:46 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:47:46 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 14:47:46 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 14:47:47 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 6544 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 14:47:47 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 14:47:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 14:47:47 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 75 ms. Found 9 JPA repository interfaces.
2026-02-06 14:47:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 14:47:48 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 14:47:48 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 14:47:48 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 14:47:48 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1064 ms
2026-02-06 14:47:48 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 14:47:48 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 14:47:48 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 14:47:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2026-02-06 14:47:48 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3c136049
2026-02-06 14:47:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2026-02-06 14:47:48 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 14:47:48 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 14:47:48 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 14:47:49 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:47:49 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 14:47:49 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 14:47:49 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 14:47:49 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 14:47:49 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 14:47:49 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 14:47:49 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 14:47:49 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 14:47:49 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:47:49 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4450661a]
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4450661a]
2026-02-06 14:47:49 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4450661a]]
2026-02-06 14:47:49 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:47:49 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:47:49 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 14:47:49 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 14:47:49 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 2.829 seconds (process running for 319.618)
2026-02-06 14:47:49 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-06 14:48:24 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2026-02-06 14:48:24 [Thread-8] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 14:48:24 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 14:48:24 [Thread-8] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:48:24 [Thread-8] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:48:24 [Thread-8] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 14:48:24 [Thread-8] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4450661a]]
2026-02-06 14:48:24 [Thread-8] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4450661a]
2026-02-06 14:48:24 [Thread-8] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4450661a]
2026-02-06 14:48:24 [Thread-8] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 14:48:24 [Thread-8] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:48:24 [Thread-8] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:48:24 [Thread-8] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:48:24 [Thread-8] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2026-02-06 14:48:24 [Thread-8] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2026-02-06 14:48:24 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 6544 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 14:48:24 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 14:48:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 14:48:25 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 66 ms. Found 9 JPA repository interfaces.
2026-02-06 14:48:25 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 14:48:25 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 14:48:25 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 14:48:25 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 14:48:25 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 584 ms
2026-02-06 14:48:25 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 14:48:25 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 14:48:25 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 14:48:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Starting...
2026-02-06 14:48:25 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-3 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6756d4c
2026-02-06 14:48:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Start completed.
2026-02-06 14:48:25 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 14:48:25 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-3)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 14:48:25 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 14:48:25 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:48:26 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 14:48:26 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 14:48:26 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 14:48:26 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 14:48:26 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 14:48:26 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 14:48:26 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 14:48:26 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 14:48:26 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:48:26 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@da85e08]
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@da85e08]
2026-02-06 14:48:26 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@da85e08]]
2026-02-06 14:48:26 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:48:26 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:48:26 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 14:48:26 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 14:48:26 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 1.678 seconds (process running for 356.207)
2026-02-06 14:48:26 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2026-02-06 14:49:18 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 14:49:18 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 14:49:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:49:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:49:18 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 14:49:18 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@da85e08]]
2026-02-06 14:49:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@da85e08]
2026-02-06 14:49:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@da85e08]
2026-02-06 14:49:18 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 14:49:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:49:18 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:49:18 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:49:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown initiated...
2026-02-06 14:49:18 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-3 - Shutdown completed.
2026-02-06 14:52:49 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 26104 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 14:52:49 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 14:52:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 14:52:49 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 14:52:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 14:52:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 102 ms. Found 9 JPA repository interfaces.
2026-02-06 14:52:51 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 14:52:51 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 14:52:51 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 14:52:51 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 14:52:51 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1947 ms
2026-02-06 14:52:51 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 14:52:51 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 14:52:51 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 14:52:52 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 14:52:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 14:52:52 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@55e73e02
2026-02-06 14:52:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 14:52:52 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 14:52:52 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 14:52:53 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 14:52:53 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 14:52:54 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 14:52:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 14:52:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 14:52:57 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 14:52:58 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 14:52:58 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 14:52:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 14:52:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 14:52:58 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 14:52:58 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 14:52:59 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 14:52:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 14:52:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 14:52:59 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 14:52:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@223c7a32]
2026-02-06 14:52:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@223c7a32]
2026-02-06 14:52:59 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@223c7a32]]
2026-02-06 14:52:59 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 14:52:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:52:59 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 14:52:59 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 14:52:59 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 14:52:59 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 10.395 seconds (process running for 11.06)
2026-02-06 14:53:18 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 14:53:18 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 14:53:18 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-06 14:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 14:53:23 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770368903553
2026-02-06 14:53:23 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 14:53:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/214/13hx4xk4/websocket
2026-02-06 14:53:23 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 14:53:23 [http-nio-8080-exec-2] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=13hx4xk4]
2026-02-06 14:53:23 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 27 (page 0, size 50)
2026-02-06 14:53:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 27
2026-02-06 14:53:23 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 27
2026-02-06 14:53:23 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 13hx4xk4
2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 13hx4xk4
2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: hari@gmail.com - Session: 13hx4xk4
2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: hari@gmail.com
2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: hari@gmail.com
2026-02-06 14:53:23 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:53:23 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: hari@gmail.com (ID: 27), Session: 13hx4xk4
2026-02-06 14:53:23 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=hari@gmail.com session=13hx4xk4
2026-02-06 14:53:23 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 13hx4xk4
2026-02-06 14:53:23 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MjcsInN1YiI6ImhhcmlAZ21haWwuY29tIiwiaWF0IjoxNzcwMzY4ODk4LCJleHAiOjE3NzAzNzI0OTh9.DIBJg3uXF7ztf_KXuJwL0MXlsJu1DXo1hWIPWtfAvSM], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770368903769, userId=27, username=hari@gmail.com}, simpHeartbeat=[J@7f6f694a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@11b75fa1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=13hx4xk4}], simpHeartbeat=[J@56e097fb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@11b75fa1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=13hx4xk4}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:53:23 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user13hx4xk4 subscriptionId=sub-0 session=13hx4xk4 user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:53:23 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user13hx4xk4 subscriptionId=sub-1 session=13hx4xk4 user=hari@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:53:29 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/4 id=sub-2 session=13hx4xk4
2026-02-06 14:53:29 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/4 id=sub-3 session=13hx4xk4
2026-02-06 14:53:29 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 4 as read by user 27
2026-02-06 14:53:29 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 4 by user 27
2026-02-06 14:53:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 4 as read by user 27
2026-02-06 14:53:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 4 by user 27
2026-02-06 14:53:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 4
2026-02-06 14:53:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 4
2026-02-06 14:53:29 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/4 session=null payload={"conversationId":4,"readBy":27,"count":0}
2026-02-06 14:53:31 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=13hx4xk4
2026-02-06 14:53:31 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/3 id=sub-4 session=13hx4xk4
2026-02-06 14:53:31 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/3 id=sub-5 session=13hx4xk4
2026-02-06 14:53:31 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 3 as read by user 27
2026-02-06 14:53:31 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 3 by user 27
2026-02-06 14:53:31 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 3 as read by user 27
2026-02-06 14:53:31 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 3 by user 27
2026-02-06 14:53:31 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 3
2026-02-06 14:53:31 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 6 messages in conversation 3
2026-02-06 14:53:31 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/3 session=null payload={"conversationId":3,"readBy":27,"count":0}
2026-02-06 14:53:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=13hx4xk4
2026-02-06 14:53:40 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=13hx4xk4
2026-02-06 14:53:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=13hx4xk4
2026-02-06 14:53:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=13hx4xk4
2026-02-06 14:53:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=13hx4xk4
2026-02-06 14:53:40 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-6 session=13hx4xk4
2026-02-06 14:53:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=13hx4xk4] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:53:40 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 13hx4xk4
2026-02-06 14:53:40 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: hari@gmail.com (ID: 27), Session: 13hx4xk4
2026-02-06 14:53:40 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 27 went OFFLINE (last session closed)
2026-02-06 14:53:40 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 27 status to OFFLINE
2026-02-06 14:53:40 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/27 session=null payload={"status":"OFFLINE","timestamp":1770368920931,"userId":27}
2026-02-06 14:53:40 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=13hx4xk4
2026-02-06 14:53:40 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770368903769, userId=27, username=hari@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@11b75fa1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=13hx4xk4}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@11b75fa1, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=13hx4xk4}]
2026-02-06 14:53:41 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:53:48 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [13hx4xk4]
2026-02-06 14:53:59 [MessageBroker-6] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(1)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 45], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 11, active threads = 1, queued tasks = 1, completed tasks = 8]
2026-02-06 14:54:21 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 14:54:34 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=1, PAYMENT_PENDING=0, CONFIRMED=1
2026-02-06 14:55:08 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 27 initiating payment for reservation 50
2026-02-06 14:55:08 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #50 current status: RESERVED (host: 24)
2026-02-06 14:55:08 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment #26 initiated for booking #50
2026-02-06 14:55:08 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #50 status: RESERVED  PAYMENT_PENDING (host: 24)
2026-02-06 14:55:08 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment amount: NPR 76.23
2026-02-06 14:55:24 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=1
2026-02-06 14:55:29 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Sent expiry warning for reservation ID: 50
2026-02-06 14:55:47 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 27 initiating payment for reservation 50
2026-02-06 14:55:47 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #50 current status: PAYMENT_PENDING (host: 24)
2026-02-06 14:55:47 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Returning existing PENDING payment 26 for booking 50
2026-02-06 14:55:49 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 27 processing payment 26
2026-02-06 14:55:51 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment 26 successful for booking #50
2026-02-06 14:55:51 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #50 status: PAYMENT_PENDING  CONFIRMED (host: 24)
2026-02-06 14:55:51 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Transaction ID: TXN-94D4BD90-74EB-49F4
2026-02-06 14:55:52 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Notifications sent to user 27 and host 24
2026-02-06 14:56:25 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.EmailServiceImpl - Receipt email sent to hari@gmail.com
2026-02-06 14:56:43 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.EmailServiceImpl - Booking confirmation email sent to hari@gmail.com
2026-02-06 14:56:43 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Sent expiry warning for reservation ID: 50
2026-02-06 14:57:05 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:57:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 14:57:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770369139909
2026-02-06 14:57:19 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 14:57:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 14:57:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 14:57:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/864/fqtlljfg/websocket
2026-02-06 14:57:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 14:57:19 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fqtlljfg]
2026-02-06 14:57:19 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: fqtlljfg
2026-02-06 14:57:19 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: fqtlljfg
2026-02-06 14:57:19 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: saurav@gmail.com - Session: fqtlljfg
2026-02-06 14:57:19 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: saurav@gmail.com
2026-02-06 14:57:19 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: saurav@gmail.com
2026-02-06 14:57:19 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:57:19 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: saurav@gmail.com (ID: 24), Session: fqtlljfg
2026-02-06 14:57:19 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=saurav@gmail.com session=fqtlljfg
2026-02-06 14:57:19 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: fqtlljfg
2026-02-06 14:57:19 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjQsInN1YiI6InNhdXJhdkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjkxMjMsImV4cCI6MTc3MDM3MjcyM30.k17c7ZzJMHRz-zcYXJEIrq8t5bckN_O62aF99pQcUL0], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770369139977, userId=24, username=saurav@gmail.com}, simpHeartbeat=[J@595b3db5, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@579cc8ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fqtlljfg}], simpHeartbeat=[J@56e097fb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@579cc8ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fqtlljfg}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:57:19 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userfqtlljfg subscriptionId=sub-0 session=fqtlljfg user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:57:19 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userfqtlljfg subscriptionId=sub-1 session=fqtlljfg user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:57:19 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 14:57:19 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 14:57:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 14:57:25 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching USER_HOST conversations for user 24
2026-02-06 14:57:25 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching USER_HOST conversations for user 24
2026-02-06 14:57:25 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 USER_HOST conversations
2026-02-06 14:57:26 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 14:57:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 14:57:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 14:57:29 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 14:57:29 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 14:57:29 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 14:57:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fqtlljfg] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:57:43 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fqtlljfg
2026-02-06 14:57:43 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: saurav@gmail.com (ID: 24), Session: fqtlljfg
2026-02-06 14:57:43 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 24 went OFFLINE (last session closed)
2026-02-06 14:57:43 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 24 status to OFFLINE
2026-02-06 14:57:43 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/24 session=null payload={"status":"OFFLINE","timestamp":1770369163919,"userId":24}
2026-02-06 14:57:43 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fqtlljfg
2026-02-06 14:57:43 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770369139977, userId=24, username=saurav@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@579cc8ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fqtlljfg}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@579cc8ee, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fqtlljfg}]
2026-02-06 14:57:52 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:57:53 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [fqtlljfg]
2026-02-06 14:58:14 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:01 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:07 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:08 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:16 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:23 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:26 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:27 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 14:59:28 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 14:59:28 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770369268649
2026-02-06 14:59:28 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 14:59:28 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 14:59:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 14:59:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/557/13gz0ec1/websocket
2026-02-06 14:59:28 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=13gz0ec1]
2026-02-06 14:59:28 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 13gz0ec1
2026-02-06 14:59:28 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 13gz0ec1
2026-02-06 14:59:28 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: saurav@gmail.com - Session: 13gz0ec1
2026-02-06 14:59:28 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: saurav@gmail.com
2026-02-06 14:59:28 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: saurav@gmail.com
2026-02-06 14:59:28 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 14:59:28 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: saurav@gmail.com (ID: 24), Session: 13gz0ec1
2026-02-06 14:59:28 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 13gz0ec1
2026-02-06 14:59:28 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=saurav@gmail.com session=13gz0ec1
2026-02-06 14:59:28 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjQsInN1YiI6InNhdXJhdkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjkxNzAsImV4cCI6MTc3MDM3Mjc3MH0.nnU11p9GqbBFvPKkgfCQUapfOgB0Q4670_W7wMKvyKE], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770369268712, userId=24, username=saurav@gmail.com}, simpHeartbeat=[J@2e38244d, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@20ffcffa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=13gz0ec1}], simpHeartbeat=[J@56e097fb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@20ffcffa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=13gz0ec1}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 14:59:28 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 14:59:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 14:59:28 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user13gz0ec1 subscriptionId=sub-0 session=13gz0ec1 user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:59:28 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user13gz0ec1 subscriptionId=sub-1 session=13gz0ec1 user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 14:59:28 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 14:59:29 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=13gz0ec1
2026-02-06 14:59:29 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=13gz0ec1
2026-02-06 14:59:29 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=13gz0ec1
2026-02-06 14:59:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=13gz0ec1] closed with CloseStatus[code=1000, reason=null]
2026-02-06 14:59:29 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 13gz0ec1
2026-02-06 14:59:29 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: saurav@gmail.com (ID: 24), Session: 13gz0ec1
2026-02-06 14:59:29 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 24 went OFFLINE (last session closed)
2026-02-06 14:59:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 24 status to OFFLINE
2026-02-06 14:59:29 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/24 session=null payload={"status":"OFFLINE","timestamp":1770369269678,"userId":24}
2026-02-06 14:59:29 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=13gz0ec1
2026-02-06 14:59:29 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770369268712, userId=24, username=saurav@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@20ffcffa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=13gz0ec1}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@20ffcffa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=13gz0ec1}]
2026-02-06 14:59:29 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:32 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:38 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [13gz0ec1]
2026-02-06 14:59:39 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:46 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:51 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:52 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:52 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 14:59:52 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 15:00:01 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 15:00:38 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 15:00:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 15:00:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 15:00:38 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770369338443
2026-02-06 15:00:38 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 15:00:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 15:00:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/877/xlrgwo4t/websocket
2026-02-06 15:00:38 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xlrgwo4t]
2026-02-06 15:00:38 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: xlrgwo4t
2026-02-06 15:00:38 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: xlrgwo4t
2026-02-06 15:00:38 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: saurav@gmail.com - Session: xlrgwo4t
2026-02-06 15:00:38 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 15:00:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 15:00:38 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 15:00:38 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: saurav@gmail.com
2026-02-06 15:00:38 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: saurav@gmail.com
2026-02-06 15:00:38 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 15:00:38 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: saurav@gmail.com (ID: 24), Session: xlrgwo4t
2026-02-06 15:00:38 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=saurav@gmail.com session=xlrgwo4t
2026-02-06 15:00:38 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: xlrgwo4t
2026-02-06 15:00:38 [clientOutboundChannel-9] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjQsInN1YiI6InNhdXJhdkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjkzMzYsImV4cCI6MTc3MDM3MjkzNn0.V_J42tt2-Ord0FbnKlV5QdOqFfxPSezwjGjkW0ahvKc], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770369338518, userId=24, username=saurav@gmail.com}, simpHeartbeat=[J@1eba0e05, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@107df3a2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xlrgwo4t}], simpHeartbeat=[J@56e097fb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@107df3a2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xlrgwo4t}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 15:00:38 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxlrgwo4t subscriptionId=sub-0 session=xlrgwo4t user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 15:00:38 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxlrgwo4t subscriptionId=sub-1 session=xlrgwo4t user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 15:00:39 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=xlrgwo4t
2026-02-06 15:00:39 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=xlrgwo4t
2026-02-06 15:00:39 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=xlrgwo4t
2026-02-06 15:00:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xlrgwo4t] closed with CloseStatus[code=1000, reason=null]
2026-02-06 15:00:39 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xlrgwo4t
2026-02-06 15:00:39 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: saurav@gmail.com (ID: 24), Session: xlrgwo4t
2026-02-06 15:00:39 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 24 went OFFLINE (last session closed)
2026-02-06 15:00:39 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 24 status to OFFLINE
2026-02-06 15:00:39 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/24 session=null payload={"status":"OFFLINE","timestamp":1770369339281,"userId":24}
2026-02-06 15:00:39 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xlrgwo4t
2026-02-06 15:00:39 [clientOutboundChannel-11] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770369338518, userId=24, username=saurav@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@107df3a2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xlrgwo4t}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@107df3a2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xlrgwo4t}]
2026-02-06 15:00:39 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=6, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=2
2026-02-06 15:00:48 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xlrgwo4t]
2026-02-06 15:00:59 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Activated booking ID: 49
2026-02-06 15:00:59 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 1, Completed: 0
2026-02-06 15:01:20 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 15:19:23 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 31 initiating payment for reservation 51
2026-02-06 15:19:23 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #51 current status: RESERVED (host: 23)
2026-02-06 15:19:23 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment #27 initiated for booking #51
2026-02-06 15:19:23 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #51 status: RESERVED  PAYMENT_PENDING (host: 23)
2026-02-06 15:19:23 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment amount: NPR 76.86
2026-02-06 15:20:29 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Sent expiry warning for reservation ID: 51
2026-02-06 15:20:59 [pool-2-thread-1] INFO  c.e.e.s.ReservationExpiryScheduler - Sent expiry warning for reservation ID: 51
2026-02-06 15:23:59 [MessageBroker-5] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(3)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 99], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 11], sockJsScheduler[pool size = 16, active threads = 1, queued tasks = 1, completed tasks = 369]
2026-02-06 15:25:29 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 15:25:58 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 15:25:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 15:25:58 [http-nio-8080-exec-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770370858320
2026-02-06 15:25:58 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 15:25:58 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 15:25:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 15:25:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/890/ovop4uty/websocket
2026-02-06 15:25:58 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ovop4uty]
2026-02-06 15:25:58 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ovop4uty
2026-02-06 15:25:58 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ovop4uty
2026-02-06 15:25:58 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: ovop4uty
2026-02-06 15:25:58 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 15:25:58 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 15:25:58 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 15:25:58 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: ovop4uty
2026-02-06 15:25:58 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=ovop4uty
2026-02-06 15:25:58 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ovop4uty
2026-02-06 15:25:58 [clientOutboundChannel-12] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjkzNjgsImV4cCI6MTc3MDM3Mjk2OH0._SBvYzy2i26Z6Mi7sj1oHwe9LoNUZYfJtlJnn9ktmjQ], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770370858421, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@3c2b5ff7, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32eca602, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ovop4uty}], simpHeartbeat=[J@56e097fb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32eca602, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ovop4uty}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 15:25:58 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 15:25:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 15:25:58 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 15:25:58 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userovop4uty subscriptionId=sub-0 session=ovop4uty user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 15:25:58 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userovop4uty subscriptionId=sub-1 session=ovop4uty user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 15:25:58 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 23, type: USER_HOST
2026-02-06 15:25:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 23, type: USER_HOST
2026-02-06 15:25:58 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation already exists, skipping initial message
2026-02-06 15:25:58 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/16 id=sub-2 session=ovop4uty
2026-02-06 15:25:58 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/16 id=sub-3 session=ovop4uty
2026-02-06 15:25:58 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 16 as read by user 31
2026-02-06 15:25:58 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 16 by user 31
2026-02-06 15:25:58 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 16 as read by user 31
2026-02-06 15:25:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 16 by user 31
2026-02-06 15:25:58 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 16
2026-02-06 15:25:58 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 16
2026-02-06 15:25:58 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/16 session=null payload={"conversationId":16,"readBy":31,"count":0}
2026-02-06 15:26:03 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 15:26:03 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 15:26:03 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 15:26:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ovop4uty] closed with CloseStatus[code=1000, reason=null]
2026-02-06 15:26:09 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ovop4uty
2026-02-06 15:26:09 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: ovop4uty
2026-02-06 15:26:09 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 15:26:09 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 15:26:09 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770370869908,"userId":31}
2026-02-06 15:26:09 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ovop4uty
2026-02-06 15:26:09 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770370858421, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32eca602, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ovop4uty}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32eca602, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=ovop4uty}]
2026-02-06 15:26:12 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 15:26:18 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ovop4uty]
2026-02-06 15:26:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 15:26:21 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770370881912
2026-02-06 15:26:21 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 15:26:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 15:26:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@70b6cc18
2026-02-06 15:26:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/717/pd2r4c3l/websocket
2026-02-06 15:26:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 15:26:21 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=pd2r4c3l]
2026-02-06 15:26:21 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: pd2r4c3l
2026-02-06 15:26:21 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: pd2r4c3l
2026-02-06 15:26:21 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: pd2r4c3l
2026-02-06 15:26:22 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 15:26:22 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 15:26:22 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 15:26:22 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: pd2r4c3l
2026-02-06 15:26:22 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=pd2r4c3l
2026-02-06 15:26:22 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: pd2r4c3l
2026-02-06 15:26:22 [clientOutboundChannel-14] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNjkzNjgsImV4cCI6MTc3MDM3Mjk2OH0._SBvYzy2i26Z6Mi7sj1oHwe9LoNUZYfJtlJnn9ktmjQ], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770370882016, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@3f4cd008, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@318b3991, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=pd2r4c3l}], simpHeartbeat=[J@56e097fb, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@318b3991, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=pd2r4c3l}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 15:26:22 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 15:26:22 [clientInboundChannel-20] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userpd2r4c3l subscriptionId=sub-0 session=pd2r4c3l user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 15:26:22 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 15:26:22 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userpd2r4c3l subscriptionId=sub-1 session=pd2r4c3l user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 15:26:22 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 15:26:22 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  User 31 initiating conversation with user 23, type: USER_HOST
2026-02-06 15:26:22 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Initiating conversation: user 31  user 23, type: USER_HOST
2026-02-06 15:26:22 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Conversation already exists, skipping initial message
2026-02-06 15:26:22 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/16 id=sub-2 session=pd2r4c3l
2026-02-06 15:26:22 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/16 id=sub-3 session=pd2r4c3l
2026-02-06 15:26:22 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Marking conversation 16 as read by user 31
2026-02-06 15:26:22 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 16 by user 31
2026-02-06 15:26:22 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 16 as read by user 31
2026-02-06 15:26:22 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 16 by user 31
2026-02-06 15:26:22 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 16
2026-02-06 15:26:22 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 16
2026-02-06 15:26:22 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/16 session=null payload={"conversationId":16,"readBy":31,"count":0}
2026-02-06 15:26:26 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 15:26:26 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 15:26:26 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 15:26:28 [clientInboundChannel-17] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=pd2r4c3l
2026-02-06 15:26:28 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/15 id=sub-4 session=pd2r4c3l
2026-02-06 15:26:28 [clientInboundChannel-19] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/15 id=sub-5 session=pd2r4c3l
2026-02-06 15:26:28 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 15 as read by user 31
2026-02-06 15:26:28 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 15 by user 31
2026-02-06 15:26:28 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 15 as read by user 31
2026-02-06 15:26:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 15 by user 31
2026-02-06 15:26:28 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 15
2026-02-06 15:26:28 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 15
2026-02-06 15:26:28 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/15 session=null payload={"conversationId":15,"readBy":31,"count":0}
2026-02-06 15:26:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=pd2r4c3l] closed with CloseStatus[code=1000, reason=null]
2026-02-06 15:26:39 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session pd2r4c3l
2026-02-06 15:26:39 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: pd2r4c3l
2026-02-06 15:26:39 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 15:26:39 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 15:26:39 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770370899799,"userId":31}
2026-02-06 15:26:39 [clientInboundChannel-18] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=pd2r4c3l
2026-02-06 15:26:39 [clientOutboundChannel-15] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770370882016, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@318b3991, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=pd2r4c3l}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@318b3991, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=pd2r4c3l}]
2026-02-06 15:26:48 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [pd2r4c3l]
2026-02-06 15:27:19 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 15:27:19 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 15:27:20 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 15:27:20 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 15:27:20 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 15:27:20 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@223c7a32]]
2026-02-06 15:27:20 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@223c7a32]
2026-02-06 15:27:20 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@223c7a32]
2026-02-06 15:27:20 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 15:27:20 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 15:27:20 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 15:27:20 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 15:27:20 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 15:27:20 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 17:53:12 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 8008 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 17:53:12 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 17:53:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 17:53:12 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 17:53:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 17:53:15 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 660 ms. Found 9 JPA repository interfaces.
2026-02-06 17:53:17 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 17:53:17 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 17:53:17 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 17:53:17 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 17:53:17 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5082 ms
2026-02-06 17:53:18 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 17:53:18 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 17:53:18 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 17:53:19 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 17:53:19 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 17:53:20 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@265329d5
2026-02-06 17:53:20 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 17:53:21 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 17:53:21 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 17:53:23 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 17:53:23 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 17:53:24 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 17:53:28 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 17:53:28 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 17:53:28 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 17:53:28 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 17:53:29 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 17:53:29 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 17:53:29 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 17:53:29 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 17:53:29 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 17:53:29 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@536231a6]
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@536231a6]
2026-02-06 17:53:29 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@536231a6]]
2026-02-06 17:53:29 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 17:53:29 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 17:53:29 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 17:53:29 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 17:53:29 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 17.997 seconds (process running for 18.861)
2026-02-06 17:53:30 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Completed booking ID: 49
2026-02-06 17:53:30 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Activated booking ID: 50
2026-02-06 17:53:30 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 1, Completed: 1
2026-02-06 17:53:56 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 17:53:56 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 17:53:56 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2026-02-06 17:54:02 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 17:54:29 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 17:55:27 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 17:55:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4056f3a2
2026-02-06 17:55:27 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 17:55:27 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770379827007
2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4056f3a2
2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/126/xtuehcvs/websocket
2026-02-06 17:55:27 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 17:55:27 [http-nio-8080-exec-1] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xtuehcvs]
2026-02-06 17:55:27 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 31 (page 0, size 50)
2026-02-06 17:55:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 31
2026-02-06 17:55:27 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 31
2026-02-06 17:55:27 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: xtuehcvs
2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: xtuehcvs
2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: nayanchy2004@gmail.com - Session: xtuehcvs
2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: nayanchy2004@gmail.com
2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: nayanchy2004@gmail.com
2026-02-06 17:55:27 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 17:55:27 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: nayanchy2004@gmail.com (ID: 31), Session: xtuehcvs
2026-02-06 17:55:27 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=nayanchy2004@gmail.com session=xtuehcvs
2026-02-06 17:55:27 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: xtuehcvs
2026-02-06 17:55:27 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6MzEsInN1YiI6Im5heWFuY2h5MjAwNEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzNzk3MzYsImV4cCI6MTc3MDM4MzMzNn0.XB2e1fWVANDX7gmd5N7_NahxqdhC6Hdrwp5zqrV41Bs], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770379827256, userId=31, username=nayanchy2004@gmail.com}, simpHeartbeat=[J@6d40652a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4f4e4595, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xtuehcvs}], simpHeartbeat=[J@798f8a03, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4f4e4595, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xtuehcvs}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 17:55:27 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxtuehcvs subscriptionId=sub-0 session=xtuehcvs user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 17:55:27 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxtuehcvs subscriptionId=sub-1 session=xtuehcvs user=nayanchy2004@gmail.com attributes[4] payload=byte[0]
2026-02-06 17:55:36 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/10 id=sub-2 session=xtuehcvs
2026-02-06 17:55:36 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/10 id=sub-3 session=xtuehcvs
2026-02-06 17:55:36 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Marking conversation 10 as read by user 31
2026-02-06 17:55:36 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 10 by user 31
2026-02-06 17:55:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 10 as read by user 31
2026-02-06 17:55:36 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 10 by user 31
2026-02-06 17:55:36 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 10
2026-02-06 17:55:36 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 10
2026-02-06 17:55:36 [http-nio-8080-exec-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/10 session=null payload={"conversationId":10,"readBy":31,"count":0}
2026-02-06 17:55:40 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=xtuehcvs
2026-02-06 17:55:40 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/15 id=sub-4 session=xtuehcvs
2026-02-06 17:55:40 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/15 id=sub-5 session=xtuehcvs
2026-02-06 17:55:40 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 15 by user 31
2026-02-06 17:55:40 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 15 as read by user 31
2026-02-06 17:55:40 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 15 by user 31
2026-02-06 17:55:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 15 as read by user 31
2026-02-06 17:55:40 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 5 messages in conversation 15
2026-02-06 17:55:40 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 15
2026-02-06 17:55:40 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/15 session=null payload={"conversationId":15,"readBy":31,"count":0}
2026-02-06 17:55:43 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=xtuehcvs
2026-02-06 17:55:43 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/16 id=sub-6 session=xtuehcvs
2026-02-06 17:55:43 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/16 id=sub-7 session=xtuehcvs
2026-02-06 17:55:43 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 16 by user 31
2026-02-06 17:55:43 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Marking conversation 16 as read by user 31
2026-02-06 17:55:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 16 as read by user 31
2026-02-06 17:55:43 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 16 by user 31
2026-02-06 17:55:43 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 16
2026-02-06 17:55:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 16
2026-02-06 17:55:43 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/16 session=null payload={"conversationId":16,"readBy":31,"count":0}
2026-02-06 17:55:47 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=xtuehcvs
2026-02-06 17:55:47 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=xtuehcvs
2026-02-06 17:55:47 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=xtuehcvs
2026-02-06 17:55:47 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=xtuehcvs
2026-02-06 17:55:47 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-6 session=xtuehcvs
2026-02-06 17:55:47 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-7 session=xtuehcvs
2026-02-06 17:55:47 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-8 session=xtuehcvs
2026-02-06 17:55:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xtuehcvs] closed with CloseStatus[code=1000, reason=null]
2026-02-06 17:55:47 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xtuehcvs
2026-02-06 17:55:47 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: nayanchy2004@gmail.com (ID: 31), Session: xtuehcvs
2026-02-06 17:55:47 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 31 went OFFLINE (last session closed)
2026-02-06 17:55:47 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 31 status to OFFLINE
2026-02-06 17:55:47 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/31 session=null payload={"status":"OFFLINE","timestamp":1770379847311,"userId":31}
2026-02-06 17:55:47 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xtuehcvs
2026-02-06 17:55:47 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770379827256, userId=31, username=nayanchy2004@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4f4e4595, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xtuehcvs}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@4f4e4595, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=xtuehcvs}]
2026-02-06 17:55:53 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 17:55:57 [MessageBroker-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xtuehcvs]
2026-02-06 17:57:05 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 17:57:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4056f3a2
2026-02-06 17:57:05 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770379925491
2026-02-06 17:57:05 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 17:57:05 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 17:57:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4056f3a2
2026-02-06 17:57:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/283/x3le5une/websocket
2026-02-06 17:57:05 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=x3le5une]
2026-02-06 17:57:05 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: x3le5une
2026-02-06 17:57:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: x3le5une
2026-02-06 17:57:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: admin123@gmail.com - Session: x3le5une
2026-02-06 17:57:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: admin123@gmail.com
2026-02-06 17:57:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: admin123@gmail.com
2026-02-06 17:57:05 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 17:57:05 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: admin123@gmail.com (ID: 1), Session: x3le5une
2026-02-06 17:57:05 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=admin123@gmail.com session=x3le5une
2026-02-06 17:57:05 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: x3le5une
2026-02-06 17:57:05 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiQURNSU4iLCJ1c2VySWQiOjEsInN1YiI6ImFkbWluMTIzQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM3OTkwMCwiZXhwIjoxNzcwMzgzNTAwfQ.7v6NItBrNpXY58MM1YQUtI6bzXSuoy6Ibw9MjWap948], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770379925545, userId=1, username=admin123@gmail.com}, simpHeartbeat=[J@324722d3, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3c80caeb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=x3le5une}], simpHeartbeat=[J@798f8a03, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3c80caeb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=x3le5une}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 17:57:05 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 1 (page 0, size 50)
2026-02-06 17:57:05 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userx3le5une subscriptionId=sub-0 session=x3le5une user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 17:57:05 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 1
2026-02-06 17:57:05 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userx3le5une subscriptionId=sub-1 session=x3le5une user=admin123@gmail.com attributes[4] payload=byte[0]
2026-02-06 17:57:05 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 4 conversations for user 1
2026-02-06 17:57:15 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=x3le5une
2026-02-06 17:57:15 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=x3le5une
2026-02-06 17:57:15 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=x3le5une
2026-02-06 17:57:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=x3le5une] closed with CloseStatus[code=1000, reason=null]
2026-02-06 17:57:15 [http-nio-8080-exec-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session x3le5une
2026-02-06 17:57:15 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: admin123@gmail.com (ID: 1), Session: x3le5une
2026-02-06 17:57:15 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  User 1 went OFFLINE (last session closed)
2026-02-06 17:57:15 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 1 status to OFFLINE
2026-02-06 17:57:15 [http-nio-8080-exec-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/1 session=null payload={"status":"OFFLINE","timestamp":1770379935970,"userId":1}
2026-02-06 17:57:15 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=x3le5une
2026-02-06 17:57:15 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770379925545, userId=1, username=admin123@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3c80caeb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=x3le5une}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@3c80caeb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_ADMIN]], simpSessionId=x3le5une}]
2026-02-06 17:57:22 [MessageBroker-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [x3le5une]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 17:57:39 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 17:57:39 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 17:57:39 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@536231a6]]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@536231a6]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@536231a6]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 17:57:39 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 17:57:39 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 17:57:39 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 17:57:39 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 20:17:20 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 26184 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 20:17:20 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 20:17:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 20:17:21 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 20:17:23 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 20:17:24 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 352 ms. Found 10 JPA repository interfaces.
2026-02-06 20:17:26 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 20:17:26 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 20:17:26 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 20:17:26 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 20:17:26 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5743 ms
2026-02-06 20:17:27 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 20:17:27 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 20:17:27 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 20:17:28 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 20:17:28 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 20:17:29 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@671dc8ab
2026-02-06 20:17:29 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 20:17:29 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 20:17:29 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 20:17:32 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 20:17:33 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 20:17:34 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 20:17:40 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 20:17:40 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 20:17:40 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 20:17:40 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 20:17:41 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 20:17:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 20:17:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.RatingController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 20:17:41 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 20:17:41 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 20:17:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@70758be7]
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@70758be7]
2026-02-06 20:17:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@70758be7]]
2026-02-06 20:17:41 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 20:17:41 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 20:17:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 20:17:41 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 20:17:41 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 22.117 seconds (process running for 22.918)
2026-02-06 20:17:42 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Completed booking ID: 50
2026-02-06 20:17:42 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Activated booking ID: 48
2026-02-06 20:17:42 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 1, Completed: 1
2026-02-06 20:18:41 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 20:23:14 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 20:23:14 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 20:23:14 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 7 ms
2026-02-06 20:23:16 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 20:23:16 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 20:23:16 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 20:23:16 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 20:23:16 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 20:23:16 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 20:23:16 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 20:23:16 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 20:23:16 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 20:23:16 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 20:23:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@60a79f97
2026-02-06 20:23:24 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770388704297
2026-02-06 20:23:24 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 20:23:24 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@60a79f97
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/505/luzscyrx/websocket
2026-02-06 20:23:24 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=luzscyrx]
2026-02-06 20:23:24 [http-nio-8080-exec-9] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 20:23:24 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: luzscyrx
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: luzscyrx
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: luzscyrx
2026-02-06 20:23:24 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 20:23:24 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 20:23:24 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 20:23:24 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 20:23:24 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: luzscyrx
2026-02-06 20:23:24 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: luzscyrx
2026-02-06 20:23:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=luzscyrx
2026-02-06 20:23:24 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM4ODY5NCwiZXhwIjoxNzcwMzkyMjk0fQ.q8_lkHF-Y358aH7a38bu6JM12h67eKoSRy6mbWAxy-E], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770388704871, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@5486c440, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@12ea5faa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=luzscyrx}], simpHeartbeat=[J@44c3e0e0, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@12ea5faa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=luzscyrx}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 20:23:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userluzscyrx subscriptionId=sub-0 session=luzscyrx user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 20:23:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userluzscyrx subscriptionId=sub-1 session=luzscyrx user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 20:23:26 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=luzscyrx
2026-02-06 20:23:26 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=luzscyrx
2026-02-06 20:23:26 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=luzscyrx
2026-02-06 20:23:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=luzscyrx] closed with CloseStatus[code=1000, reason=null]
2026-02-06 20:23:26 [http-nio-8080-exec-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session luzscyrx
2026-02-06 20:23:26 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: luzscyrx
2026-02-06 20:23:26 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 20:23:26 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 20:23:26 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"status":"OFFLINE","timestamp":1770388706642,"userId":6}
2026-02-06 20:23:26 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=luzscyrx
2026-02-06 20:23:26 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770388704871, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@12ea5faa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=luzscyrx}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@12ea5faa, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=luzscyrx}]
2026-02-06 20:23:26 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 20:23:26 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 20:23:26 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 20:23:26 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 20:23:26 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 20:23:26 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 20:23:26 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 20:23:26 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 20:23:26 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 20:23:26 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 20:23:28 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 20:23:34 [MessageBroker-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [luzscyrx]
2026-02-06 20:23:55 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 20:24:06 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 20:24:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 20:24:06 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@70758be7]]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@70758be7]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@70758be7]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 20:24:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 20:24:06 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 20:24:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 20:24:06 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 21:23:21 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 11584 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 21:23:21 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 21:23:22 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 21:23:22 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 21:23:23 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 21:23:23 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 105 ms. Found 10 JPA repository interfaces.
2026-02-06 21:23:24 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 21:23:24 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 21:23:24 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 21:23:24 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 21:23:24 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2405 ms
2026-02-06 21:23:24 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 21:23:24 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 21:23:24 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 21:23:25 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 21:23:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 21:23:25 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@a8e6e52
2026-02-06 21:23:25 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 21:23:25 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 21:23:25 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 21:23:26 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 21:23:27 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 21:23:27 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 21:23:31 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 21:23:31 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 21:23:31 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 21:23:32 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 21:23:32 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 21:23:32 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 21:23:32 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 21:23:32 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.RatingController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 21:23:33 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 21:23:33 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 21:23:33 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@47b93003]
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@47b93003]
2026-02-06 21:23:33 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@47b93003]]
2026-02-06 21:23:33 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 21:23:33 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 21:23:33 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 21:23:33 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 21:23:33 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 12.349 seconds (process running for 13.554)
2026-02-06 21:23:33 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Completed booking ID: 48
2026-02-06 21:23:33 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 0, Completed: 1
2026-02-06 21:24:33 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 21:26:40 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 21:26:40 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 21:26:40 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2026-02-06 21:26:43 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:26:43 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:26:43 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:26:43 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 21:26:43 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:26:43 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:26:43 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:26:43 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:26:43 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:26:43 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:26:50 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:26:58 [http-nio-8080-exec-1] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 21:28:20 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 6 initiating payment for reservation 52
2026-02-06 21:28:20 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #52 current status: RESERVED (host: 24)
2026-02-06 21:28:20 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment #28 initiated for booking #52
2026-02-06 21:28:20 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #52 status: RESERVED  PAYMENT_PENDING (host: 24)
2026-02-06 21:28:20 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment amount: NPR 38.12
2026-02-06 21:28:22 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  User 6 processing payment 28
2026-02-06 21:28:24 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Payment 28 successful for booking #52
2026-02-06 21:28:24 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Booking #52 status: PAYMENT_PENDING  CONFIRMED (host: 24)
2026-02-06 21:28:24 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Transaction ID: TXN-D3418436-6ACC-4393
2026-02-06 21:28:24 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.PaymentServiceImpl -  Notifications sent to user 6 and host 24
2026-02-06 21:28:45 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.EmailServiceImpl - Receipt email sent to ram@gmail.com
2026-02-06 21:28:56 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.EmailServiceImpl - Booking confirmation email sent to ram@gmail.com
2026-02-06 21:28:59 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:28:59 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:28:59 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:28:59 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 21:28:59 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:28:59 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:28:59 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:28:59 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:28:59 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:28:59 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:29:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:29:10 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:29:10 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:29:10 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770392650840
2026-02-06 21:29:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:29:10 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:29:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/226/iw5mafyf/websocket
2026-02-06 21:29:10 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:29:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:29:10 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:29:10 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=iw5mafyf]
2026-02-06 21:29:11 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: iw5mafyf
2026-02-06 21:29:11 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: iw5mafyf
2026-02-06 21:29:11 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: iw5mafyf
2026-02-06 21:29:11 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 21:29:11 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 21:29:11 [http-nio-8080-exec-10] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:29:11 [http-nio-8080-exec-10] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: iw5mafyf
2026-02-06 21:29:11 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=iw5mafyf
2026-02-06 21:29:11 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: iw5mafyf
2026-02-06 21:29:11 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM5MjUwMCwiZXhwIjoxNzcwMzk2MTAwfQ.BEa7kKXAHDk8o_HhKCa18ODlz4T_iWRSbAx8gQ-59Dc], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770392651078, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@46c6b01b, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1fdba917, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iw5mafyf}], simpHeartbeat=[J@7039c46a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1fdba917, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iw5mafyf}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:29:11 [clientInboundChannel-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useriw5mafyf subscriptionId=sub-0 session=iw5mafyf user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:29:11 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useriw5mafyf subscriptionId=sub-1 session=iw5mafyf user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:29:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=iw5mafyf
2026-02-06 21:29:24 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=iw5mafyf
2026-02-06 21:29:24 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=iw5mafyf
2026-02-06 21:29:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=iw5mafyf] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:29:24 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session iw5mafyf
2026-02-06 21:29:24 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: iw5mafyf
2026-02-06 21:29:24 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 21:29:24 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 21:29:24 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"userId":6,"timestamp":1770392664656,"status":"OFFLINE"}
2026-02-06 21:29:24 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=iw5mafyf
2026-02-06 21:29:24 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770392651078, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1fdba917, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iw5mafyf}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1fdba917, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=iw5mafyf}]
2026-02-06 21:29:25 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:29:25 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:29:25 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 21:29:25 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:29:25 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:29:25 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:29:25 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:29:25 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:29:25 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:29:25 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:29:30 [MessageBroker-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [iw5mafyf]
2026-02-06 21:29:32 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:29:32 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:29:32 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:29:32 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:29:32 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 21:29:32 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:29:32 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:29:32 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:29:32 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:29:32 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:29:49 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=7, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=1
2026-02-06 21:30:56 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:31:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:31:12 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:31:12 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770392772002
2026-02-06 21:31:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:31:12 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:31:12 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:31:12 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/732/n000wqdw/websocket
2026-02-06 21:31:12 [http-nio-8080-exec-11] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=n000wqdw]
2026-02-06 21:31:12 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: n000wqdw
2026-02-06 21:31:12 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: n000wqdw
2026-02-06 21:31:12 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: n000wqdw
2026-02-06 21:31:12 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 21:31:12 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 21:31:12 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:31:12 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: n000wqdw
2026-02-06 21:31:12 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=n000wqdw
2026-02-06 21:31:12 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: n000wqdw
2026-02-06 21:31:12 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM5Mjc1MywiZXhwIjoxNzcwMzk2MzUzfQ.1C7UPY2Riqdgedv73D7MdjDe4i8ASIY7zZQfuVpxL3M], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770392772056, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@364cd09e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@388b3827, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n000wqdw}], simpHeartbeat=[J@7039c46a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@388b3827, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n000wqdw}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:31:12 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:31:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:31:12 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usern000wqdw subscriptionId=sub-0 session=n000wqdw user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:31:12 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usern000wqdw subscriptionId=sub-1 session=n000wqdw user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:31:12 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:31:20 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-2 session=n000wqdw
2026-02-06 21:31:20 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-3 session=n000wqdw
2026-02-06 21:31:20 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 6
2026-02-06 21:31:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 6
2026-02-06 21:31:20 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 6
2026-02-06 21:31:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 6
2026-02-06 21:31:20 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 9
2026-02-06 21:31:20 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 21:31:20 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":6,"count":0}
2026-02-06 21:31:26 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=n000wqdw
2026-02-06 21:31:26 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=n000wqdw
2026-02-06 21:31:26 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=n000wqdw
2026-02-06 21:31:26 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=n000wqdw
2026-02-06 21:31:26 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=n000wqdw
2026-02-06 21:31:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=n000wqdw] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:31:26 [http-nio-8080-exec-7] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session n000wqdw
2026-02-06 21:31:26 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: n000wqdw
2026-02-06 21:31:26 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 21:31:26 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 21:31:26 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"userId":6,"timestamp":1770392786895,"status":"OFFLINE"}
2026-02-06 21:31:26 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=n000wqdw
2026-02-06 21:31:26 [clientOutboundChannel-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770392772056, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@388b3827, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n000wqdw}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@388b3827, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=n000wqdw}]
2026-02-06 21:31:27 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 21:31:27 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:31:27 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:31:27 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:31:27 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:31:27 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:31:27 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:31:27 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:31:27 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:31:27 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:31:35 [MessageBroker-12] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [n000wqdw]
2026-02-06 21:32:10 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:32:12 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:32:12 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:32:12 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:32:12 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 21:32:12 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:32:12 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:32:12 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:32:12 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:32:12 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:32:12 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:32:37 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 43]
2026-02-06 21:32:37 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:32:37 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:32:37 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:32:37 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:32:37 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:32:37 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:32:37 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:32:37 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:32:37 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:33:10 [http-nio-8080-exec-11] INFO  c.e.e.controller.RatingController - POST /api/ratings - Creating rating for booking: 43
2026-02-06 21:33:10 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.RatingServiceImpl - Creating rating for booking ID: 43 by user: ram@gmail.com
2026-02-06 21:33:10 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.RatingServiceImpl - Rating created successfully with ID: 1
2026-02-06 21:33:10 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.RatingServiceImpl - Updated charger 28 average rating to: 5.00
2026-02-06 21:33:18 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:33:18 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:33:18 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:33:18 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:33:18 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:33:18 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:33:18 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:33:18 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:33:18 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:33:57 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:34:22 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 41]
2026-02-06 21:34:22 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 49]
2026-02-06 21:34:22 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 36]
2026-02-06 21:34:22 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 27]
2026-02-06 21:34:22 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 25]
2026-02-06 21:34:22 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 26]
2026-02-06 21:34:22 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 20]
2026-02-06 21:34:22 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 16]
2026-02-06 21:35:07 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 48]
2026-02-06 21:35:07 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 46]
2026-02-06 21:35:07 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 42]
2026-02-06 21:35:07 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 39]
2026-02-06 21:36:57 [http-nio-8080-exec-1] INFO  c.e.e.controller.RatingController - POST /api/ratings - Creating rating for booking: 42
2026-02-06 21:36:57 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.RatingServiceImpl - Creating rating for booking ID: 42 by user: ritulsingh079@gmail.com
2026-02-06 21:36:57 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.RatingServiceImpl - Rating created successfully with ID: 2
2026-02-06 21:36:57 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.RatingServiceImpl - Updated charger 28 average rating to: 4.50
2026-02-06 21:37:02 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:37:40 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:38:01 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:01 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:02 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:03 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:04 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:05 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:06 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:07 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:08 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:09 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:10 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:11 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:12 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:13 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:14 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:15 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:16 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:17 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:18 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:19 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:20 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:27 [http-nio-8080-exec-11] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 21:38:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:38:27 [http-nio-8080-exec-11] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 21:38:27 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770393207240
2026-02-06 21:38:27 [http-nio-8080-exec-11] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 23
2026-02-06 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/607/kdakrh4s/websocket
2026-02-06 21:38:27 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=kdakrh4s]
2026-02-06 21:38:27 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: kdakrh4s
2026-02-06 21:38:27 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: kdakrh4s
2026-02-06 21:38:27 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: kdakrh4s
2026-02-06 21:38:27 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 21:38:27 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 21:38:27 [http-nio-8080-exec-2] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:38:27 [http-nio-8080-exec-2] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: kdakrh4s
2026-02-06 21:38:27 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: kdakrh4s
2026-02-06 21:38:27 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=kdakrh4s
2026-02-06 21:38:27 [clientOutboundChannel-7] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTMxNzUsImV4cCI6MTc3MDM5Njc3NX0.T7X0MZ1GBg6EV_ueotAAop88uwpJXJh4_lZsdwTT_lk], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770393207293, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@7b93c1e9, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@755420eb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=kdakrh4s}], simpHeartbeat=[J@7039c46a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@755420eb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=kdakrh4s}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:38:27 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 21:38:27 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 21:38:27 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userkdakrh4s subscriptionId=sub-0 session=kdakrh4s user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:38:27 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userkdakrh4s subscriptionId=sub-1 session=kdakrh4s user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:38:27 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 23
2026-02-06 21:38:34 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=kdakrh4s
2026-02-06 21:38:34 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=kdakrh4s
2026-02-06 21:38:34 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=kdakrh4s
2026-02-06 21:38:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=kdakrh4s] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:38:34 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session kdakrh4s
2026-02-06 21:38:34 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: kdakrh4s
2026-02-06 21:38:34 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 21:38:34 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 21:38:34 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"userId":23,"timestamp":1770393214933,"status":"OFFLINE"}
2026-02-06 21:38:34 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=kdakrh4s
2026-02-06 21:38:34 [clientOutboundChannel-9] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770393207293, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@755420eb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=kdakrh4s}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@755420eb, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=kdakrh4s}]
2026-02-06 21:38:35 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:35 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:36 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:37 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:38 [http-nio-8080-exec-11] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:39 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:40 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:40 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [kdakrh4s]
2026-02-06 21:38:41 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:42 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:43 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:38:50 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 33]
2026-02-06 21:38:50 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:38:50 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:38:50 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:38:50 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:38:50 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:38:50 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:38:50 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:38:50 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:39:27 [http-nio-8080-exec-4] INFO  c.e.e.controller.RatingController - POST /api/ratings - Creating rating for booking: 33
2026-02-06 21:39:27 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.RatingServiceImpl - Creating rating for booking ID: 33 by user: ram@gmail.com
2026-02-06 21:39:27 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.RatingServiceImpl - Rating created successfully with ID: 3
2026-02-06 21:39:27 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.RatingServiceImpl - Updated charger 28 average rating to: 4.67
2026-02-06 21:39:37 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:40:33 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:40:40 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:40:40 [http-nio-8080-exec-11] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:40:40 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:40:40 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:40:40 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:40:40 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:40:40 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:40:40 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:40:41 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:40:41 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:40:41 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770393341352
2026-02-06 21:40:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:40:41 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/572/0hpaseyj/websocket
2026-02-06 21:40:41 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=0hpaseyj]
2026-02-06 21:40:41 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 0hpaseyj
2026-02-06 21:40:41 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 0hpaseyj
2026-02-06 21:40:41 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ram@gmail.com - Session: 0hpaseyj
2026-02-06 21:40:41 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ram@gmail.com
2026-02-06 21:40:41 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ram@gmail.com
2026-02-06 21:40:41 [http-nio-8080-exec-8] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:40:41 [http-nio-8080-exec-8] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ram@gmail.com (ID: 6), Session: 0hpaseyj
2026-02-06 21:40:41 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 0hpaseyj
2026-02-06 21:40:41 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ram@gmail.com session=0hpaseyj
2026-02-06 21:40:41 [clientOutboundChannel-10] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiVVNFUiIsInVzZXJJZCI6Niwic3ViIjoicmFtQGdtYWlsLmNvbSIsImlhdCI6MTc3MDM5MzIyOCwiZXhwIjoxNzcwMzk2ODI4fQ.tbsuW_CLm55YprN_N90csVKyC02yWiGJVPmAUzmapj8], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770393341406, userId=6, username=ram@gmail.com}, simpHeartbeat=[J@2791c42, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cbef27d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0hpaseyj}], simpHeartbeat=[J@7039c46a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cbef27d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0hpaseyj}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:40:41 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:40:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:40:41 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user0hpaseyj subscriptionId=sub-0 session=0hpaseyj user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:40:41 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user0hpaseyj subscriptionId=sub-1 session=0hpaseyj user=ram@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:40:41 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:40:43 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-2 session=0hpaseyj
2026-02-06 21:40:43 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-3 session=0hpaseyj
2026-02-06 21:40:43 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 6
2026-02-06 21:40:43 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 6
2026-02-06 21:40:43 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 6
2026-02-06 21:40:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 6
2026-02-06 21:40:43 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 messages in conversation 9
2026-02-06 21:40:43 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 21:40:43 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":6,"count":0}
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=0hpaseyj, lookupDestination='/chat.typing'
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=0hpaseyj, lookupDestination='/chat.typing'
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=0hpaseyj, lookupDestination='/chat.typing'
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.typing session=0hpaseyj, lookupDestination='/chat.typing'
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendTypingIndicator[2 args]
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":true,"username":"ram@gmail.com","times...(truncated)
2026-02-06 21:40:53 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.sendMessage session=0hpaseyj, lookupDestination='/chat.sendMessage'
2026-02-06 21:40:53 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=0hpaseyj, lookupDestination='/chat.stopTyping'
2026-02-06 21:40:53 [clientInboundChannel-13] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendMessage[2 args]
2026-02-06 21:40:53 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":false,"timestamp":1770393353847}
2026-02-06 21:40:53 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 21:40:53 [clientInboundChannel-16] INFO  c.e.e.controller.ChatController -  WebSocket message from ram@gmail.com (6) to 34
2026-02-06 21:40:53 [clientInboundChannel-16] INFO  c.e.e.s.ChatMessageServiceImpl -  Sending message from user 6 to user 34
2026-02-06 21:40:53 [clientInboundChannel-16] INFO  c.e.e.s.ChatMessageServiceImpl -  Message sent successfully: ID=288
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/messages/9 session=null payload={"id":288,"conversationId":9,"senderId":6,"senderName":"Ram Chaudhary","receiver...(truncated)
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 21:40:53 [clientInboundChannel-16] INFO  c.e.e.controller.ChatController -  Message 288 sent successfully
2026-02-06 21:40:53 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/chat.sendMessage session=0hpaseyj payload={"id":288,"conversationId":9,"senderId":6,"senderName":"Ram Chaudhary","receiver...(truncated)
2026-02-06 21:40:54 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:40:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:40:54 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:40:54 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 6
2026-02-06 21:40:54 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 6
2026-02-06 21:40:54 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 9
2026-02-06 21:40:54 [http-nio-8080-exec-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":6,"count":0}
2026-02-06 21:40:55 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Searching methods to handle SEND /app/chat.stopTyping session=0hpaseyj, lookupDestination='/chat.stopTyping'
2026-02-06 21:40:55 [clientInboundChannel-15] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Invoking ChatController#sendStopTypingIndicator[2 args]
2026-02-06 21:40:55 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/typing/9 session=null payload={"conversationId":9,"userId":6,"isTyping":false,"timestamp":1770393355387}
2026-02-06 21:40:55 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Broadcasting to 1 sessions.
2026-02-06 21:41:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=0hpaseyj] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:41:01 [http-nio-8080-exec-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 0hpaseyj
2026-02-06 21:41:01 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ram@gmail.com (ID: 6), Session: 0hpaseyj
2026-02-06 21:41:01 [http-nio-8080-exec-10] INFO  c.e.e.config.WebSocketEventListener -  User 6 went OFFLINE (last session closed)
2026-02-06 21:41:01 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 6 status to OFFLINE
2026-02-06 21:41:02 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/6 session=null payload={"userId":6,"timestamp":1770393362015,"status":"OFFLINE"}
2026-02-06 21:41:02 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=0hpaseyj
2026-02-06 21:41:02 [clientOutboundChannel-10] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770393341406, userId=6, username=ram@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cbef27d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0hpaseyj}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@cbef27d, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_USER]], simpSessionId=0hpaseyj}]
2026-02-06 21:41:10 [MessageBroker-15] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [0hpaseyj]
2026-02-06 21:41:16 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 21:41:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:41:16 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770393376752
2026-02-06 21:41:16 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 21:41:16 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 34
2026-02-06 21:41:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@6693961a
2026-02-06 21:41:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/174/jj13djqg/websocket
2026-02-06 21:41:16 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=jj13djqg]
2026-02-06 21:41:16 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: jj13djqg
2026-02-06 21:41:16 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: jj13djqg
2026-02-06 21:41:16 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: ganesh@gmail.com - Session: jj13djqg
2026-02-06 21:41:16 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: ganesh@gmail.com
2026-02-06 21:41:16 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: ganesh@gmail.com
2026-02-06 21:41:16 [http-nio-8080-exec-9] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:41:16 [http-nio-8080-exec-9] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: ganesh@gmail.com (ID: 34), Session: jj13djqg
2026-02-06 21:41:16 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=ganesh@gmail.com session=jj13djqg
2026-02-06 21:41:16 [http-nio-8080-exec-9] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: jj13djqg
2026-02-06 21:41:16 [clientOutboundChannel-11] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MzQsInN1YiI6ImdhbmVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTMzNjYsImV4cCI6MTc3MDM5Njk2Nn0.Pv2wEzL_25QIM78snjJrjRnojwk8eQx743YNVUd0LXM], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770393376857, userId=34, username=ganesh@gmail.com}, simpHeartbeat=[J@674e527b, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6989a0e2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=jj13djqg}], simpHeartbeat=[J@7039c46a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6989a0e2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=jj13djqg}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:41:16 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 34 (page 0, size 50)
2026-02-06 21:41:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 34
2026-02-06 21:41:16 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userjj13djqg subscriptionId=sub-0 session=jj13djqg user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:41:16 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userjj13djqg subscriptionId=sub-1 session=jj13djqg user=ganesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:41:16 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 34
2026-02-06 21:41:20 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/9 id=sub-2 session=jj13djqg
2026-02-06 21:41:20 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/9 id=sub-3 session=jj13djqg
2026-02-06 21:41:20 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 9 by user 34
2026-02-06 21:41:20 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 9 by user 34
2026-02-06 21:41:20 [http-nio-8080-exec-3] INFO  c.e.e.controller.ChatController -  Marking conversation 9 as read by user 34
2026-02-06 21:41:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 9 as read by user 34
2026-02-06 21:41:20 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 messages in conversation 9
2026-02-06 21:41:20 [http-nio-8080-exec-3] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 9
2026-02-06 21:41:20 [http-nio-8080-exec-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/9 session=null payload={"conversationId":9,"readBy":34,"count":1}
2026-02-06 21:41:30 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=jj13djqg
2026-02-06 21:41:30 [clientInboundChannel-15] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=jj13djqg
2026-02-06 21:41:30 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=jj13djqg
2026-02-06 21:41:30 [clientInboundChannel-13] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=jj13djqg
2026-02-06 21:41:30 [clientInboundChannel-14] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-4 session=jj13djqg
2026-02-06 21:41:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=jj13djqg] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:41:30 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session jj13djqg
2026-02-06 21:41:30 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: ganesh@gmail.com (ID: 34), Session: jj13djqg
2026-02-06 21:41:30 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 34 went OFFLINE (last session closed)
2026-02-06 21:41:30 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 34 status to OFFLINE
2026-02-06 21:41:30 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/34 session=null payload={"userId":34,"timestamp":1770393390559,"status":"OFFLINE"}
2026-02-06 21:41:30 [clientInboundChannel-16] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=jj13djqg
2026-02-06 21:41:30 [clientOutboundChannel-13] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770393376857, userId=34, username=ganesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6989a0e2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=jj13djqg}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@6989a0e2, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=jj13djqg}]
2026-02-06 21:41:30 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 34 bookings: Total=2, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=0
2026-02-06 21:41:35 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [jj13djqg]
2026-02-06 21:41:40 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 21:41:40 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 21:41:40 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 21:41:40 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 21:41:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 21:41:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@47b93003]]
2026-02-06 21:41:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@47b93003]
2026-02-06 21:41:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@47b93003]
2026-02-06 21:41:41 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 21:41:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 21:41:41 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 21:41:41 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 21:41:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 21:41:41 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 21:44:00 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 26528 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 21:44:00 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 21:44:00 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 21:44:00 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 21:44:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 21:44:02 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 125 ms. Found 10 JPA repository interfaces.
2026-02-06 21:44:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 21:44:03 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 21:44:03 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 21:44:03 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 21:44:03 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2327 ms
2026-02-06 21:44:03 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 21:44:03 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 21:44:03 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 21:44:03 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 21:44:03 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 21:44:04 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4f03301
2026-02-06 21:44:04 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 21:44:04 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 21:44:04 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 21:44:05 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 21:44:06 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 21:44:06 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 21:44:10 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 21:44:10 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 21:44:10 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 21:44:10 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 21:44:11 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 21:44:11 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 21:44:11 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.RatingController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 21:44:11 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 21:44:11 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 21:44:12 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 21:44:12 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 21:44:12 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 21:44:12 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 21:44:12 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@49bb9137]
2026-02-06 21:44:12 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@49bb9137]
2026-02-06 21:44:12 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@49bb9137]]
2026-02-06 21:44:12 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 21:44:12 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 21:44:12 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 21:44:12 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 21:44:12 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 21:44:12 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 12.053 seconds (process running for 12.858)
2026-02-06 21:44:35 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 21:44:35 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 21:44:35 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2026-02-06 21:44:38 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:44:38 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:44:38 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:44:38 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:44:38 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:44:38 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:44:38 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:44:38 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:45:12 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 0 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(0)-CONNECTED(0)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], outboundChannel[pool size = 0, active threads = 0, queued tasks = 0, completed tasks = 0], sockJsScheduler[pool size = 1, active threads = 1, queued tasks = 0, completed tasks = 0]
2026-02-06 21:51:44 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:51:44 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:51:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:51:44 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770394004406
2026-02-06 21:51:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:51:44 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/195/xduj1d5j/websocket
2026-02-06 21:51:44 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:51:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xduj1d5j]
2026-02-06 21:51:45 [http-nio-8080-exec-5] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 21:51:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xduj1d5j] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:51:45 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xduj1d5j
2026-02-06 21:51:45 [http-nio-8080-exec-8] WARN  c.e.e.config.WebSocketEventListener -  WebSocket disconnected without userId - Session: xduj1d5j
2026-02-06 21:51:45 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xduj1d5j
2026-02-06 21:51:45 [clientOutboundChannel-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true}, simpSessionId=xduj1d5j}], simpSessionId=xduj1d5j}]
2026-02-06 21:51:45 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 6 (page 0, size 50)
2026-02-06 21:51:45 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 6
2026-02-06 21:51:45 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 6
2026-02-06 21:51:45 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:51:45 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:51:45 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:51:45 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:51:45 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:51:45 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:51:45 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:51:45 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:51:54 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xduj1d5j]
2026-02-06 21:56:48 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 21:57:13 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 11]
2026-02-06 21:57:13 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 40]
2026-02-06 21:57:13 [http-nio-8080-exec-8] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 24]
2026-02-06 21:57:13 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 13]
2026-02-06 21:57:13 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 4]
2026-02-06 21:57:13 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 8]
2026-02-06 21:57:13 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 7]
2026-02-06 21:57:13 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 5]
2026-02-06 21:57:30 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:30 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:31 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:32 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:33 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:34 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:35 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:36 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:45 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:45 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:46 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:47 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:57:48 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:58:19 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770394399100
2026-02-06 21:58:19 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 21:58:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:58:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 21:58:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/729/5trtrg3o/websocket
2026-02-06 21:58:19 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 21:58:19 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5trtrg3o]
2026-02-06 21:58:19 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 21:58:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 21:58:19 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 21:58:19 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5trtrg3o
2026-02-06 21:58:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 5trtrg3o
2026-02-06 21:58:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: himesh@gmail.com - Session: 5trtrg3o
2026-02-06 21:58:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: himesh@gmail.com
2026-02-06 21:58:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: himesh@gmail.com
2026-02-06 21:58:19 [http-nio-8080-exec-7] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:58:19 [http-nio-8080-exec-7] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: himesh@gmail.com (ID: 15), Session: 5trtrg3o
2026-02-06 21:58:19 [http-nio-8080-exec-7] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 5trtrg3o
2026-02-06 21:58:19 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=himesh@gmail.com session=5trtrg3o
2026-02-06 21:58:19 [clientOutboundChannel-2] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MTUsInN1YiI6ImhpbWVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTQzOTEsImV4cCI6MTc3MDM5Nzk5MX0.I_geOXqB2Fqoge3jZ42yin2uX4aj440e_XrxTQcS2wU], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770394399201, userId=15, username=himesh@gmail.com}, simpHeartbeat=[J@2b5d553e, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1a27935, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5trtrg3o}], simpHeartbeat=[J@4426d0c4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1a27935, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5trtrg3o}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:58:19 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user5trtrg3o subscriptionId=sub-0 session=5trtrg3o user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:58:19 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user5trtrg3o subscriptionId=sub-1 session=5trtrg3o user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:58:20 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-3 session=5trtrg3o
2026-02-06 21:58:20 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-2 session=5trtrg3o
2026-02-06 21:58:20 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 15
2026-02-06 21:58:20 [http-nio-8080-exec-1] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 15
2026-02-06 21:58:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 15
2026-02-06 21:58:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 15
2026-02-06 21:58:20 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl - Found 232 messages in conversation 8
2026-02-06 21:58:20 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 232 messages as read in conversation 8
2026-02-06 21:58:21 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":15,"count":232}
2026-02-06 21:58:29 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=5trtrg3o
2026-02-06 21:58:29 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/8 id=sub-4 session=5trtrg3o
2026-02-06 21:58:29 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/8 id=sub-5 session=5trtrg3o
2026-02-06 21:58:29 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Marking conversation 8 as read by user 15
2026-02-06 21:58:29 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 8 by user 15
2026-02-06 21:58:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 8 as read by user 15
2026-02-06 21:58:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 8 by user 15
2026-02-06 21:58:29 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 0 messages as read in conversation 8
2026-02-06 21:58:29 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/8 session=null payload={"conversationId":8,"readBy":15,"count":0}
2026-02-06 21:58:29 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 232 messages in conversation 8
2026-02-06 21:58:30 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=5trtrg3o
2026-02-06 21:58:30 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=5trtrg3o
2026-02-06 21:58:30 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-3 session=5trtrg3o
2026-02-06 21:58:30 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-4 session=5trtrg3o
2026-02-06 21:58:30 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-5 session=5trtrg3o
2026-02-06 21:58:30 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-6 session=5trtrg3o
2026-02-06 21:58:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5trtrg3o] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:58:30 [http-nio-8080-exec-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5trtrg3o
2026-02-06 21:58:30 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: himesh@gmail.com (ID: 15), Session: 5trtrg3o
2026-02-06 21:58:30 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  User 15 went OFFLINE (last session closed)
2026-02-06 21:58:30 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 15 status to OFFLINE
2026-02-06 21:58:30 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:30 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/15 session=null payload={"userId":15,"timestamp":1770394410923,"status":"OFFLINE"}
2026-02-06 21:58:30 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5trtrg3o
2026-02-06 21:58:30 [clientOutboundChannel-4] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770394399201, userId=15, username=himesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1a27935, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5trtrg3o}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@1a27935, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5trtrg3o}]
2026-02-06 21:58:30 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:31 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:32 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:33 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:34 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:35 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:36 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:37 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:38 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:39 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5trtrg3o]
2026-02-06 21:58:39 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:40 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:41 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:42 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:43 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:44 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:45 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:46 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:47 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:48 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:49 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:50 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:51 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:52 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:53 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:54 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:55 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:56 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:57 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:58:58 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:00 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:00 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:01 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:02 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:03 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:04 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:05 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:06 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:59:15 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770394455034
2026-02-06 21:59:15 [http-nio-8080-exec-6] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 21:59:15 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 21:59:15 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 21:59:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:59:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/448/cqrmkxra/websocket
2026-02-06 21:59:15 [http-nio-8080-exec-4] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=cqrmkxra]
2026-02-06 21:59:15 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: cqrmkxra
2026-02-06 21:59:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: cqrmkxra
2026-02-06 21:59:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: himesh@gmail.com - Session: cqrmkxra
2026-02-06 21:59:15 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 21:59:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 21:59:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: himesh@gmail.com
2026-02-06 21:59:15 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 21:59:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: himesh@gmail.com
2026-02-06 21:59:15 [http-nio-8080-exec-3] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:59:15 [http-nio-8080-exec-3] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: himesh@gmail.com (ID: 15), Session: cqrmkxra
2026-02-06 21:59:15 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=himesh@gmail.com session=cqrmkxra
2026-02-06 21:59:15 [http-nio-8080-exec-3] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: cqrmkxra
2026-02-06 21:59:15 [clientOutboundChannel-5] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MTUsInN1YiI6ImhpbWVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTQzOTEsImV4cCI6MTc3MDM5Nzk5MX0.I_geOXqB2Fqoge3jZ42yin2uX4aj440e_XrxTQcS2wU], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770394455106, userId=15, username=himesh@gmail.com}, simpHeartbeat=[J@3cb26230, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32758bd6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=cqrmkxra}], simpHeartbeat=[J@4426d0c4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32758bd6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=cqrmkxra}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:59:15 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-usercqrmkxra subscriptionId=sub-0 session=cqrmkxra user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:59:15 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-usercqrmkxra subscriptionId=sub-1 session=cqrmkxra user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:59:16 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=cqrmkxra
2026-02-06 21:59:16 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=cqrmkxra
2026-02-06 21:59:16 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=cqrmkxra
2026-02-06 21:59:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=cqrmkxra] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:59:16 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session cqrmkxra
2026-02-06 21:59:16 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: himesh@gmail.com (ID: 15), Session: cqrmkxra
2026-02-06 21:59:16 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 15 went OFFLINE (last session closed)
2026-02-06 21:59:16 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 15 status to OFFLINE
2026-02-06 21:59:16 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/15 session=null payload={"userId":15,"timestamp":1770394456293,"status":"OFFLINE"}
2026-02-06 21:59:16 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=cqrmkxra
2026-02-06 21:59:16 [clientOutboundChannel-3] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770394455106, userId=15, username=himesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32758bd6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=cqrmkxra}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@32758bd6, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=cqrmkxra}]
2026-02-06 21:59:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:59:17 [http-nio-8080-exec-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770394457947
2026-02-06 21:59:17 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 21:59:17 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 21:59:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 21:59:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/590/fwjk50xs/websocket
2026-02-06 21:59:17 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 21:59:17 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=fwjk50xs]
2026-02-06 21:59:17 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: fwjk50xs
2026-02-06 21:59:17 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: fwjk50xs
2026-02-06 21:59:18 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: himesh@gmail.com - Session: fwjk50xs
2026-02-06 21:59:18 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 21:59:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 21:59:18 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 21:59:18 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: himesh@gmail.com
2026-02-06 21:59:18 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: himesh@gmail.com
2026-02-06 21:59:18 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 21:59:18 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: himesh@gmail.com (ID: 15), Session: fwjk50xs
2026-02-06 21:59:18 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: fwjk50xs
2026-02-06 21:59:18 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=himesh@gmail.com session=fwjk50xs
2026-02-06 21:59:18 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MTUsInN1YiI6ImhpbWVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTQzOTEsImV4cCI6MTc3MDM5Nzk5MX0.I_geOXqB2Fqoge3jZ42yin2uX4aj440e_XrxTQcS2wU], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770394458024, userId=15, username=himesh@gmail.com}, simpHeartbeat=[J@679d9dc6, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@695a7f45, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fwjk50xs}], simpHeartbeat=[J@4426d0c4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@695a7f45, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fwjk50xs}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 21:59:18 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userfwjk50xs subscriptionId=sub-0 session=fwjk50xs user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:59:18 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userfwjk50xs subscriptionId=sub-1 session=fwjk50xs user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 21:59:24 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [cqrmkxra]
2026-02-06 21:59:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=fwjk50xs
2026-02-06 21:59:27 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=fwjk50xs
2026-02-06 21:59:27 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=fwjk50xs
2026-02-06 21:59:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=fwjk50xs] closed with CloseStatus[code=1000, reason=null]
2026-02-06 21:59:27 [http-nio-8080-exec-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session fwjk50xs
2026-02-06 21:59:27 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: himesh@gmail.com (ID: 15), Session: fwjk50xs
2026-02-06 21:59:27 [http-nio-8080-exec-8] INFO  c.e.e.config.WebSocketEventListener -  User 15 went OFFLINE (last session closed)
2026-02-06 21:59:27 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 15 status to OFFLINE
2026-02-06 21:59:27 [http-nio-8080-exec-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/15 session=null payload={"userId":15,"timestamp":1770394467300,"status":"OFFLINE"}
2026-02-06 21:59:27 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=fwjk50xs
2026-02-06 21:59:27 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770394458024, userId=15, username=himesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@695a7f45, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fwjk50xs}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@695a7f45, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=fwjk50xs}]
2026-02-06 21:59:27 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:27 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:28 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:29 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:30 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:31 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:32 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:33 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:34 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:34 [MessageBroker-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [fwjk50xs]
2026-02-06 21:59:35 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:36 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:37 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:38 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 21:59:39 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:00:12 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Activated booking ID: 52
2026-02-06 22:00:12 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 1, Completed: 0
2026-02-06 22:01:04 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:04 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:05 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:06 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:07 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:08 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:09 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:10 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:12 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:13 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:14 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:15 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:16 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:17 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:18 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:19 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:20 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:21 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:22 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:23 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:24 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:25 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:26 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:27 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:28 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:29 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:30 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:31 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:32 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:33 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:34 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:35 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:36 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:37 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:38 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:39 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:40 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:41 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:42 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:43 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:44 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:45 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:46 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:47 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:48 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:49 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:50 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:51 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:52 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:53 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:54 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:55 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:56 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:57 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:58 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:01:59 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:00 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:01 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:02 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:03 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:04 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:05 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:06 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:07 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:08 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:09 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:10 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:22 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:28 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:29 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:30 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:31 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:32 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:33 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:34 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:35 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:36 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:37 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:38 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:39 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:40 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:02:41 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:15 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:15 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:16 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:17 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:18 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:19 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:20 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:21 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 15 bookings: Total=10, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:03:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 22:03:21 [http-nio-8080-exec-10] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770394701643
2026-02-06 22:03:21 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 22:03:21 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 22:03:21 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 22:03:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@4613e64a
2026-02-06 22:03:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/666/5ksupeho/websocket
2026-02-06 22:03:21 [http-nio-8080-exec-8] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=5ksupeho]
2026-02-06 22:03:21 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: 5ksupeho
2026-02-06 22:03:21 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: 5ksupeho
2026-02-06 22:03:21 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: himesh@gmail.com - Session: 5ksupeho
2026-02-06 22:03:21 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 15 (page 0, size 50)
2026-02-06 22:03:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 15
2026-02-06 22:03:21 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 conversations for user 15
2026-02-06 22:03:21 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: himesh@gmail.com
2026-02-06 22:03:21 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: himesh@gmail.com
2026-02-06 22:03:21 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 22:03:21 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: himesh@gmail.com (ID: 15), Session: 5ksupeho
2026-02-06 22:03:21 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: 5ksupeho
2026-02-06 22:03:21 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=himesh@gmail.com session=5ksupeho
2026-02-06 22:03:21 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MTUsInN1YiI6ImhpbWVzaEBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTQzOTEsImV4cCI6MTc3MDM5Nzk5MX0.I_geOXqB2Fqoge3jZ42yin2uX4aj440e_XrxTQcS2wU], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770394701738, userId=15, username=himesh@gmail.com}, simpHeartbeat=[J@7add91a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@96a279f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5ksupeho}], simpHeartbeat=[J@4426d0c4, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@96a279f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5ksupeho}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 22:03:21 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-user5ksupeho subscriptionId=sub-0 session=5ksupeho user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:03:21 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-user5ksupeho subscriptionId=sub-1 session=5ksupeho user=himesh@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:03:26 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=5ksupeho
2026-02-06 22:03:26 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=5ksupeho
2026-02-06 22:03:26 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=5ksupeho
2026-02-06 22:03:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=5ksupeho] closed with CloseStatus[code=1000, reason=null]
2026-02-06 22:03:26 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session 5ksupeho
2026-02-06 22:03:26 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: himesh@gmail.com (ID: 15), Session: 5ksupeho
2026-02-06 22:03:26 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 15 went OFFLINE (last session closed)
2026-02-06 22:03:26 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 15 status to OFFLINE
2026-02-06 22:03:26 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/15 session=null payload={"userId":15,"timestamp":1770394706041,"status":"OFFLINE"}
2026-02-06 22:03:26 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=5ksupeho
2026-02-06 22:03:26 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770394701738, userId=15, username=himesh@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@96a279f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5ksupeho}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@96a279f, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=5ksupeho}]
2026-02-06 22:03:34 [MessageBroker-5] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [5ksupeho]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 22:04:38 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 22:04:38 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 22:04:38 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@49bb9137]]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@49bb9137]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@49bb9137]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 22:04:38 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 22:04:38 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 22:04:38 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 22:04:38 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2026-02-06 22:17:58 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Starting EvChargingBackendApplication using Java 21.0.2 with PID 24864 (E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend\target\classes started by Nayan-Windows in E:\EV_station_project(Both mode)\ev-station-backend\ev-charging-backend)
2026-02-06 22:17:58 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - No active profile set, falling back to 1 default profile: "default"
2026-02-06 22:17:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2026-02-06 22:17:58 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2026-02-06 22:18:03 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2026-02-06 22:18:04 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 530 ms. Found 10 JPA repository interfaces.
2026-02-06 22:18:06 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2026-02-06 22:18:06 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2026-02-06 22:18:06 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2026-02-06 22:18:07 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2026-02-06 22:18:07 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8877 ms
2026-02-06 22:18:08 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2026-02-06 22:18:08 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2026-02-06 22:18:08 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2026-02-06 22:18:09 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2026-02-06 22:18:09 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2026-02-06 22:18:10 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4480b2fc
2026-02-06 22:18:10 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2026-02-06 22:18:10 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2026-02-06 22:18:10 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.40
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2026-02-06 22:18:13 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2026-02-06 22:18:14 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 22:18:15 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2026-02-06 22:18:21 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Inbound WebSocket channel configured
2026-02-06 22:18:21 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Outbound WebSocket channel configured
2026-02-06 22:18:21 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket Message Broker initialized
2026-02-06 22:18:21 [restartedMain] INFO  o.s.s.c.a.a.c.InitializeUserDetailsBeanManagerConfigurer$InitializeUserDetailsManagerConfigurer - Global AuthenticationManager configured with UserDetailsService bean with name customUserDetailsService
2026-02-06 22:18:21 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2026-02-06 22:18:22 [restartedMain] INFO  c.e.e.config.WebSocketConfig - WebSocket transport tuned
2026-02-06 22:18:22 [restartedMain] INFO  c.e.e.config.WebSocketConfig - STOMP WebSocket endpoints registered
2026-02-06 22:18:22 [restartedMain] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Patterns [/ws/**, /ws] in 'stompWebSocketHandlerMapping'
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AdminController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.AuthController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.BookingController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChargerController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ChatController:
	{[MESSAGE],[/chat.stopTyping]}: sendStopTypingIndicator(Long,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.sendMessage]}: sendMessage(ChatMessageRequest,SimpMessageHeaderAccessor)
	{[MESSAGE],[/chat.typing]}: sendTypingIndicator(Long,SimpMessageHeaderAccessor)
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.DashboardController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.FileController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.NotificationController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.PaymentController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.RatingController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReceiptController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	c.e.e.c.ReservationController:
	
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - 
	o.s.b.a.w.s.e.BasicErrorController:
	
2026-02-06 22:18:23 [restartedMain] INFO  c.e.e.config.WebSocketConfig - Servlet WebSocket container configured
2026-02-06 22:18:23 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel added SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 22:18:23 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@baedc4c]
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@baedc4c]
2026-02-06 22:18:23 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@baedc4c]]
2026-02-06 22:18:23 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 22:18:23 [restartedMain] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel added UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 22:18:24 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2026-02-06 22:18:24 [restartedMain] INFO  o.s.s.config.TaskSchedulerRouter - More than one TaskScheduler bean exists within the context, and none is named 'taskScheduler'. Mark one of them as primary or name it 'taskScheduler' (possibly as an alias); or implement the SchedulingConfigurer interface and call ScheduledTaskRegistrar#setScheduler explicitly within the configureTasks() callback: [messageBrokerTaskScheduler, heartbeatTaskScheduler]
2026-02-06 22:18:24 [restartedMain] INFO  c.e.e.EvChargingBackendApplication - Started EvChargingBackendApplication in 27.746 seconds (process running for 29.607)
2026-02-06 22:18:32 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-02-06 22:18:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2026-02-06 22:18:32 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2026-02-06 22:18:38 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:38 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:39 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:40 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:41 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:42 [http-nio-8080-exec-8] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:43 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:44 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:45 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:46 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:47 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:48 [http-nio-8080-exec-6] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:49 [http-nio-8080-exec-3] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:50 [http-nio-8080-exec-2] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:51 [http-nio-8080-exec-10] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 23 bookings: Total=8, RESERVED=0, PAYMENT_PENDING=1, CONFIRMED=0
2026-02-06 22:18:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1f5f5ce7
2026-02-06 22:18:52 [http-nio-8080-exec-8] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 22:18:52 [http-nio-8080-exec-7] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770395632097
2026-02-06 22:18:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1f5f5ce7
2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/979/ne1svudc/websocket
2026-02-06 22:18:52 [http-nio-8080-exec-8] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 23
2026-02-06 22:18:52 [http-nio-8080-exec-8] WARN  o.s.d.w.c.SpringDataJacksonConfiguration$PageModule$WarningLoggingModifier - Serializing PageImpl instances as-is is not supported, meaning that there is no guarantee about the stability of the resulting JSON structure!
	For a stable JSON structure, please use Spring Data's PagedModel (globally via @EnableSpringDataWebSupport(pageSerializationMode = VIA_DTO))
	or Spring HATEOAS and Spring Data's PagedResourcesAssembler as documented in https://docs.spring.io/spring-data/commons/reference/repositories/core-extensions.html#core.web.pageables.

2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=ne1svudc]
2026-02-06 22:18:52 [http-nio-8080-exec-4] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 23 (page 0, size 50)
2026-02-06 22:18:52 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 23
2026-02-06 22:18:52 [http-nio-8080-exec-4] INFO  c.e.e.s.ChatMessageServiceImpl - Found 3 conversations for user 23
2026-02-06 22:18:52 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: ne1svudc
2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: ne1svudc
2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: dev@gmail.com - Session: ne1svudc
2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: dev@gmail.com
2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: dev@gmail.com
2026-02-06 22:18:52 [http-nio-8080-exec-1] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 22:18:52 [http-nio-8080-exec-1] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: dev@gmail.com (ID: 23), Session: ne1svudc
2026-02-06 22:18:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=dev@gmail.com session=ne1svudc
2026-02-06 22:18:52 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: ne1svudc
2026-02-06 22:18:52 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjMsInN1YiI6ImRldkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTU2MTMsImV4cCI6MTc3MDM5OTIxM30.HA_8P_kUzuKQ4IYYpleqTtugUBwiKlD4USyb9kzhM7M], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770395632425, userId=23, username=dev@gmail.com}, simpHeartbeat=[J@34cb02ce, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@45559f08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ne1svudc}], simpHeartbeat=[J@75aae4bf, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@45559f08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ne1svudc}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 22:18:52 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userne1svudc subscriptionId=sub-0 session=ne1svudc user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:18:52 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userne1svudc subscriptionId=sub-1 session=ne1svudc user=dev@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:18:55 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/14 id=sub-2 session=ne1svudc
2026-02-06 22:18:55 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/14 id=sub-3 session=ne1svudc
2026-02-06 22:18:55 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Marking conversation 14 as read by user 23
2026-02-06 22:18:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 14 as read by user 23
2026-02-06 22:18:55 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 14 by user 23
2026-02-06 22:18:55 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 14 by user 23
2026-02-06 22:18:55 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 7 messages in conversation 14
2026-02-06 22:18:55 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 7 messages as read in conversation 14
2026-02-06 22:18:55 [http-nio-8080-exec-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/14 session=null payload={"conversationId":14,"readBy":23,"count":7}
2026-02-06 22:18:57 [clientInboundChannel-3] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-2 session=ne1svudc
2026-02-06 22:18:57 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/messages/16 id=sub-4 session=ne1svudc
2026-02-06 22:18:57 [clientInboundChannel-4] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE /topic/typing/16 id=sub-5 session=ne1svudc
2026-02-06 22:18:57 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Marking conversation 16 as read by user 23
2026-02-06 22:18:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marking all messages in conversation 16 as read by user 23
2026-02-06 22:18:57 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Marked 1 messages as read in conversation 16
2026-02-06 22:18:57 [http-nio-8080-exec-9] INFO  c.e.e.controller.ChatController -  Fetching messages for conversation 16 by user 23
2026-02-06 22:18:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching messages for conversation 16 by user 23
2026-02-06 22:18:57 [http-nio-8080-exec-9] INFO  c.e.e.s.ChatMessageServiceImpl - Found 1 messages in conversation 16
2026-02-06 22:18:57 [http-nio-8080-exec-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/read-receipts/16 session=null payload={"conversationId":16,"readBy":23,"count":1}
2026-02-06 22:19:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=ne1svudc] closed with CloseStatus[code=1000, reason=null]
2026-02-06 22:19:00 [http-nio-8080-exec-6] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session ne1svudc
2026-02-06 22:19:00 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: dev@gmail.com (ID: 23), Session: ne1svudc
2026-02-06 22:19:00 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  User 23 went OFFLINE (last session closed)
2026-02-06 22:19:00 [http-nio-8080-exec-6] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 23 status to OFFLINE
2026-02-06 22:19:00 [http-nio-8080-exec-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/23 session=null payload={"status":"OFFLINE","userId":23,"timestamp":1770395640255}
2026-02-06 22:19:00 [clientInboundChannel-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=ne1svudc
2026-02-06 22:19:00 [clientOutboundChannel-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770395632425, userId=23, username=dev@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@45559f08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ne1svudc}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@45559f08, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=ne1svudc}]
2026-02-06 22:19:07 [MessageBroker-4] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [ne1svudc]
2026-02-06 22:19:08 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 49]
2026-02-06 22:19:08 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 41]
2026-02-06 22:19:08 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 36]
2026-02-06 22:19:08 [http-nio-8080-exec-6] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 25]
2026-02-06 22:19:08 [http-nio-8080-exec-9] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 27]
2026-02-06 22:19:08 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 26]
2026-02-06 22:19:08 [http-nio-8080-exec-2] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 20]
2026-02-06 22:19:08 [http-nio-8080-exec-10] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 16]
2026-02-06 22:19:23 [MessageBroker-3] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[0 current WS(0)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 27], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 10, active threads = 1, queued tasks = 1, completed tasks = 7]
2026-02-06 22:20:40 [http-nio-8080-exec-1] INFO  c.e.e.controller.RatingController - POST /api/ratings - Creating rating for booking: 49
2026-02-06 22:20:40 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.RatingServiceImpl - Creating rating for booking ID: 49 by user: nayanchy2004@gmail.com
2026-02-06 22:20:40 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.RatingServiceImpl - Rating created successfully with ID: 4
2026-02-06 22:20:40 [http-nio-8080-exec-1] INFO  c.e.e.serviceImpl.RatingServiceImpl - Updated charger 29 average rating to: 5.00
2026-02-06 22:20:56 [http-nio-8080-exec-5] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=7, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=0
2026-02-06 22:21:25 [http-nio-8080-exec-10] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 22:21:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 22:21:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1f5f5ce7
2026-02-06 22:21:25 [http-nio-8080-exec-10] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 22:21:25 [http-nio-8080-exec-6] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770395785578
2026-02-06 22:21:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1f5f5ce7
2026-02-06 22:21:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/365/xdfqhmch/websocket
2026-02-06 22:21:25 [http-nio-8080-exec-3] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=xdfqhmch]
2026-02-06 22:21:25 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: xdfqhmch
2026-02-06 22:21:25 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: xdfqhmch
2026-02-06 22:21:25 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: saurav@gmail.com - Session: xdfqhmch
2026-02-06 22:21:25 [http-nio-8080-exec-7] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 22:21:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 22:21:25 [http-nio-8080-exec-7] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 22:21:25 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: saurav@gmail.com
2026-02-06 22:21:25 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: saurav@gmail.com
2026-02-06 22:21:25 [http-nio-8080-exec-5] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 22:21:25 [http-nio-8080-exec-5] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: saurav@gmail.com (ID: 24), Session: xdfqhmch
2026-02-06 22:21:25 [http-nio-8080-exec-5] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: xdfqhmch
2026-02-06 22:21:25 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=saurav@gmail.com session=xdfqhmch
2026-02-06 22:21:25 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjQsInN1YiI6InNhdXJhdkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTU3NTQsImV4cCI6MTc3MDM5OTM1NH0.JNRd0eGptzkl6WniP3yusLo9LmdhwJgQhLwPAPVxDOM], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770395785662, userId=24, username=saurav@gmail.com}, simpHeartbeat=[J@3749f5f1, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@398e1d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xdfqhmch}], simpHeartbeat=[J@75aae4bf, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@398e1d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xdfqhmch}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 22:21:25 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-userxdfqhmch subscriptionId=sub-0 session=xdfqhmch user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:21:25 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-userxdfqhmch subscriptionId=sub-1 session=xdfqhmch user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:21:29 [clientInboundChannel-5] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=xdfqhmch
2026-02-06 22:21:29 [clientInboundChannel-8] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=xdfqhmch
2026-02-06 22:21:29 [clientInboundChannel-7] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=xdfqhmch
2026-02-06 22:21:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=xdfqhmch] closed with CloseStatus[code=1000, reason=null]
2026-02-06 22:21:29 [http-nio-8080-exec-2] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session xdfqhmch
2026-02-06 22:21:29 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: saurav@gmail.com (ID: 24), Session: xdfqhmch
2026-02-06 22:21:29 [http-nio-8080-exec-2] INFO  c.e.e.config.WebSocketEventListener -  User 24 went OFFLINE (last session closed)
2026-02-06 22:21:29 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 24 status to OFFLINE
2026-02-06 22:21:29 [http-nio-8080-exec-2] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/24 session=null payload={"status":"OFFLINE","userId":24,"timestamp":1770395789537}
2026-02-06 22:21:29 [clientInboundChannel-6] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=xdfqhmch
2026-02-06 22:21:29 [clientOutboundChannel-5] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770395785662, userId=24, username=saurav@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@398e1d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xdfqhmch}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@398e1d68, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=xdfqhmch}]
2026-02-06 22:21:29 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=7, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=0
2026-02-06 22:21:37 [MessageBroker-14] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [xdfqhmch]
2026-02-06 22:21:50 [http-nio-8080-exec-1] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 10]
2026-02-06 22:21:50 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 50]
2026-02-06 22:21:56 [http-nio-8080-exec-5] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 22:22:29 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 10]
2026-02-06 22:22:29 [http-nio-8080-exec-4] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.evstation.ev_charging_backend.exception.RatingNotFoundException: No rating found for booking ID: 50]
2026-02-06 22:30:24 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Completed booking ID: 52
2026-02-06 22:30:24 [pool-2-thread-1] INFO  c.e.e.s.BookingStatusScheduler - Status update summary - Activated: 0, Completed: 1
2026-02-06 22:33:23 [http-nio-8080-exec-9] INFO  c.e.e.controller.RatingController - POST /api/ratings - Creating rating for booking: 50
2026-02-06 22:33:23 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.RatingServiceImpl - Creating rating for booking ID: 50 by user: hari@gmail.com
2026-02-06 22:33:23 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.RatingServiceImpl - Rating created successfully with ID: 5
2026-02-06 22:33:23 [http-nio-8080-exec-9] INFO  c.e.e.serviceImpl.RatingServiceImpl - Updated charger 29 average rating to: 4.00
2026-02-06 22:33:31 [http-nio-8080-exec-3] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [org.springframework.web.servlet.resource.NoResourceFoundException: No static resource bmw.jpg.]
2026-02-06 22:34:00 [http-nio-8080-exec-4] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=7, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=0
2026-02-06 22:34:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1f5f5ce7
2026-02-06 22:34:14 [http-nio-8080-exec-3] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/info?t=1770396554651
2026-02-06 22:34:14 [http-nio-8080-exec-5] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 22:34:14 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 22:34:14 [http-nio-8080-exec-5] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 22:34:14 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.s.WebSocketHandlerMapping - Mapped to org.springframework.web.socket.sockjs.support.SockJsHttpRequestHandler@1f5f5ce7
2026-02-06 22:34:14 [http-nio-8080-exec-11] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Processing transport request: GET http://localhost:8080/ws/118/i0w3pyca/websocket
2026-02-06 22:34:14 [http-nio-8080-exec-11] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - New WebSocketServerSockJsSession[id=i0w3pyca]
2026-02-06 22:34:14 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  Authenticating WebSocket connection - Session: i0w3pyca
2026-02-06 22:34:14 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted JWT token (first 20 chars): eyJhbGciOiJIUzI1NiJ9... - Session: i0w3pyca
2026-02-06 22:34:14 [http-nio-8080-exec-2] INFO  c.e.e.controller.ChatController -  Fetching conversations for user 24 (page 0, size 50)
2026-02-06 22:34:14 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl -  Fetching conversations for user 24
2026-02-06 22:34:14 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Extracted username: saurav@gmail.com - Session: i0w3pyca
2026-02-06 22:34:14 [http-nio-8080-exec-2] INFO  c.e.e.s.ChatMessageServiceImpl - Found 2 conversations for user 24
2026-02-06 22:34:14 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  JWT token validated successfully for user: saurav@gmail.com
2026-02-06 22:34:14 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  User details loaded for: saurav@gmail.com
2026-02-06 22:34:14 [http-nio-8080-exec-6] DEBUG c.e.e.c.WebSocketAuthInterceptor -  Authentication setup complete - SecurityContext and session attributes configured
2026-02-06 22:34:14 [http-nio-8080-exec-6] INFO  c.e.e.c.WebSocketAuthInterceptor -  WebSocket authenticated successfully - User: saurav@gmail.com (ID: 24), Session: i0w3pyca
2026-02-06 22:34:14 [clientInboundChannel-10] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing CONNECT user=saurav@gmail.com session=i0w3pyca
2026-02-06 22:34:14 [http-nio-8080-exec-6] INFO  c.e.e.config.WebSocketEventListener -  WebSocket connection attempt - Session: i0w3pyca
2026-02-06 22:34:14 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzI1NiJ9.eyJyb2xlIjoiSE9TVCIsInVzZXJJZCI6MjQsInN1YiI6InNhdXJhdkBnbWFpbC5jb20iLCJpYXQiOjE3NzAzOTY1MzgsImV4cCI6MTc3MDQwMDEzOH0.v5xVd2L92Xl3YuZIJuhhezTUJ0w46xDZWYtepwrkPWo], accept-version=[1.2,1.1,1.0], heart-beat=[25000,25000]}, simpSessionAttributes={authenticated=true, authenticationTime=1770396554767, userId=24, username=saurav@gmail.com}, simpHeartbeat=[J@5ca18c1a, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@526679fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=i0w3pyca}], simpHeartbeat=[J@75aae4bf, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@526679fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=i0w3pyca}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.evstation.ev_charging_backend.config.WebSocketEventListener.handleWebSocketConnectedListener(WebSocketEventListener.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2026-02-06 22:34:14 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/messages-useri0w3pyca subscriptionId=sub-0 session=i0w3pyca user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:34:14 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing SUBSCRIBE destination=/queue/confirmations-useri0w3pyca subscriptionId=sub-1 session=i0w3pyca user=saurav@gmail.com attributes[4] payload=byte[0]
2026-02-06 22:34:17 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-0 session=i0w3pyca
2026-02-06 22:34:17 [clientInboundChannel-11] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing UNSUBSCRIBE id=sub-1 session=i0w3pyca
2026-02-06 22:34:17 [clientInboundChannel-9] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT receipt=close-2 session=i0w3pyca
2026-02-06 22:34:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.h.LoggingWebSocketHandlerDecorator - WebSocketServerSockJsSession[id=i0w3pyca] closed with CloseStatus[code=1000, reason=null]
2026-02-06 22:34:17 [http-nio-8080-exec-1] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - Clearing session i0w3pyca
2026-02-06 22:34:17 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  WebSocket disconnected - User: saurav@gmail.com (ID: 24), Session: i0w3pyca
2026-02-06 22:34:17 [http-nio-8080-exec-1] INFO  c.e.e.config.WebSocketEventListener -  User 24 went OFFLINE (last session closed)
2026-02-06 22:34:17 [http-nio-8080-exec-1] INFO  c.e.e.s.ChatMessageServiceImpl -  Setting user 24 status to OFFLINE
2026-02-06 22:34:17 [http-nio-8080-exec-1] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing MESSAGE destination=/topic/presence/24 session=null payload={"status":"OFFLINE","userId":24,"timestamp":1770396557132}
2026-02-06 22:34:17 [clientInboundChannel-12] DEBUG o.s.m.s.b.SimpleBrokerMessageHandler - Processing DISCONNECT session=i0w3pyca
2026-02-06 22:34:17 [clientOutboundChannel-8] DEBUG o.s.w.s.m.SubProtocolWebSocketHandler - No session for GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT_ACK, simpDisconnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=DISCONNECT, stompCommand=DISCONNECT, simpSessionAttributes={org.springframework.messaging.simp.SimpAttributes.COMPLETED=true, authenticated=true, authenticationTime=1770396554767, userId=24, username=saurav@gmail.com}, simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@526679fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=i0w3pyca}], simpUser=UsernamePasswordAuthenticationToken [Principal=com.evstation.ev_charging_backend.security.CustomUserDetails@526679fe, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[ROLE_HOST]], simpSessionId=i0w3pyca}]
2026-02-06 22:34:17 [http-nio-8080-exec-7] INFO  c.e.e.serviceImpl.BookingServiceImpl -  Host 24 bookings: Total=7, RESERVED=0, PAYMENT_PENDING=0, CONFIRMED=0
2026-02-06 22:34:22 [MessageBroker-9] DEBUG o.s.w.s.s.t.h.DefaultSockJsService - Closed 1 sessions: [i0w3pyca]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2026-02-06 22:34:45 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2026-02-06 22:34:45 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientOutboundChannel removed SubProtocolWebSocketHandler[StompSubProtocolHandler[v10.stomp, v11.stomp, v12.stomp]]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed WebSocketAnnotationMethodMessageHandler[prefixes=[/app/]]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2026-02-06 22:34:45 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@baedc4c]]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@baedc4c]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@baedc4c]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2026-02-06 22:34:45 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - clientInboundChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] DEBUG o.s.m.s.ExecutorSubscribableChannel - brokerChannel removed UserDestinationMessageHandler[DefaultUserDestinationResolver[prefix=/user/]]
2026-02-06 22:34:45 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2026-02-06 22:34:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2026-02-06 22:34:45 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
